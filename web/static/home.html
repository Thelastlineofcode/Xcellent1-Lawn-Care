<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Xcellent1 Lawn Care | River Parishes Professional Lawn Services
    </title>
    <meta
      name="description"
      content="Professional lawn care services in the River Parishes, Louisiana. Expert tips, seasonal guides, and quality landscaping supplies delivered to your door."
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&amp;display=swap"
      rel="stylesheet"
    />
    <link rel="icon" type="image/png" sizes="32x32" href="images/favicon.ico" />
    <link
      rel="icon"
      type="image/png"
      sizes="192x192"
      href="images/xcellent1-icon-192.png"
    />
    <link
      rel="apple-touch-icon"
      sizes="192x192"
      href="images/xcellent1-icon-192.png"
    />
    <meta name="theme-color" content="#3b832a" />
    <link rel="stylesheet" href="styles.css" />
    <!-- Home styles moved to `styles.css` to centralize CSS and improve caching -->
  </head>
  <body>
    <nav class="navbar">
      <div class="navbar-brand">
        <img
          src="images/xcellent1-logo-transparent.png"
          alt="Xcellent1 logo"
          class="navbar-logo"
        />
        <div class="navbar-title">
          <span class="navbar-name">XCELLENT1</span>
          <span class="navbar-tagline">LAWN CARE</span>
        </div>
      </div>
      <div class="navbar-links">
        <a href="#services" class="navbar-link">Services</a>
        <a href="shop.html" class="navbar-link">Shop</a>
        <a href="careers.html" class="navbar-link">Careers</a>
        <a href="login.html" class="navbar-link" aria-label="Login">Login</a>
      </div>
    </nav>

    <!-- Shop banner removed from homepage; catalog lives at shop.html -->
    <section class="hero-home">
      <img
        class="hero-bg-fallback"
        src="images/CoverPhoto.png"
        alt=""
        aria-hidden="true"
      />
      <h1 class="hero-title">Xcellent1 Lawn Care</h1>
      <p class="subtitle">
        Professional Lawn Services in the River Parishes, Louisiana
      </p>
      <p>
        Expert lawn care, seasonal tips, and quality supplies for beautiful
        Louisiana lawns
      </p>
      <div class="hero-buttons">
        <a href="#services" class="hero-button btn-primary">Our Services</a>
        <a href="shop.html" class="hero-button btn-secondary">Shop Supplies</a>
        <a href="careers.html" class="hero-button btn-secondary"
          >Join Our Team</a
        >
        <a
          href="login.html"
          class="hero-button btn-secondary"
          aria-label="Login to your account"
          >Login</a
        >
      </div>
      <!-- Waitlist form -->
      <form id="waitlist-form" class="waitlist-form" action="#">
        <div class="waitlist-step" id="waitlist-step-1">
          <input
            aria-label="Name"
            name="name"
            class="form-field"
            placeholder="Your name"
            required
            autocomplete="name"
            inputmode="text"
          />
          <button
            type="button"
            class="waitlist-submit"
            onclick="showWaitlistStep(2)"
          >
            Next
          </button>
        </div>
        <div class="waitlist-step" id="waitlist-step-2" style="display: none">
          <input
            aria-label="Email"
            name="email"
            type="email"
            class="form-field"
            placeholder="Email address"
            required
            autocomplete="email"
            inputmode="email"
          />
          <button
            type="button"
            class="waitlist-submit"
            onclick="showWaitlistStep(3)"
          >
            Next
          </button>
        </div>
        <div class="waitlist-step" id="waitlist-step-3" style="display: none">
          <select
            name="service"
            class="form-select"
            aria-label="Service of interest"
          >
            <option value="weekly">Weekly Lawn Maintenance</option>
            <option value="flower-bed">
              Flower Bed Clean Out & Weed Removal
            </option>
            <option value="spring-cleaning">Spring Cleaning</option>
            <option value="leaf-debris">Leaf & Debris Removal</option>
            <option value="tractor">Tractor / Bush Hog Services</option>
          </select>
          <button type="submit" class="waitlist-submit">Join Waitlist</button>
        </div>
      </form>
      <script>
        function showWaitlistStep(step) {
          for (let i = 1; i <= 3; i++) {
            document.getElementById("waitlist-step-" + i).style.display =
              i === step ? "" : "none";
          }
        }
      </script>
      <div
        id="waitlist-success"
        style="
          display: none;
          margin-top: 1rem;
          text-align: center;
          color: #059669;
          font-weight: 600;
          font-size: 1.1rem;
        "
      >
        Thank you for joining the waitlist! We'll be in touch soon.
      </div>
    </section>

    <section id="services">
      <div class="section-header">
        <h2>Our Professional Services</h2>
        <p>Transforming lawns across the River Parishes, Louisiana</p>
      </div>
      <div class="services-grid">
        <div
          class="service-card"
          onclick="openServiceModal('Weekly Lawn Maintenance')"
          style="cursor: pointer"
        >
          <div
            class="service-image bg-service-lawn"
            role="img"
            aria-label="Weekly Lawn Maintenance"
          >
            <noscript>
              <img
                src="images/lawnservices.jpg"
                alt="Weekly Lawn Maintenance"
              />
            </noscript>
          </div>
          <div class="service-content">
            <h3
              style="color: #3b832a; font-size: 1.4rem; margin-bottom: 0.75rem"
            >
              Weekly Lawn Maintenance
            </h3>
            <p style="color: #64748b; line-height: 1.7">
              Mowing, edging, trimming, and blowing. Keep your LaPlace lawn
              pristine with scheduled weekly visits.
            </p>
            <p
              style="
                color: #f23d00;
                font-weight: 700;
                margin-top: 1.5rem;
                font-size: 1.2rem;
              "
            >
              Starting at $60/visit
            </p>
          </div>
        </div>
        <div
          class="service-card"
          onclick="openServiceModal('Flower Bed Clean Out & Weed Removal')"
          style="cursor: pointer"
        >
          <div
            class="service-image bg-service-flowerbed"
            role="img"
            aria-label="Flower Bed Clean Out & Weed Removal"
          >
            <noscript>
              <img
                src="images/flowerbedcleanup.jpg"
                alt="Flower Bed Clean Out & Weed Removal"
              />
            </noscript>
          </div>
          <div class="service-content">
            <h3
              style="color: #3b832a; font-size: 1.4rem; margin-bottom: 0.75rem"
            >
              Flower Bed Clean Out &amp; Weed Removal
            </h3>
            <p style="color: #64748b; line-height: 1.7">
              Thorough clean-outs, weed removal, and bed preparation using
              Louisiana-native plant recommendations.
            </p>
            <p
              style="
                color: #f23d00;
                font-weight: 700;
                margin-top: 1.5rem;
                font-size: 1.2rem;
              "
            >
              From $150
            </p>
          </div>
        </div>
        <div
          class="service-card"
          onclick="openServiceModal('Spring Cleaning')"
          style="cursor: pointer"
        >
          <div
            class="service-image bg-service-spring"
            role="img"
            aria-label="Spring Cleaning"
          >
            <noscript>
              <img src="images/springcleaning.jpg" alt="Spring Cleaning" />
            </noscript>
          </div>
          <div class="service-content">
            <h3
              style="color: #3b832a; font-size: 1.4rem; margin-bottom: 0.75rem"
            >
              Spring Cleaning
            </h3>
            <p style="color: #64748b; line-height: 1.7">
              Full spring refresh: debris removal, edging, mulching, and
              prepping your yard for the growing season.
            </p>
            <p
              style="
                color: #f23d00;
                font-weight: 700;
                margin-top: 1.5rem;
                font-size: 1.2rem;
              "
            >
              Custom quotes
            </p>
          </div>
        </div>
        <div
          class="service-card"
          onclick="openServiceModal('Leaf & Debris Removal')"
          style="cursor: pointer"
        >
          <div
            class="service-image bg-service-leaf"
            role="img"
            aria-label="Leaf & Debris Removal"
          >
            <noscript>
              <img src="images/lawnservices.jpg" alt="Leaf & Debris Removal" />
            </noscript>
          </div>
          <div class="service-content">
            <h3
              style="color: #3b832a; font-size: 1.4rem; margin-bottom: 0.75rem"
            >
              Leaf &amp; Debris Removal
            </h3>
            <p style="color: #64748b; line-height: 1.7">
              Seasonal cleanup to remove leaves, branches, and debris to keep
              landscapes healthy and tidy.
            </p>
            <p
              style="
                color: #f23d00;
                font-weight: 700;
                margin-top: 1.5rem;
                font-size: 1.2rem;
              "
            >
              Seasonal pricing
            </p>
          </div>
        </div>
        <div
          class="service-card"
          onclick="openServiceModal('Tractor / Bush Hog Services')"
          style="cursor: pointer"
        >
          <div
            class="service-image bg-service-bushhog"
            role="img"
            aria-label="Tractor / Bush Hog Services"
          >
            <noscript>
              <img src="images/bushhog.jpg" alt="Tractor / Bush Hog Services" />
            </noscript>
          </div>
          <div class="service-content">
            <h3
              style="color: #3b832a; font-size: 1.4rem; margin-bottom: 0.75rem"
            >
              Tractor / Bush Hog Services
            </h3>
            <p style="color: #64748b; line-height: 1.7">
              Heavy-duty land clearing, pasture mowing, and overgrown lot
              maintenance using tractor-mounted bush hogs.
            </p>
            <p
              style="
                color: #f23d00;
                font-weight: 700;
                margin-top: 1.5rem;
                font-size: 1.2rem;
              "
            >
              Call for pricing
            </p>
          </div>
        </div>
      </div>
    </section>

    <section id="blog" class="blog-section">
      <div class="section-header">
        <h2>River Parishes Lawn Care Blog</h2>
        <p>Expert tips for maintaining beautiful lawns in the River Parishes</p>
      </div>
      <div class="blog-grid">
        <article class="blog-card">
          <div
            class="blog-image"
            style="
              background-image: url(&quot;https://images.unsplash.com/photo-1558904541-efa843a96f01?w=800&amp;q=80&quot;);
            "
          ></div>
          <div class="blog-content">
            <div class="blog-date">November 2025</div>
            <h3 class="blog-title">Best Grass Types for LaPlace, Louisiana</h3>
            <p class="blog-excerpt">
              St. Augustine, Bermuda, Zoysia, and Centipede grass thrive in
              LaPlace's humid climate.
            </p>
            <!-- removed nested navbar; global navbar at page top is authoritative -->
            <p class="blog-excerpt">
              Deep watering 1-2x/week beats daily sprinkling. Water early
              morning.
            </p>
            <a href="blog-watering-guide.html" class="read-more"
              >Read More &rarr;</a
            >
          </div>
        </article>
        <article class="blog-card">
          <div
            class="blog-image"
            style="
              background-image: url(&quot;https://images.unsplash.com/photo-1592419044706-39796d40f98c?w=800&amp;q=80&quot;);
            "
          ></div>
          <div class="blog-content">
            <div class="blog-date">November 2025</div>
            <h3 class="blog-title">Seasonal Lawn Care Tips</h3>
            <p class="blog-excerpt">
              Learn how to keep your lawn healthy and beautiful through all four
              seasons in Louisiana.
            </p>
            <a href="blog-seasonal-tips.html" class="read-more"
              >Read More &rarr;</a
            >
          </div>
        </article>
      </div>
    </section>

    <!-- Product catalog moved to shop.html -->

    <!-- Service Inquiry Modal -->
    <div
      id="service-modal"
      style="
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        z-index: 1000;
        align-items: center;
        justify-content: center;
      "
    >
      <div
        style="
          background: white;
          border-radius: 12px;
          padding: 2rem;
          max-width: 500px;
          width: 90%;
          margin: 2rem;
          max-height: 90vh;
          overflow-y: auto;
        "
      >
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
          "
        >
          <h2 style="color: #10b981; margin: 0" id="modal-service-title">
            Request Service
          </h2>
          <button
            onclick="closeServiceModal()"
            style="
              background: none;
              border: none;
              font-size: 2rem;
              cursor: pointer;
              color: #6b7280;
            "
          >
            &times;
          </button>
        </div>
        <form
          id="service-inquiry-form"
          action="#"
          onsubmit="return handleServiceInquiry(event)"
        >
          <input type="hidden" id="inquiry-service" name="service" />
          <div style="margin-bottom: 1rem">
            <label
              for="firstName"
              style="
                display: block;
                font-weight: 600;
                margin-bottom: 0.5rem;
                color: #374151;
              "
              >First Name</label
            >
            <input
              id="firstName"
              type="text"
              name="firstName"
              required
              style="
                width: 100%;
                padding: 0.75rem;
                border: 2px solid #e5e7eb;
                border-radius: 8px;
                font-size: 1rem;
              "
              autocomplete="given-name"
            />
          </div>
          <div style="margin-bottom: 1rem">
            <label
              for="lastName"
              style="
                display: block;
                font-weight: 600;
                margin-bottom: 0.5rem;
                color: #374151;
              "
              >Last Name</label
            >
            <input
              id="lastName"
              type="text"
              name="lastName"
              required
              style="
                width: 100%;
                padding: 0.75rem;
                border: 2px solid #e5e7eb;
                border-radius: 8px;
                font-size: 1rem;
              "
              autocomplete="family-name"
            />
          </div>
          <div style="margin-bottom: 1rem">
            <label
              for="phone"
              style="
                display: block;
                font-weight: 600;
                margin-bottom: 0.5rem;
                color: #374151;
              "
              >Phone Number</label
            >
            <input
              id="phone"
              type="tel"
              name="phone"
              required
              style="
                width: 100%;
                padding: 0.75rem;
                border: 2px solid #e5e7eb;
                border-radius: 8px;
                font-size: 1rem;
              "
              autocomplete="tel"
            />
          </div>
          <div style="margin-bottom: 1rem">
            <label
              for="email"
              style="
                display: block;
                font-weight: 600;
                margin-bottom: 0.5rem;
                color: #374151;
              "
              >Email Address</label
            >
            <input
              id="email"
              type="email"
              name="email"
              required
              style="
                width: 100%;
                padding: 0.75rem;
                border: 2px solid #e5e7eb;
                border-radius: 8px;
                font-size: 1rem;
              "
              autocomplete="email"
            />
          </div>
          <div style="margin-bottom: 1.5rem">
            <label
              for="address"
              style="
                display: block;
                font-weight: 600;
                margin-bottom: 0.5rem;
                color: #374151;
              "
              >Service Address</label
            >
            <input
              id="address"
              type="text"
              name="address"
              required
              style="
                width: 100%;
                padding: 0.75rem;
                border: 2px solid #e5e7eb;
                border-radius: 8px;
                font-size: 1rem;
              "
              autocomplete="address-line1"
              placeholder="Street address, City, State, ZIP"
            />
          </div>
          <button
            type="submit"
            style="
              width: 100%;
              padding: 1rem;
              background: #10b981;
              color: white;
              border: none;
              border-radius: 8px;
              font-size: 1.1rem;
              font-weight: 700;
              cursor: pointer;
            "
          >
            Submit Request
          </button>
        </form>
      </div>
    </div>

    <!-- Login Modal -->
    <div
      id="login-modal"
      style="
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        z-index: 1000;
        align-items: center;
        justify-content: center;
      "
    >
      <div
        style="
          background: white;
          border-radius: 12px;
          padding: 2rem;
          max-width: 400px;
          width: 90%;
          margin: 2rem;
          max-height: 90vh;
          overflow-y: auto;
        "
      >
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
          "
        >
          <h2 style="color: #3b832a; margin: 0">Dashboard Access</h2>
          <button
            onclick="closeLoginModal()"
            style="
              background: none;
              border: none;
              font-size: 2rem;
              cursor: pointer;
              color: #6b7280;
            "
          >
            &times;
          </button>
        </div>

        <!-- Login Step 1: Role Selection -->
        <div id="login-step-1">
          <p style="margin-bottom: 1rem; color: #64748b">
            Select your dashboard to access.
          </p>
          <form
            id="login-role-form"
            action="#"
            onsubmit="return handleRoleSelection(event)"
          >
            <div style="margin-bottom: 1.5rem">
              <div style="margin-bottom: 1rem">
                <label
                  style="
                    display: flex;
                    align-items: center;
                    cursor: pointer;
                    padding: 1rem;
                    border: 2px solid #e5e7eb;
                    border-radius: 8px;
                    transition: all 0.2s;
                  "
                >
                  <input
                    type="radio"
                    name="role"
                    value="owner"
                    required
                    style="margin-right: 0.75rem; width: 18px; height: 18px"
                  />
                  <span>
                    <span
                      style="
                        font-weight: 600;
                        color: #374151;
                        margin-bottom: 0.25rem;
                        display: block;
                      "
                    >
                      Owner Dashboard
                    </span>
                    <span
                      style="
                        font-size: 0.875rem;
                        color: #64748b;
                        display: block;
                      "
                    >
                      Business KPIs, crew management, revenue tracking
                    </span>
                  </span>
                </label>
              </div>
              <div style="margin-bottom: 1rem">
                <label
                  style="
                    display: flex;
                    align-items: center;
                    cursor: pointer;
                    padding: 1rem;
                    border: 2px solid #e5e7eb;
                    border-radius: 8px;
                    transition: all 0.2s;
                  "
                >
                  <input
                    type="radio"
                    name="role"
                    value="crew"
                    style="margin-right: 0.75rem; width: 18px; height: 18px"
                  />
                  <span>
                    <span
                      style="
                        font-weight: 600;
                        color: #374151;
                        margin-bottom: 0.25rem;
                        display: block;
                      "
                    >
                      Crew Dashboard
                    </span>
                    <span
                      style="
                        font-size: 0.875rem;
                        color: #64748b;
                        display: block;
                      "
                    >
                      Today's jobs, navigation, photo uploads
                    </span>
                  </span>
                </label>
              </div>
            </div>
            <button
              type="submit"
              style="
                width: 100%;
                padding: 1rem;
                background: #3b832a;
                color: white;
                border: none;
                border-radius: 8px;
                font-size: 1.1rem;
                font-weight: 700;
                cursor: pointer;
              "
            >
              Access Dashboard
            </button>
          </form>
        </div>

        <!-- Login Step 2: Owner Authentication -->
        <div id="login-step-2" style="display: none">
          <p style="margin-bottom: 1rem; color: #64748b">
            Enter your credentials to access the owner dashboard.
          </p>
          <form
            id="login-auth-form"
            action="#"
            onsubmit="return handleOwnerLogin(event)"
          >
            <div style="margin-bottom: 1rem">
              <label
                for="login-username"
                style="
                  display: block;
                  font-weight: 600;
                  margin-bottom: 0.5rem;
                  color: #374151;
                "
                >Username</label
              >
              <input
                id="login-username"
                type="text"
                name="username"
                required
                style="
                  width: 100%;
                  padding: 0.75rem;
                  border: 2px solid #e5e7eb;
                  border-radius: 8px;
                  font-size: 1rem;
                "
                autocomplete="username"
                placeholder="Enter username"
              />
            </div>
            <div style="margin-bottom: 1.5rem">
              <label
                for="login-password"
                style="
                  display: block;
                  font-weight: 600;
                  margin-bottom: 0.5rem;
                  color: #374151;
                "
                >Password</label
              >
              <input
                id="login-password"
                type="password"
                name="password"
                required
                style="
                  width: 100%;
                  padding: 0.75rem;
                  border: 2px solid #e5e7eb;
                  border-radius: 8px;
                  font-size: 1rem;
                "
                autocomplete="current-password"
                placeholder="Enter password"
              />
            </div>
            <div style="display: flex; gap: 0.5rem; margin-bottom: 1rem">
              <button
                type="button"
                onclick="showLoginStep(1)"
                style="
                  flex: 1;
                  padding: 1rem;
                  background: #6b7280;
                  color: white;
                  border: none;
                  border-radius: 8px;
                  font-size: 1rem;
                  font-weight: 600;
                  cursor: pointer;
                "
              >
                Back
              </button>
              <button
                type="submit"
                style="
                  flex: 1;
                  padding: 1rem;
                  background: #3b832a;
                  color: white;
                  border: none;
                  border-radius: 8px;
                  font-size: 1rem;
                  font-weight: 700;
                  cursor: pointer;
                "
              >
                Login
              </button>
            </div>
          </form>
          <div style="text-align: center; margin: 1rem 0; color: #64748b;">
            <hr style="border-top: 1px solid #e5e7eb; margin-bottom: 1rem;">
            <span>OR</span>
          </div>
          <button
            id="google-signin-btn"
            type="button"
            style="
              width: 100%;
              padding: 1rem;
              background: #4285F4;
              color: white;
              border: none;
              border-radius: 8px;
              font-size: 1.1rem;
              font-weight: 700;
              cursor: pointer;
              display: flex;
              align-items: center;
              justify-content: center;
            "
          >
            <svg style="margin-right: 0.5rem;" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M19.98 10.19C19.98 9.53 19.93 8.9 19.82 8.29H10.2V12.03H15.71C15.48 13.21 14.83 14.21 13.88 14.86V17.58H16.89C18.66 16.02 19.98 13.35 19.98 10.19Z" fill="white"/>
              <path d="M10.2 20C12.95 20 15.26 19.09 16.89 17.58L13.88 14.86C12.99 15.45 11.75 15.82 10.2 15.82C7.51 15.82 5.23 14.01 4.39 11.66H1.28V14.47C2.92 17.76 6.3 20 10.2 20Z" fill="white"/>
              <path d="M4.39 11.66C4.19 11.05 4.09 10.42 4.09 9.77C4.09 9.12 4.2 8.5 4.39 7.88V5.07H1.28C0.47 6.64 0 8.16 0 9.77C0 11.38 0.47 12.9 1.28 14.47L4.39 11.66Z" fill="white"/>
              <path d="M10.2 3.72C11.56 3.72 12.79 4.2 13.71 5.08L16.96 1.83C15.25 0.35 12.94 0 10.2 0C6.3 0 2.92 2.24 1.28 5.53L4.39 7.88C5.23 5.53 7.51 3.72 10.2 3.72Z" fill="white"/>
            </svg>
            Sign in with Google
          </button>
        </div>

        <div
          id="login-message"
          style="margin-top: 1rem; text-align: center"
        ></div>
      </div>
    </div>

    <footer
      style="
        background: #222d39;
        color: white;
        padding: 4rem 2rem 2rem;
        text-align: center;
      "
    >
      <h3 style="font-size: 1.8rem; margin-bottom: 1rem">
        üå± Xcellent1 Lawn Care
      </h3>
      <p style="font-size: 1.1rem; opacity: 0.9">
        Professional lawn services in the River Parishes, Louisiana
      </p>
      <p style="margin-top: 1.5rem; font-size: 1.1rem">
        üìû
        <a
          href="tel:5048758079"
          style="color: #60c848; text-decoration: none; font-weight: 600"
        >
          (504) 875-8079
        </a>
        <span style="margin: 0 1rem; opacity: 0.5">|</span>
        ‚úâÔ∏è
        <a
          href="mailto:info@xcellent1lawn.com"
          style="color: #60c848; text-decoration: none; font-weight: 600"
        >
          info@xcellent1lawn.com
        </a>
        <span style="margin: 0 1rem; opacity: 0.5">|</span>
        <a
          href="https://share.google/g9NOoUz5MBAFSugF1"
          target="_blank"
          rel="noopener noreferrer"
          style="color: #60c848; text-decoration: none; font-weight: 600"
        >
          Google Business Profile
        </a>
      </p>
      <p
        style="
          margin-top: 3rem;
          color: rgba(255, 255, 255, 0.6);
          font-size: 0.9rem;
        "
      >
        &copy; 2025 Xcellent1 Lawn Care. All rights reserved.
      </p>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
      async function handleWaitlistSubmit(e) {
        e.preventDefault();
        const form = document.getElementById("waitlist-form");
        const data = new FormData(form);
        const payload = {
          name: data.get("name"),
          email: data.get("email"),
          service: data.get("service"),
        };

        try {
          const res = await fetch("/api/waitlist", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload),
          });

          if (res.ok) {
            const json = await res.json();
            alert(
              "Thanks! You have been added to the waitlist. We will email you soon."
            );
            form.reset();
          } else {
            // Backend returned error status
            try {
              const json = await res.json();
              alert("Error: " + (json.error || "Unable to join waitlist"));
            } catch {
              alert("Error: Unable to join waitlist. Please try again later.");
            }
          }
        } catch (err) {
          console.error("Waitlist submission error:", err);
          // Graceful degradation - show success even if backend is unavailable
          alert(
            "Thanks for your interest! We're experiencing technical difficulties, but we've noted your request. Please email us directly at info@xcellent1lawncare.com"
          );
          form.reset();
        }
        return false;
      }

      function openServiceModal(serviceName) {
        document.getElementById("modal-service-title").textContent =
          serviceName;
        document.getElementById("inquiry-service").value = serviceName;
        const modal = document.getElementById("service-modal");
        modal.style.display = "flex";
      }

      function closeServiceModal() {
        document.getElementById("service-modal").style.display = "none";
        document.getElementById("service-inquiry-form").reset();
      }

      async function handleServiceInquiry(e) {
        e.preventDefault();
        const form = document.getElementById("service-inquiry-form");
        const data = new FormData(form);
        const payload = {
          firstName: data.get("firstName"),
          lastName: data.get("lastName"),
          phone: data.get("phone"),
          email: data.get("email"),
          address: data.get("address"),
          service: data.get("service"),
        };

        try {
          const res = await fetch("/api/service-inquiry", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(payload),
          });

          if (res.ok) {
            const json = await res.json();
            alert(
              "Thank you! We have received your service request and will contact you within 24 hours."
            );
            closeServiceModal();
          } else {
            // Backend returned error status
            try {
              const json = await res.json();
              alert("Error: " + (json.error || "Unable to submit request"));
            } catch {
              alert("Error: Unable to submit request. Please try again later.");
            }
          }
        } catch (err) {
          console.error("Service inquiry error:", err);
          // Graceful degradation - show success even if backend is unavailable
          alert(
            "Thank you for your interest! We're experiencing technical difficulties. Please call us directly at (504) 875-8079 or email info@xcellent1lawncare.com"
          );
          closeServiceModal();
        }
        return false;
      }

      // Close modal when clicking outside
      document
        .getElementById("service-modal")
        ?.addEventListener("click", function (e) {
          if (e.target === this) {
            closeServiceModal();
          }
        });

      // Login modal functions
      function openLoginModal() {
        document.getElementById("login-modal").style.display = "flex";
        document.getElementById("login-step-1").style.display = "block";
        document.getElementById("login-step-2").style.display = "none";
        document.getElementById("login-message").textContent = "";
        document.getElementById("login-role-form").reset();
        document.getElementById("login-auth-form").reset();
      }

      function closeLoginModal() {
        document.getElementById("login-modal").style.display = "none";
      }

      function showLoginStep(step) {
        document.getElementById("login-step-1").style.display =
          step === 1 ? "block" : "none";
        document.getElementById("login-step-2").style.display =
          step === 2 ? "block" : "none";
        document.getElementById("login-message").textContent = "";
      }

      async function handleRoleSelection(e) {
        e.preventDefault();
        const form = document.getElementById("login-role-form");
        const formData = new FormData(form);
        const role = formData.get("role");

        if (role === "owner") {
          // Show owner login form
          showLoginStep(2);
        } else if (role === "crew") {
          // Direct redirect for crew
          const messageDiv = document.getElementById("login-message");
          messageDiv.textContent = "Accessing crew dashboard...";
          messageDiv.style.color = "#059669";
          setTimeout(() => {
            window.location.href = "crew.html";
          }, 500);
        }

        return false;
      }

      async function handleOwnerLogin(e) {
        e.preventDefault();
        const form = document.getElementById("login-auth-form");
        const formData = new FormData(form);
        const username = formData.get("username");
        const password = formData.get("password");
        const messageDiv = document.getElementById("login-message");

        messageDiv.textContent = "Authenticating...";
        messageDiv.style.color = "#059669";

        try {
          const res = await fetch("/api/auth/login", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ username, password }),
          });

          if (res.ok) {
            const json = await res.json();
            messageDiv.textContent = "Login successful! Redirecting...";
            setTimeout(() => {
              window.location.href = "owner.html";
            }, 500);
          } else {
            const json = await res.json();
            messageDiv.textContent = json.error || "Invalid credentials";
            messageDiv.style.color = "#dc2626";
          }
        } catch (err) {
          console.error("Login error:", err);
          messageDiv.textContent = "Login failed. Please try again.";
          messageDiv.style.color = "#dc2626";
        }

        return false;
      }

      async function handleGoogleSignIn() {
        const messageDiv = document.getElementById("login-message");
        messageDiv.textContent = "Redirecting to Google...";
        messageDiv.style.color = "#059669";
        
        const supabaseUrl = "https://utivthfrwgtjatsusopw.supabase.co";
        const supabaseKey = "sb_publishable_nX8IeSiT3FJ3iL2GJbf_vA_Jj90PMvt";
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

        const { data, error } = await supabase.auth.signInWithOAuth({
            provider: 'google',
            options: {
                redirectTo: window.location.origin,
            },
        });

        if (error) {
            console.error('Error signing in with Google:', error);
            messageDiv.textContent = "Error with Google Sign-In. See console for details.";
            messageDiv.style.color = "#dc2626";
        }
      }

      document.addEventListener('DOMContentLoaded', () => {
        const googleSignInButton = document.getElementById('google-signin-btn');
        if (googleSignInButton) {
            googleSignInButton.addEventListener('click', handleGoogleSignIn);
        }

        const supabaseUrl = "https://utivthfrwgtjatsusopw.supabase.co";
        const supabaseKey = "sb_publishable_nX8IeSiT3FJ3iL2GJbf_vA_Jj90PMvt";
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

        supabase.auth.onAuthStateChange(async (event, session) => {
            if (event === 'SIGNED_IN' && session?.provider_token) {
                if (session.user.email !== 'lacardiofrancis@gmail.com') {
                    await supabase.auth.signOut();
                    alert('Access denied. This service is restricted.');
                    window.location.href = '/';
                } else {
                     window.location.href = 'owner.html'; 
                }
            }
        });
      });
    </script>
  </body>
</html>
