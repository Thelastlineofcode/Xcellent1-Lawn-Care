var cy=Object.defineProperty,dy=Object.defineProperties;var fy=Object.getOwnPropertyDescriptors;var bd=Object.getOwnPropertySymbols;var py=Object.prototype.hasOwnProperty,hy=Object.prototype.propertyIsEnumerable;var Nd=(t,e,n)=>e in t?cy(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,q=(t,e)=>{for(var n in e||={})py.call(e,n)&&Nd(t,n,e[n]);if(bd)for(var n of bd(e))hy.call(e,n)&&Nd(t,n,e[n]);return t},K=(t,e)=>dy(t,fy(e));var De=null,Dr=!1,da=1,gy=null,Pe=Symbol("SIGNAL");function b(t){let e=De;return De=t,e}function Tr(){return De}var go={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function fa(t){if(Dr)throw new Error("");if(De===null)return;De.consumerOnSignalRead(t);let e=De.producersTail;if(e!==void 0&&e.producer===t)return;let n,o=De.recomputing;if(o&&(n=e!==void 0?e.nextProducer:De.producers,n!==void 0&&n.producer===t)){De.producersTail=n,n.lastReadVersion=t.version;return}let r=t.consumersTail;if(r!==void 0&&r.consumer===De&&(!o||yy(r,De)))return;let i=bn(De),s={producer:t,consumer:De,nextProducer:n,prevConsumer:r,lastReadVersion:t.version,nextConsumer:void 0};De.producersTail=s,e!==void 0?e.nextProducer=s:De.producers=s,i&&Fd(t,s)}function xd(){da++}function pa(t){if(!(bn(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===da)){if(!t.producerMustRecompute(t)&&!ya(t)){ca(t);return}t.producerRecomputeValue(t),ca(t)}}function ha(t){if(t.consumers===void 0)return;let e=Dr;Dr=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let o=n.consumer;o.dirty||my(o)}}finally{Dr=e}}function ga(){return De?.consumerAllowSignalWrites!==!1}function my(t){t.dirty=!0,ha(t),t.consumerMarkedDirty?.(t)}function ca(t){t.dirty=!1,t.lastCleanEpoch=da}function Sr(t){return t&&Rd(t),b(t)}function Rd(t){t.producersTail=void 0,t.recomputing=!0}function ma(t,e){b(e),t&&Pd(t)}function Pd(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(bn(t))do n=va(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function ya(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,o=e.lastReadVersion;if(o!==n.version||(pa(n),o!==n.version))return!0}return!1}function wr(t){if(bn(t)){let e=t.producers;for(;e!==void 0;)e=va(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function Fd(t,e){let n=t.consumersTail,o=bn(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!o)for(let r=t.producers;r!==void 0;r=r.nextProducer)Fd(r.producer,r)}function va(t){let e=t.producer,n=t.nextProducer,o=t.nextConsumer,r=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,o!==void 0?o.prevConsumer=r:e.consumersTail=r,r!==void 0)r.nextConsumer=o;else if(e.consumers=o,!bn(e)){let i=e.producers;for(;i!==void 0;)i=va(i)}return n}function bn(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function Ea(t){gy?.(t)}function yy(t,e){let n=e.producersTail;if(n!==void 0){let o=e.producers;do{if(o===t)return!0;if(o===n)break;o=o.nextProducer}while(o!==void 0)}return!1}function _a(t,e){return Object.is(t,e)}function Ar(t,e){let n=Object.create(vy);n.computation=t,e!==void 0&&(n.equal=e);let o=()=>{if(pa(n),fa(n),n.value===Ir)throw n.error;return n.value};return o[Pe]=n,Ea(n),o}var la=Symbol("UNSET"),ua=Symbol("COMPUTING"),Ir=Symbol("ERRORED"),vy=K(q({},go),{value:la,dirty:!0,error:null,equal:_a,kind:"computed",producerMustRecompute(t){return t.value===la||t.value===ua},producerRecomputeValue(t){if(t.value===ua)throw new Error("");let e=t.value;t.value=ua;let n=Sr(t),o,r=!1;try{o=t.computation(),b(null),r=e!==la&&e!==Ir&&o!==Ir&&t.equal(e,o)}catch(i){o=Ir,t.error=i}finally{ma(t,n)}if(r){t.value=e;return}t.value=o,t.version++}});function Ey(){throw new Error}var kd=Ey;function Ld(t){kd(t)}function Ca(t){kd=t}var _y=null;function Da(t,e){let n=Object.create(Ud);n.value=t,e!==void 0&&(n.equal=e);let o=()=>Od(n);return o[Pe]=n,Ea(n),[o,s=>Ia(n,s),s=>Vd(n,s)]}function Od(t){return fa(t),t.value}function Ia(t,e){ga()||Ld(t),t.equal(t.value,e)||(t.value=e,Cy(t))}function Vd(t,e){ga()||Ld(t),Ia(t,e(t.value))}var Ud=K(q({},go),{equal:_a,value:void 0,kind:"signal"});function Cy(t){t.version++,xd(),ha(t),_y?.(t)}function Ta(t){let e=b(null);try{return t()}finally{b(e)}}function Y(t){return typeof t=="function"}function Mr(t){let n=t(o=>{Error.call(o),o.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var br=Mr(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((o,r)=>`${r+1}) ${o.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function mo(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var we=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let i of n)i.remove(this);else n.remove(this);let{initialTeardown:o}=this;if(Y(o))try{o()}catch(i){e=i instanceof br?i.errors:[i]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let i of r)try{Hd(i)}catch(s){e=e??[],s instanceof br?e=[...e,...s.errors]:e.push(s)}}if(e)throw new br(e)}}add(e){var n;if(e&&e!==this)if(this.closed)Hd(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&mo(n,e)}remove(e){let{_finalizers:n}=this;n&&mo(n,e),e instanceof t&&e._removeParent(this)}};we.EMPTY=(()=>{let t=new we;return t.closed=!0,t})();var Sa=we.EMPTY;function Nr(t){return t instanceof we||t&&"closed"in t&&Y(t.remove)&&Y(t.add)&&Y(t.unsubscribe)}function Hd(t){Y(t)?t():t.unsubscribe()}var Ye={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Nn={setTimeout(t,e,...n){let{delegate:o}=Nn;return o?.setTimeout?o.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Nn;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function xr(t){Nn.setTimeout(()=>{let{onUnhandledError:e}=Ye;if(e)e(t);else throw t})}function wa(){}var Bd=Aa("C",void 0,void 0);function Gd(t){return Aa("E",void 0,t)}function $d(t){return Aa("N",t,void 0)}function Aa(t,e,n){return{kind:t,value:e,error:n}}var nn=null;function xn(t){if(Ye.useDeprecatedSynchronousErrorHandling){let e=!nn;if(e&&(nn={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:o}=nn;if(nn=null,n)throw o}}else t()}function qd(t){Ye.useDeprecatedSynchronousErrorHandling&&nn&&(nn.errorThrown=!0,nn.error=t)}var on=class extends we{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Nr(e)&&e.add(this)):this.destination=Ty}static create(e,n,o){return new Rn(e,n,o)}next(e){this.isStopped?ba($d(e),this):this._next(e)}error(e){this.isStopped?ba(Gd(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ba(Bd,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},Dy=Function.prototype.bind;function Ma(t,e){return Dy.call(t,e)}var Na=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(o){Rr(o)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(o){Rr(o)}else Rr(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Rr(n)}}},Rn=class extends on{constructor(e,n,o){super();let r;if(Y(e)||!e)r={next:e??void 0,error:n??void 0,complete:o??void 0};else{let i;this&&Ye.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&Ma(e.next,i),error:e.error&&Ma(e.error,i),complete:e.complete&&Ma(e.complete,i)}):r=e}this.destination=new Na(r)}};function Rr(t){Ye.useDeprecatedSynchronousErrorHandling?qd(t):xr(t)}function Iy(t){throw t}function ba(t,e){let{onStoppedNotification:n}=Ye;n&&Nn.setTimeout(()=>n(t,e))}var Ty={closed:!0,next:wa,error:Iy,complete:wa};var Pn=typeof Symbol=="function"&&Symbol.observable||"@@observable";function zd(t){return t}function Wd(t){return t.length===0?zd:t.length===1?t[0]:function(n){return t.reduce((o,r)=>r(o),n)}}var de=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let o=new t;return o.source=this,o.operator=n,o}subscribe(n,o,r){let i=wy(n)?n:new Rn(n,o,r);return xn(()=>{let{operator:s,source:l}=this;i.add(s?s.call(i,l):l?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(o){n.error(o)}}forEach(n,o){return o=jd(o),new o((r,i)=>{let s=new Rn({next:l=>{try{n(l)}catch(c){i(c),s.unsubscribe()}},error:i,complete:r});this.subscribe(s)})}_subscribe(n){var o;return(o=this.source)===null||o===void 0?void 0:o.subscribe(n)}[Pn](){return this}pipe(...n){return Wd(n)(this)}toPromise(n){return n=jd(n),new n((o,r)=>{let i;this.subscribe(s=>i=s,s=>r(s),()=>o(i))})}}return t.create=e=>new t(e),t})();function jd(t){var e;return(e=t??Ye.Promise)!==null&&e!==void 0?e:Promise}function Sy(t){return t&&Y(t.next)&&Y(t.error)&&Y(t.complete)}function wy(t){return t&&t instanceof on||Sy(t)&&Nr(t)}function Ay(t){return Y(t?.lift)}function Fn(t){return e=>{if(Ay(e))return e.lift(function(n){try{return t(n,this)}catch(o){this.error(o)}});throw new TypeError("Unable to lift unknown Observable type")}}function kn(t,e,n,o,r){return new xa(t,e,n,o,r)}var xa=class extends on{constructor(e,n,o,r,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(l){try{n(l)}catch(c){e.error(c)}}:super._next,this._error=r?function(l){try{r(l)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=o?function(){try{o()}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var Jd=Mr(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ke=(()=>{class t extends de{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let o=new Pr(this,this);return o.operator=n,o}_throwIfClosed(){if(this.closed)throw new Jd}next(n){xn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let o of this.currentObservers)o.next(n)}})}error(n){xn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:o}=this;for(;o.length;)o.shift().error(n)}})}complete(){xn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:o,isStopped:r,observers:i}=this;return o||r?Sa:(this.currentObservers=null,i.push(n),new we(()=>{this.currentObservers=null,mo(i,n)}))}_checkFinalizedStatuses(n){let{hasError:o,thrownError:r,isStopped:i}=this;o?n.error(r):i&&n.complete()}asObservable(){let n=new de;return n.source=this,n}}return t.create=(e,n)=>new Pr(e,n),t})(),Pr=class extends Ke{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.next)===null||o===void 0||o.call(n,e)}error(e){var n,o;(o=(n=this.destination)===null||n===void 0?void 0:n.error)===null||o===void 0||o.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,o;return(o=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&o!==void 0?o:Sa}};var yo=class extends Ke{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:o}=this;if(e)throw n;return this._throwIfClosed(),o}next(e){super.next(this._value=e)}};function My(t){return t[t.length-1]}function Yd(t){return Y(My(t))?t.pop():void 0}function Zd(t,e,n,o){function r(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function l(f){try{d(o.next(f))}catch(p){s(p)}}function c(f){try{d(o.throw(f))}catch(p){s(p)}}function d(f){f.done?i(f.value):r(f.value).then(l,c)}d((o=o.apply(t,e||[])).next())})}function Kd(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function rn(t){return this instanceof rn?(this.v=t,this):new rn(t)}function Qd(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),r,i=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(g){return function(m){return Promise.resolve(m).then(g,p)}}function l(g,m){o[g]&&(r[g]=function(y){return new Promise(function(E,v){i.push([g,y,E,v])>1||c(g,y)})},m&&(r[g]=m(r[g])))}function c(g,m){try{d(o[g](m))}catch(y){h(i[0][3],y)}}function d(g){g.value instanceof rn?Promise.resolve(g.value.v).then(f,p):h(i[0][2],g)}function f(g){c("next",g)}function p(g){c("throw",g)}function h(g,m){g(m),i.shift(),i.length&&c(i[0][0],i[0][1])}}function Xd(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Kd=="function"?Kd(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(i){n[i]=t[i]&&function(s){return new Promise(function(l,c){s=t[i](s),r(l,c,s.done,s.value)})}}function r(i,s,l,c){Promise.resolve(c).then(function(d){i({value:d,done:l})},s)}}var Fr=t=>t&&typeof t.length=="number"&&typeof t!="function";function kr(t){return Y(t?.then)}function Lr(t){return Y(t[Pn])}function Or(t){return Symbol.asyncIterator&&Y(t?.[Symbol.asyncIterator])}function Vr(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function by(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ur=by();function Hr(t){return Y(t?.[Ur])}function Br(t){return Qd(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:o,done:r}=yield rn(n.read());if(r)return yield rn(void 0);yield yield rn(o)}}finally{n.releaseLock()}})}function Gr(t){return Y(t?.getReader)}function Ut(t){if(t instanceof de)return t;if(t!=null){if(Lr(t))return Ny(t);if(Fr(t))return xy(t);if(kr(t))return Ry(t);if(Or(t))return ef(t);if(Hr(t))return Py(t);if(Gr(t))return Fy(t)}throw Vr(t)}function Ny(t){return new de(e=>{let n=t[Pn]();if(Y(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function xy(t){return new de(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Ry(t){return new de(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,xr)})}function Py(t){return new de(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function ef(t){return new de(e=>{ky(t,e).catch(n=>e.error(n))})}function Fy(t){return ef(Br(t))}function ky(t,e){var n,o,r,i;return Zd(this,void 0,void 0,function*(){try{for(n=Xd(t);o=yield n.next(),!o.done;){let s=o.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{o&&!o.done&&(i=n.return)&&(yield i.call(n))}finally{if(r)throw r.error}}e.complete()})}function pt(t,e,n,o=0,r=!1){let i=e.schedule(function(){n(),r?t.add(this.schedule(null,o)):this.unsubscribe()},o);if(t.add(i),!r)return i}function $r(t,e=0){return Fn((n,o)=>{n.subscribe(kn(o,r=>pt(o,t,()=>o.next(r),e),()=>pt(o,t,()=>o.complete(),e),r=>pt(o,t,()=>o.error(r),e)))})}function qr(t,e=0){return Fn((n,o)=>{o.add(t.schedule(()=>n.subscribe(o),e))})}function tf(t,e){return Ut(t).pipe(qr(e),$r(e))}function nf(t,e){return Ut(t).pipe(qr(e),$r(e))}function of(t,e){return new de(n=>{let o=0;return e.schedule(function(){o===t.length?n.complete():(n.next(t[o++]),n.closed||this.schedule())})})}function rf(t,e){return new de(n=>{let o;return pt(n,e,()=>{o=t[Ur](),pt(n,e,()=>{let r,i;try{({value:r,done:i}=o.next())}catch(s){n.error(s);return}i?n.complete():n.next(r)},0,!0)}),()=>Y(o?.return)&&o.return()})}function zr(t,e){if(!t)throw new Error("Iterable cannot be null");return new de(n=>{pt(n,e,()=>{let o=t[Symbol.asyncIterator]();pt(n,e,()=>{o.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function sf(t,e){return zr(Br(t),e)}function af(t,e){if(t!=null){if(Lr(t))return tf(t,e);if(Fr(t))return of(t,e);if(kr(t))return nf(t,e);if(Or(t))return zr(t,e);if(Hr(t))return rf(t,e);if(Gr(t))return sf(t,e)}throw Vr(t)}function Ra(t,e){return e?af(t,e):Ut(t)}function sn(t,e){return Fn((n,o)=>{let r=0;n.subscribe(kn(o,i=>{o.next(t.call(e,i,r++))}))})}var{isArray:Ly}=Array;function Oy(t,e){return Ly(e)?t(...e):t(e)}function lf(t){return sn(e=>Oy(t,e))}var{isArray:Vy}=Array,{getPrototypeOf:Uy,prototype:Hy,keys:By}=Object;function uf(t){if(t.length===1){let e=t[0];if(Vy(e))return{args:e,keys:null};if(Gy(e)){let n=By(e);return{args:n.map(o=>e[o]),keys:n}}}return{args:t,keys:null}}function Gy(t){return t&&typeof t=="object"&&Uy(t)===Hy}function cf(t,e){return t.reduce((n,o,r)=>(n[o]=e[r],n),{})}function Pa(...t){let e=Yd(t),{args:n,keys:o}=uf(t),r=new de(i=>{let{length:s}=n;if(!s){i.complete();return}let l=new Array(s),c=s,d=s;for(let f=0;f<s;f++){let p=!1;Ut(n[f]).subscribe(kn(i,h=>{p||(p=!0,d--),l[f]=h},()=>c--,void 0,()=>{(!c||!p)&&(d||i.next(o?cf(o,l):l),i.complete())}))}});return e?r.pipe(lf(e)):r}var Fa;function Wr(){return Fa}function ht(t){let e=Fa;return Fa=t,e}var df=Symbol("NotFound");function Ln(t){return t===df||t?.name==="\u0275NotFound"}var Zr="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",O=class extends Error{code;constructor(e,n){super(Ya(e,n)),this.code=e}};function zy(t){return`NG0${Math.abs(t)}`}function Ya(t,e){return`${zy(t)}${e?": "+e:""}`}function ne(t){for(let e in t)if(t[e]===ne)return e;throw Error("")}function mf(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Ht(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(Ht).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let o=n.indexOf(`
`);return o>=0?n.slice(0,o):n}function Qr(t,e){return t?e?`${t} ${e}`:t:e||""}var Wy=ne({__forward_ref__:ne});function $t(t){return t.__forward_ref__=$t,t.toString=function(){return Ht(this())},t}function ve(t){return Ka(t)?t():t}function Ka(t){return typeof t=="function"&&t.hasOwnProperty(Wy)&&t.__forward_ref__===$t}function re(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function qt(t){return{providers:t.providers||[],imports:t.imports||[]}}function Xr(t){return jy(t,ei)}function jy(t,e){return t.hasOwnProperty(e)&&t[e]||null}function Jy(t){let e=t?.[ei]??null;return e||null}function La(t){return t&&t.hasOwnProperty(Jr)?t[Jr]:null}var ei=ne({\u0275prov:ne}),Jr=ne({\u0275inj:ne}),B=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=re({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Za(t){return t&&!!t.\u0275providers}var Qa=ne({\u0275cmp:ne}),Xa=ne({\u0275dir:ne}),el=ne({\u0275pipe:ne});var Eo=ne({\u0275fac:ne}),fn=ne({__NG_ELEMENT_ID__:ne}),ff=ne({__NG_ENV_ID__:ne});function pn(t){return nl(t,"@Component"),t[Qa]||null}function tl(t){return nl(t,"@Directive"),t[Xa]||null}function yf(t){return nl(t,"@Pipe"),t[el]||null}function nl(t,e){if(t==null)throw new O(-919,!1)}function ti(t){return typeof t=="string"?t:t==null?"":String(t)}function vf(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():ti(t)}var Ef=ne({ngErrorCode:ne}),Yy=ne({ngErrorMessage:ne}),Ky=ne({ngTokenPath:ne});function ol(t,e){return _f("",-200,e)}function ni(t,e){throw new O(-201,!1)}function _f(t,e,n){let o=new O(e,t);return o[Ef]=e,o[Yy]=t,n&&(o[Ky]=n),o}function Zy(t){return t[Ef]}var Oa;function Cf(){return Oa}function Fe(t){let e=Oa;return Oa=t,e}function rl(t,e,n){let o=Xr(t);if(o&&o.providedIn=="root")return o.value===void 0?o.value=o.factory():o.value;if(n&8)return null;if(e!==void 0)return e;ni(t,"")}var Qy={},an=Qy,Xy="__NG_DI_FLAG__",Va=class{injector;constructor(e){this.injector=e}retrieve(e,n){let o=ln(n)||0;try{return this.injector.get(e,o&8?null:an,o)}catch(r){if(Ln(r))return r;throw r}}};function ev(t,e=0){let n=Wr();if(n===void 0)throw new O(-203,!1);if(n===null)return rl(t,void 0,e);{let o=tv(e),r=n.retrieve(t,o);if(Ln(r)){if(o.optional)return null;throw r}return r}}function Z(t,e=0){return(Cf()||ev)(ve(t),e)}function H(t,e){return Z(t,ln(e))}function ln(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function tv(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Ua(t){let e=[];for(let n=0;n<t.length;n++){let o=ve(t[n]);if(Array.isArray(o)){if(o.length===0)throw new O(900,!1);let r,i=0;for(let s=0;s<o.length;s++){let l=o[s],c=nv(l);typeof c=="number"?c===-1?r=l.token:i|=c:r=l}e.push(Z(r,i))}else e.push(Z(o))}return e}function nv(t){return t[Xy]}function un(t,e){let n=t.hasOwnProperty(Eo);return n?t[Eo]:null}function Df(t,e,n){if(t.length!==e.length)return!1;for(let o=0;o<t.length;o++){let r=t[o],i=e[o];if(n&&(r=n(r),i=n(i)),i!==r)return!1}return!0}function If(t){return t.flat(Number.POSITIVE_INFINITY)}function oi(t,e){t.forEach(n=>Array.isArray(n)?oi(n,e):e(n))}function il(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Io(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Tf(t,e,n,o){let r=t.length;if(r==e)t.push(n,o);else if(r===1)t.push(o,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let i=r-2;t[r]=t[i],r--}t[e]=n,t[e+1]=o}}function ri(t,e,n){let o=Un(t,e);return o>=0?t[o|1]=n:(o=~o,Tf(t,o,e,n)),o}function ii(t,e){let n=Un(t,e);if(n>=0)return t[n|1]}function Un(t,e){return ov(t,e,1)}function ov(t,e,n){let o=0,r=t.length>>n;for(;r!==o;){let i=o+(r-o>>1),s=t[i<<n];if(e===s)return i<<n;s>e?r=i:o=i+1}return~(r<<n)}var zt={},Ae=[],To=new B(""),sl=new B("",-1),al=new B(""),_o=class{get(e,n=an){if(n===an){let r=_f("",-201);throw r.name="\u0275NotFound",r}return n}};function ll(t){return{\u0275providers:t}}function Sf(...t){return{\u0275providers:ul(!0,t),\u0275fromNgModule:!0}}function ul(t,...e){let n=[],o=new Set,r,i=s=>{n.push(s)};return oi(e,s=>{let l=s;Yr(l,i,[],o)&&(r||=[],r.push(l))}),r!==void 0&&wf(r,i),n}function wf(t,e){for(let n=0;n<t.length;n++){let{ngModule:o,providers:r}=t[n];cl(r,i=>{e(i,o)})}}function Yr(t,e,n,o){if(t=ve(t),!t)return!1;let r=null,i=La(t),s=!i&&pn(t);if(!i&&!s){let c=t.ngModule;if(i=La(c),i)r=c;else return!1}else{if(s&&!s.standalone)return!1;r=t}let l=o.has(r);if(s){if(l)return!1;if(o.add(r),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let d of c)Yr(d,e,n,o)}}else if(i){if(i.imports!=null&&!l){o.add(r);let d;try{oi(i.imports,f=>{Yr(f,e,n,o)&&(d||=[],d.push(f))})}finally{}d!==void 0&&wf(d,e)}if(!l){let d=un(r)||(()=>new r);e({provide:r,useFactory:d,deps:Ae},r),e({provide:al,useValue:r,multi:!0},r),e({provide:To,useValue:()=>Z(r),multi:!0},r)}let c=i.providers;if(c!=null&&!l){let d=t;cl(c,f=>{e(f,d)})}}else return!1;return r!==t&&t.providers!==void 0}function cl(t,e){for(let n of t)Za(n)&&(n=n.\u0275providers),Array.isArray(n)?cl(n,e):e(n)}var rv=ne({provide:String,useValue:ne});function Af(t){return t!==null&&typeof t=="object"&&rv in t}function iv(t){return!!(t&&t.useExisting)}function sv(t){return!!(t&&t.useFactory)}function cn(t){return typeof t=="function"}function Mf(t){return!!t.useClass}var So=new B(""),jr={},pf={},ka;function wo(){return ka===void 0&&(ka=new _o),ka}var Oe=class{},dn=class extends Oe{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,o,r){super(),this.parent=n,this.source=o,this.scopes=r,Ba(e,s=>this.processProvider(s)),this.records.set(sl,On(void 0,this)),r.has("environment")&&this.records.set(Oe,On(void 0,this));let i=this.records.get(So);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(al,Ae,{self:!0}))}retrieve(e,n){let o=ln(n)||0;try{return this.get(e,an,o)}catch(r){if(Ln(r))return r;throw r}}destroy(){vo(this),this._destroyed=!0;let e=b(null);try{for(let o of this._ngOnDestroyHooks)o.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let o of n)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),b(e)}}onDestroy(e){return vo(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){vo(this);let n=ht(this),o=Fe(void 0),r;try{return e()}finally{ht(n),Fe(o)}}get(e,n=an,o){if(vo(this),e.hasOwnProperty(ff))return e[ff](this);let r=ln(o),i,s=ht(this),l=Fe(void 0);try{if(!(r&4)){let d=this.records.get(e);if(d===void 0){let f=dv(e)&&Xr(e);f&&this.injectableDefInScope(f)?d=On(Ha(e),jr):d=null,this.records.set(e,d)}if(d!=null)return this.hydrate(e,d,r)}let c=r&2?wo():this.parent;return n=r&8&&n===an?null:n,c.get(e,n)}catch(c){let d=Zy(c);throw d===-200||d===-201?new O(d,null):c}finally{Fe(l),ht(s)}}resolveInjectorInitializers(){let e=b(null),n=ht(this),o=Fe(void 0),r;try{let i=this.get(To,Ae,{self:!0});for(let s of i)s()}finally{ht(n),Fe(o),b(e)}}toString(){let e=[],n=this.records;for(let o of n.keys())e.push(Ht(o));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=ve(e);let n=cn(e)?e:ve(e&&e.provide),o=lv(e);if(!cn(e)&&e.multi===!0){let r=this.records.get(n);r||(r=On(void 0,jr,!0),r.factory=()=>Ua(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,o)}hydrate(e,n,o){let r=b(null);try{if(n.value===pf)throw ol(Ht(e));return n.value===jr&&(n.value=pf,n.value=n.factory(void 0,o)),typeof n.value=="object"&&n.value&&cv(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{b(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=ve(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Ha(t){let e=Xr(t),n=e!==null?e.factory:un(t);if(n!==null)return n;if(t instanceof B)throw new O(204,!1);if(t instanceof Function)return av(t);throw new O(204,!1)}function av(t){if(t.length>0)throw new O(204,!1);let n=Jy(t);return n!==null?()=>n.factory(t):()=>new t}function lv(t){if(Af(t))return On(void 0,t.useValue);{let e=dl(t);return On(e,jr)}}function dl(t,e,n){let o;if(cn(t)){let r=ve(t);return un(r)||Ha(r)}else if(Af(t))o=()=>ve(t.useValue);else if(sv(t))o=()=>t.useFactory(...Ua(t.deps||[]));else if(iv(t))o=(r,i)=>Z(ve(t.useExisting),i!==void 0&&i&8?8:void 0);else{let r=ve(t&&(t.useClass||t.provide));if(uv(t))o=()=>new r(...Ua(t.deps));else return un(r)||Ha(r)}return o}function vo(t){if(t.destroyed)throw new O(205,!1)}function On(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function uv(t){return!!t.deps}function cv(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function dv(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Ba(t,e){for(let n of t)Array.isArray(n)?Ba(n,e):n&&Za(n)?Ba(n.\u0275providers,e):e(n)}function si(t,e){let n;t instanceof dn?(vo(t),n=t):n=new Va(t);let o,r=ht(n),i=Fe(void 0);try{return e()}finally{ht(r),Fe(i)}}function bf(){return Cf()!==void 0||Wr()!=null}var Ze=0,A=1,P=2,he=3,Ue=4,He=5,Hn=6,Bn=7,fe=8,Nt=9,gt=10,ie=11,Gn=12,fl=13,hn=14,ke=15,Wt=16,gn=17,mt=18,Ao=19,pl=20,Mt=21,ai=22,Mo=23,Le=24,li=25,mn=26,Ee=27,Nf=1,hl=6,jt=7,bo=8,yn=9,ue=10;function yt(t){return Array.isArray(t)&&typeof t[Nf]=="object"}function Qe(t){return Array.isArray(t)&&t[Nf]===!0}function gl(t){return(t.flags&4)!==0}function Jt(t){return t.componentOffset>-1}function ui(t){return(t.flags&1)===1}function vt(t){return!!t.template}function $n(t){return(t[P]&512)!==0}function vn(t){return(t[P]&256)===256}var ml="svg",xf="math";function Be(t){for(;Array.isArray(t);)t=t[Ze];return t}function yl(t,e){return Be(e[t])}function Et(t,e){return Be(e[t.index])}function No(t,e){return t.data[e]}function Ge(t,e){let n=e[t];return yt(n)?n:n[Ze]}function Rf(t){return(t[P]&4)===4}function ci(t){return(t[P]&128)===128}function Pf(t){return Qe(t[he])}function _t(t,e){return e==null?null:t[e]}function vl(t){t[gn]=0}function El(t){t[P]&1024||(t[P]|=1024,ci(t)&&Ro(t))}function Ff(t,e){for(;t>0;)e=e[hn],t--;return e}function xo(t){return!!(t[P]&9216||t[Le]?.dirty)}function di(t){t[gt].changeDetectionScheduler?.notify(8),t[P]&64&&(t[P]|=1024),xo(t)&&Ro(t)}function Ro(t){t[gt].changeDetectionScheduler?.notify(0);let e=Bt(t);for(;e!==null&&!(e[P]&8192||(e[P]|=8192,!ci(e)));)e=Bt(e)}function _l(t,e){if(vn(t))throw new O(911,!1);t[Mt]===null&&(t[Mt]=[]),t[Mt].push(e)}function kf(t,e){if(t[Mt]===null)return;let n=t[Mt].indexOf(e);n!==-1&&t[Mt].splice(n,1)}function Bt(t){let e=t[he];return Qe(e)?e[he]:e}function Cl(t){return t[Bn]??=[]}function Dl(t){return t.cleanup??=[]}function Lf(t,e,n,o){let r=Cl(e);r.push(n),t.firstCreatePass&&Dl(t).push(o,r.length-1)}var F={lFrame:Kf(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Ga=!1;function Of(){return F.lFrame.elementDepthCount}function Vf(){F.lFrame.elementDepthCount++}function Il(){F.lFrame.elementDepthCount--}function Uf(){return F.bindingsEnabled}function Hf(){return F.skipHydrationRootTNode!==null}function Tl(t){return F.skipHydrationRootTNode===t}function Sl(){F.skipHydrationRootTNode=null}function V(){return F.lFrame.lView}function ge(){return F.lFrame.tView}function Q(t){return F.lFrame.contextLView=t,t[fe]}function X(t){return F.lFrame.contextLView=null,t}function Me(){let t=wl();for(;t!==null&&t.type===64;)t=t.parent;return t}function wl(){return F.lFrame.currentTNode}function Bf(){let t=F.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function qn(t,e){let n=F.lFrame;n.currentTNode=t,n.isParent=e}function Al(){return F.lFrame.isParent}function Gf(){F.lFrame.isParent=!1}function Ml(){return Ga}function bl(t){let e=Ga;return Ga=t,e}function $f(){let t=F.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function qf(t){return F.lFrame.bindingIndex=t}function En(){return F.lFrame.bindingIndex++}function Nl(t){let e=F.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function zf(){return F.lFrame.inI18n}function Wf(t,e){let n=F.lFrame;n.bindingIndex=n.bindingRootIndex=t,fi(e)}function jf(){return F.lFrame.currentDirectiveIndex}function fi(t){F.lFrame.currentDirectiveIndex=t}function Jf(t){let e=F.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function xl(){return F.lFrame.currentQueryIndex}function pi(t){F.lFrame.currentQueryIndex=t}function fv(t){let e=t[A];return e.type===2?e.declTNode:e.type===1?t[He]:null}function Rl(t,e,n){if(n&4){let r=e,i=t;for(;r=r.parent,r===null&&!(n&1);)if(r=fv(i),r===null||(i=i[hn],r.type&10))break;if(r===null)return!1;e=r,t=i}let o=F.lFrame=Yf();return o.currentTNode=e,o.lView=t,!0}function hi(t){let e=Yf(),n=t[A];F.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Yf(){let t=F.lFrame,e=t===null?null:t.child;return e===null?Kf(t):e}function Kf(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Zf(){let t=F.lFrame;return F.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Pl=Zf;function gi(){let t=Zf();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Qf(t){return(F.lFrame.contextLView=Ff(t,F.lFrame.contextLView))[fe]}function xt(){return F.lFrame.selectedIndex}function Yt(t){F.lFrame.selectedIndex=t}function mi(){let t=F.lFrame;return No(t.tView,t.selectedIndex)}function Rt(){F.lFrame.currentNamespace=ml}function zn(){pv()}function pv(){F.lFrame.currentNamespace=null}function Xf(){return F.lFrame.currentNamespace}var ep=!0;function yi(){return ep}function vi(t){ep=t}function $a(t,e=null,n=null,o){let r=tp(t,e,n,o);return r.resolveInjectorInitializers(),r}function tp(t,e=null,n=null,o,r=new Set){let i=[n||Ae,Sf(t)];return o=o||(typeof t=="object"?void 0:Ht(t)),new dn(i,e||wo(),o||null,r)}var Gt=class t{static THROW_IF_NOT_FOUND=an;static NULL=new _o;static create(e,n){if(Array.isArray(e))return $a({name:""},n,e,"");{let o=e.name??"";return $a({name:o},e.parent,e.providers,o)}}static \u0275prov=re({token:t,providedIn:"any",factory:()=>Z(sl)});static __NG_ELEMENT_ID__=-1},Xe=new B(""),Po=(()=>{class t{static __NG_ELEMENT_ID__=hv;static __NG_ENV_ID__=n=>n}return t})(),qa=class extends Po{_lView;constructor(e){super(),this._lView=e}get destroyed(){return vn(this._lView)}onDestroy(e){let n=this._lView;return _l(n,e),()=>kf(n,e)}};function hv(){return new qa(V())}var np=!1,Wn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new yo(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new de(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=re({token:t,providedIn:"root",factory:()=>new t})}return t})(),za=class extends Ke{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,bf()&&(this.destroyRef=H(Po,{optional:!0})??void 0,this.pendingTasks=H(Wn,{optional:!0})??void 0)}emit(e){let n=b(null);try{super.next(e)}finally{b(n)}}subscribe(e,n,o){let r=e,i=n||(()=>null),s=o;if(e&&typeof e=="object"){let c=e;r=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=this.wrapInTimeout(i),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let l=super.subscribe({next:r,error:i,complete:s});return e instanceof we&&e.add(l),l}wrapInTimeout(e){return n=>{let o=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{o!==void 0&&this.pendingTasks?.remove(o)}})}}},Ne=za;function Kr(...t){}function Fl(t){let e,n;function o(){t=Kr;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),o()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),o()})),()=>o()}function kl(t){return queueMicrotask(()=>t()),()=>{t=Kr}}var Ll="isAngularZone",Co=Ll+"_ID",gv=0,Ve=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Ne(!1);onMicrotaskEmpty=new Ne(!1);onStable=new Ne(!1);onError=new Ne(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:r=!1,scheduleInRootZone:i=np}=e;if(typeof Zone>"u")throw new O(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!r&&o,s.shouldCoalesceRunChangeDetection=r,s.callbackScheduled=!1,s.scheduleInRootZone=i,vv(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Ll)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new O(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new O(909,!1)}run(e,n,o){return this._inner.run(e,n,o)}runTask(e,n,o,r){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,e,mv,Kr,Kr);try{return i.runTask(s,n,o)}finally{i.cancelTask(s)}}runGuarded(e,n,o){return this._inner.runGuarded(e,n,o)}runOutsideAngular(e){return this._outer.run(e)}},mv={};function Ol(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function yv(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Fl(()=>{t.callbackScheduled=!1,Wa(t),t.isCheckStableRunning=!0,Ol(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Wa(t)}function vv(t){let e=()=>{yv(t)},n=gv++;t._inner=t._inner.fork({name:"angular",properties:{[Ll]:!0,[Co]:n,[Co+n]:!0},onInvokeTask:(o,r,i,s,l,c)=>{if(Ev(c))return o.invokeTask(i,s,l,c);try{return hf(t),o.invokeTask(i,s,l,c)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),gf(t)}},onInvoke:(o,r,i,s,l,c,d)=>{try{return hf(t),o.invoke(i,s,l,c,d)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!_v(c)&&e(),gf(t)}},onHasTask:(o,r,i,s)=>{o.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Wa(t),Ol(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(o,r,i,s)=>(o.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Wa(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function hf(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function gf(t){t._nesting--,Ol(t)}var Do=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Ne;onMicrotaskEmpty=new Ne;onStable=new Ne;onError=new Ne;run(e,n,o){return e.apply(n,o)}runGuarded(e,n,o){return e.apply(n,o)}runOutsideAngular(e){return e()}runTask(e,n,o,r){return e.apply(n,o)}};function Ev(t){return op(t,"__ignore_ng_zone__")}function _v(t){return op(t,"__scheduler_tick__")}function op(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var bt=class{_console=console;handleError(e){this._console.error("ERROR",e)}},jn=new B("",{factory:()=>{let t=H(Ve),e=H(Oe),n;return o=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw o}):(n??=e.get(bt),n.handleError(o))})}}}),rp={provide:To,useValue:()=>{let t=H(bt,{optional:!0})},multi:!0};function $(t,e){let[n,o,r]=Da(t,e?.equal),i=n,s=i[Pe];return i.set=o,i.update=r,i.asReadonly=ip.bind(i),i}function ip(){let t=this[Pe];if(t.readonlyFn===void 0){let e=()=>this();e[Pe]=t,t.readonlyFn=e}return t.readonlyFn}var Vn=class{},Fo=new B("",{factory:()=>!0});var Vl=new B("");var Ul=(()=>{class t{static \u0275prov=re({token:t,providedIn:"root",factory:()=>new ja})}return t})(),ja=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,o=this.queues.get(n);o.has(e)&&(o.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let o=this.queues.get(n);o.has(e)||o.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,o]of this.queues)n===null?e||=this.flushQueue(o):e||=n.run(()=>this.flushQueue(o));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let o of e)o.dirty&&(this.dirtyEffectCount--,n=!0,o.run());return n}},Ja=class{[Pe];constructor(e){this[Pe]=e}destroy(){this[Pe].destroy()}};function Ct(t){return Ta(t)}function qo(t){return{toString:t}.toString()}function xv(t){return typeof t=="function"}function Fp(t,e,n,o){e!==null?e.applyValueToInputSignal(e,o):t[n]=o}var Si=class{previousValue;currentValue;firstChange;constructor(e,n,o){this.previousValue=e,this.currentValue=n,this.firstChange=o}isFirstChange(){return this.firstChange}},Ui=(()=>{let t=()=>kp;return t.ngInherit=!0,t})();function kp(t){return t.type.prototype.ngOnChanges&&(t.setInput=Pv),Rv}function Rv(){let t=Op(this),e=t?.current;if(e){let n=t.previous;if(n===zt)t.previous=e;else for(let o in e)n[o]=e[o];t.current=null,this.ngOnChanges(e)}}function Pv(t,e,n,o,r){let i=this.declaredInputs[o],s=Op(t)||Fv(t,{previous:zt,current:null}),l=s.current||(s.current={}),c=s.previous,d=c[i];l[i]=new Si(d&&d.currentValue,n,c===zt),Fp(t,e,r,n)}var Lp="__ngSimpleChanges__";function Op(t){return t[Lp]||null}function Fv(t,e){return t[Lp]=e}var sp=[];var oe=function(t,e=null,n){for(let o=0;o<sp.length;o++){let r=sp[o];r(t,e,n)}},j=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(j||{});function kv(t,e,n){let{ngOnChanges:o,ngOnInit:r,ngDoCheck:i}=e.type.prototype;if(o){let s=kp(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}r&&(n.preOrderHooks??=[]).push(0-t,r),i&&((n.preOrderHooks??=[]).push(t,i),(n.preOrderCheckHooks??=[]).push(t,i))}function Lv(t,e){for(let n=e.directiveStart,o=e.directiveEnd;n<o;n++){let i=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:l,ngAfterViewInit:c,ngAfterViewChecked:d,ngOnDestroy:f}=i;s&&(t.contentHooks??=[]).push(-n,s),l&&((t.contentHooks??=[]).push(n,l),(t.contentCheckHooks??=[]).push(n,l)),c&&(t.viewHooks??=[]).push(-n,c),d&&((t.viewHooks??=[]).push(n,d),(t.viewCheckHooks??=[]).push(n,d)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function _i(t,e,n){Vp(t,e,3,n)}function Ci(t,e,n,o){(t[P]&3)===n&&Vp(t,e,n,o)}function Hl(t,e){let n=t[P];(n&3)===e&&(n&=16383,n+=1,t[P]=n)}function Vp(t,e,n,o){let r=o!==void 0?t[gn]&65535:0,i=o??-1,s=e.length-1,l=0;for(let c=r;c<s;c++)if(typeof e[c+1]=="number"){if(l=e[c],o!=null&&l>=o)break}else e[c]<0&&(t[gn]+=65536),(l<i||i==-1)&&(Ov(t,n,e,c),t[gn]=(t[gn]&4294901760)+c+2),c++}function ap(t,e){oe(j.LifecycleHookStart,t,e);let n=b(null);try{e.call(t)}finally{b(n),oe(j.LifecycleHookEnd,t,e)}}function Ov(t,e,n,o){let r=n[o]<0,i=n[o+1],s=r?-n[o]:n[o],l=t[s];r?t[P]>>14<t[gn]>>16&&(t[P]&3)===e&&(t[P]+=16384,ap(l,i)):ap(l,i)}var Yn=-1,Cn=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,o,r){this.factory=e,this.name=r,this.canSeeViewProviders=n,this.injectImpl=o}};function Vv(t){return(t.flags&8)!==0}function Uv(t){return(t.flags&16)!==0}function Hv(t,e,n){let o=0;for(;o<n.length;){let r=n[o];if(typeof r=="number"){if(r!==0)break;o++;let i=n[o++],s=n[o++],l=n[o++];t.setAttribute(e,s,l,i)}else{let i=r,s=n[++o];Gv(i)?t.setProperty(e,i,s):t.setAttribute(e,i,s),o++}}return o}function Bv(t){return t===3||t===4||t===6}function Gv(t){return t.charCodeAt(0)===64}function Kn(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let o=0;o<e.length;o++){let r=e[o];typeof r=="number"?n=r:n===0||(n===-1||n===2?lp(t,n,r,null,e[++o]):lp(t,n,r,null,null))}}return t}function lp(t,e,n,o,r){let i=0,s=t.length;if(e===-1)s=-1;else for(;i<t.length;){let l=t[i++];if(typeof l=="number"){if(l===e){s=-1;break}else if(l>e){s=i-1;break}}}for(;i<t.length;){let l=t[i];if(typeof l=="number")break;if(l===n){r!==null&&(t[i+1]=r);return}i++,r!==null&&i++}s!==-1&&(t.splice(s,0,e),i=s+1),t.splice(i++,0,n),r!==null&&t.splice(i++,0,r)}function Up(t){return t!==Yn}function wi(t){return t&32767}function $v(t){return t>>16}function Ai(t,e){let n=$v(t),o=e;for(;n>0;)o=o[hn],n--;return o}var Kl=!0;function up(t){let e=Kl;return Kl=t,e}var qv=256,Hp=qv-1,Bp=5,zv=0,Dt={};function Wv(t,e,n){let o;typeof n=="string"?o=n.charCodeAt(0)||0:n.hasOwnProperty(fn)&&(o=n[fn]),o==null&&(o=n[fn]=zv++);let r=o&Hp,i=1<<r;e.data[t+(r>>Bp)]|=i}function Mi(t,e){let n=Gp(t,e);if(n!==-1)return n;let o=e[A];o.firstCreatePass&&(t.injectorIndex=e.length,Bl(o.data,t),Bl(e,null),Bl(o.blueprint,null));let r=Su(t,e),i=t.injectorIndex;if(Up(r)){let s=wi(r),l=Ai(r,e),c=l[A].data;for(let d=0;d<8;d++)e[i+d]=l[s+d]|c[s+d]}return e[i+8]=r,i}function Bl(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Gp(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Su(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,o=null,r=e;for(;r!==null;){if(o=jp(r),o===null)return Yn;if(n++,r=r[hn],o.injectorIndex!==-1)return o.injectorIndex|n<<16}return Yn}function Zl(t,e,n){Wv(t,e,n)}function $p(t,e,n){if(n&8||t!==void 0)return t;ni(e,"NodeInjector")}function qp(t,e,n,o){if(n&8&&o===void 0&&(o=null),(n&3)===0){let r=t[Nt],i=Fe(void 0);try{return r?r.get(e,o,n&8):rl(e,o,n&8)}finally{Fe(i)}}return $p(o,e,n)}function zp(t,e,n,o=0,r){if(t!==null){if(e[P]&2048&&!(o&2)){let s=Kv(t,e,n,o,Dt);if(s!==Dt)return s}let i=Wp(t,e,n,o,Dt);if(i!==Dt)return i}return qp(e,n,o,r)}function Wp(t,e,n,o,r){let i=Jv(n);if(typeof i=="function"){if(!Rl(e,t,o))return o&1?$p(r,n,o):qp(e,n,o,r);try{let s;if(s=i(o),s==null&&!(o&8))ni(n);else return s}finally{Pl()}}else if(typeof i=="number"){let s=null,l=Gp(t,e),c=Yn,d=o&1?e[ke][He]:null;for((l===-1||o&4)&&(c=l===-1?Su(t,e):e[l+8],c===Yn||!dp(o,!1)?l=-1:(s=e[A],l=wi(c),e=Ai(c,e)));l!==-1;){let f=e[A];if(cp(i,l,f.data)){let p=jv(l,e,n,s,o,d);if(p!==Dt)return p}c=e[l+8],c!==Yn&&dp(o,e[A].data[l+8]===d)&&cp(i,l,e)?(s=f,l=wi(c),e=Ai(c,e)):l=-1}}return r}function jv(t,e,n,o,r,i){let s=e[A],l=s.data[t+8],c=o==null?Jt(l)&&Kl:o!=s&&(l.type&3)!==0,d=r&1&&i===l,f=Di(l,s,n,c,d);return f!==null?Oo(e,s,f,l,r):Dt}function Di(t,e,n,o,r){let i=t.providerIndexes,s=e.data,l=i&1048575,c=t.directiveStart,d=t.directiveEnd,f=i>>20,p=o?l:l+f,h=r?l+f:d;for(let g=p;g<h;g++){let m=s[g];if(g<c&&n===m||g>=c&&m.type===n)return g}if(r){let g=s[c];if(g&&vt(g)&&g.type===n)return c}return null}function Oo(t,e,n,o,r){let i=t[n],s=e.data;if(i instanceof Cn){let l=i;if(l.resolving){let g=vf(s[n]);throw ol(g)}let c=up(l.canSeeViewProviders);l.resolving=!0;let d=s[n].type||s[n],f,p=l.injectImpl?Fe(l.injectImpl):null,h=Rl(t,o,0);try{i=t[n]=l.factory(void 0,r,s,t,o),e.firstCreatePass&&n>=o.directiveStart&&kv(n,s[n],e)}finally{p!==null&&Fe(p),up(c),l.resolving=!1,Pl()}}return i}function Jv(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(fn)?t[fn]:void 0;return typeof e=="number"?e>=0?e&Hp:Yv:e}function cp(t,e,n){let o=1<<t;return!!(n[e+(t>>Bp)]&o)}function dp(t,e){return!(t&2)&&!(t&1&&e)}var _n=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,o){return zp(this._tNode,this._lView,e,ln(o),n)}};function Yv(){return new _n(Me(),V())}function wu(t){return qo(()=>{let e=t.prototype.constructor,n=e[Eo]||Ql(e),o=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==o;){let i=r[Eo]||Ql(r);if(i&&i!==n)return i;r=Object.getPrototypeOf(r)}return i=>new i})}function Ql(t){return Ka(t)?()=>{let e=Ql(ve(t));return e&&e()}:un(t)}function Kv(t,e,n,o,r){let i=t,s=e;for(;i!==null&&s!==null&&s[P]&2048&&!$n(s);){let l=Wp(i,s,n,o|2,Dt);if(l!==Dt)return l;let c=i.parent;if(!c){let d=s[pl];if(d){let f=d.get(n,Dt,o);if(f!==Dt)return f}c=jp(s),s=s[hn]}i=c}return r}function jp(t){let e=t[A],n=e.type;return n===2?e.declTNode:n===1?t[He]:null}function Zv(){return eo(Me(),V())}function eo(t,e){return new Ft(Et(t,e))}var Ft=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=Zv}return t})();function Qv(t){return t instanceof Ft?t.nativeElement:t}function Xv(){return this._results[Symbol.iterator]()}var bi=class{_emitDistinctChangesOnly;dirty=!0;_onDirty=void 0;_results=[];_changesDetected=!1;_changes=void 0;length=0;first=void 0;last=void 0;get changes(){return this._changes??=new Ke}constructor(e=!1){this._emitDistinctChangesOnly=e}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let o=If(e);(this._changesDetected=!Df(this._results,o,n))&&(this._results=o,this.length=o.length,this.last=o[this.length-1],this.first=o[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.next(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}[Symbol.iterator]=Xv};function Jp(t){return(t.flags&128)===128}var Au=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(Au||{}),Yp=new Map,eE=0;function tE(){return eE++}function nE(t){Yp.set(t[Ao],t)}function Xl(t){Yp.delete(t[Ao])}var fp="__ngContext__";function Zn(t,e){yt(e)?(t[fp]=e[Ao],nE(e)):t[fp]=e}function Kp(t){return Qp(t[Gn])}function Zp(t){return Qp(t[Ue])}function Qp(t){for(;t!==null&&!Qe(t);)t=t[Ue];return t}var oE;function Mu(t){oE=t}var Hi=new B("",{factory:()=>rE}),rE="ng";var Bi=new B(""),zo=new B("",{providedIn:"platform",factory:()=>"unknown"});var Gi=new B("",{factory:()=>H(Xe).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Xp="r";var eh="di";var th=!1,nh=new B("",{factory:()=>th});var iE=(t,e,n,o)=>{};function sE(t,e,n,o){iE(t,e,n,o)}function bu(t){return(t.flags&32)===32}var aE=()=>null;function oh(t,e,n=!1){return aE(t,e,n)}function rh(t,e){let n=t.contentQueries;if(n!==null){let o=b(null);try{for(let r=0;r<n.length;r+=2){let i=n[r],s=n[r+1];if(s!==-1){let l=t.data[s];pi(i),l.contentQueries(2,e[s],s)}}}finally{b(o)}}}function eu(t,e,n){pi(0);let o=b(null);try{e(t,n)}finally{b(o)}}function ih(t,e,n){if(gl(e)){let o=b(null);try{let r=e.directiveStart,i=e.directiveEnd;for(let s=r;s<i;s++){let l=t.data[s];if(l.contentQueries){let c=n[s];l.contentQueries(1,c,s)}}}finally{b(o)}}}var nt=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(nt||{});var Ni=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Zr})`}};function $i(t){return t instanceof Ni?t.changingThisBreaksApplicationSecurity:t}function sh(t,e){let n=ah(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Zr})`)}return n===e}function ah(t){return t instanceof Ni&&t.getTypeName()||null}var lE=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function lh(t){return t=String(t),t.match(lE)?t:"unsafe:"+t}function uE(t,e){return t.createText(e)}function cE(t,e,n){t.setValue(e,n)}function uh(t,e,n){return t.createElement(e,n)}function xi(t,e,n,o,r){t.insertBefore(e,n,o,r)}function ch(t,e,n){t.appendChild(e,n)}function pp(t,e,n,o,r){o!==null?xi(t,e,n,o,r):ch(t,e,n)}function dh(t,e,n,o){t.removeChild(null,e,n,o)}function dE(t,e,n){t.setAttribute(e,"style",n)}function fE(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function fh(t,e,n){let{mergedAttrs:o,classes:r,styles:i}=n;o!==null&&Hv(t,e,o),r!==null&&fE(t,e,r),i!==null&&dE(t,e,i)}var Nu=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(Nu||{});function Wo(t){let e=pE();return e?e.sanitize(Nu.URL,t)||"":sh(t,"URL")?$i(t):lh(ti(t))}function pE(){let t=V();return t&&t[gt].sanitizer}function hE(t,e,n){let o=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let i=e.length;if(r+i===o||t.charCodeAt(r+i)<=32)return r}n=r+1}}var ph="ng-template";function gE(t,e,n,o){let r=0;if(o){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&hE(e[r+1].toLowerCase(),n,0)!==-1)return!0}else if(xu(t))return!1;if(r=e.indexOf(1,r),r>-1){let i;for(;++r<e.length&&typeof(i=e[r])=="string";)if(i.toLowerCase()===n)return!0}return!1}function xu(t){return t.type===4&&t.value!==ph}function mE(t,e,n){let o=t.type===4&&!n?ph:t.value;return e===o}function yE(t,e,n){let o=4,r=t.attrs,i=r!==null?_E(r):0,s=!1;for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="number"){if(!s&&!et(o)&&!et(c))return!1;if(s&&et(c))continue;s=!1,o=c|o&1;continue}if(!s)if(o&4){if(o=2|o&1,c!==""&&!mE(t,c,n)||c===""&&e.length===1){if(et(o))return!1;s=!0}}else if(o&8){if(r===null||!gE(t,r,c,n)){if(et(o))return!1;s=!0}}else{let d=e[++l],f=vE(c,r,xu(t),n);if(f===-1){if(et(o))return!1;s=!0;continue}if(d!==""){let p;if(f>i?p="":p=r[f+1].toLowerCase(),o&2&&d!==p){if(et(o))return!1;s=!0}}}}return et(o)||s}function et(t){return(t&1)===0}function vE(t,e,n,o){if(e===null)return-1;let r=0;if(o||!n){let i=!1;for(;r<e.length;){let s=e[r];if(s===t)return r;if(s===3||s===6)i=!0;else if(s===1||s===2){let l=e[++r];for(;typeof l=="string";)l=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=i?1:2}return-1}else return CE(e,t)}function EE(t,e,n=!1){for(let o=0;o<e.length;o++)if(yE(t,e[o],n))return!0;return!1}function _E(t){for(let e=0;e<t.length;e++){let n=t[e];if(Bv(n))return e}return t.length}function CE(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let o=t[n];if(typeof o=="number")return-1;if(o===e)return n;n++}return-1}function hp(t,e){return t?":not("+e.trim()+")":e}function DE(t){let e=t[0],n=1,o=2,r="",i=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(o&2){let l=t[++n];r+="["+s+(l.length>0?'="'+l+'"':"")+"]"}else o&8?r+="."+s:o&4&&(r+=" "+s);else r!==""&&!et(s)&&(e+=hp(i,r),r=""),o=s,i=i||!et(o);n++}return r!==""&&(e+=hp(i,r)),e}function IE(t){return t.map(DE).join(",")}function TE(t){let e=[],n=[],o=1,r=2;for(;o<t.length;){let i=t[o];if(typeof i=="string")r===2?i!==""&&e.push(i,t[++o]):r===8&&n.push(i);else{if(!et(r))break;r=i}o++}return n.length&&e.push(1,...n),e}var $e={};function Ru(t,e,n,o,r,i,s,l,c,d,f){let p=Ee+o,h=p+r,g=SE(p,h),m=typeof d=="function"?d():d;return g[A]={type:t,blueprint:g,template:n,queries:null,viewQuery:l,declTNode:e,data:g.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:m,incompleteFirstPass:!1,ssrId:f}}function SE(t,e){let n=[];for(let o=0;o<e;o++)n.push(o<t?null:$e);return n}function wE(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Ru(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Pu(t,e,n,o,r,i,s,l,c,d,f){let p=e.blueprint.slice();return p[Ze]=r,p[P]=o|4|128|8|64|1024,(d!==null||t&&t[P]&2048)&&(p[P]|=2048),vl(p),p[he]=p[hn]=t,p[fe]=n,p[gt]=s||t&&t[gt],p[ie]=l||t&&t[ie],p[Nt]=c||t&&t[Nt]||null,p[He]=i,p[Ao]=tE(),p[Hn]=f,p[pl]=d,p[ke]=e.type==2?t[ke]:p,p}function AE(t,e,n){let o=Et(e,t),r=wE(n),i=t[gt].rendererFactory,s=Fu(t,Pu(t,r,null,hh(n),o,e,null,i.createRenderer(o,n),null,null,null));return t[e.index]=s}function hh(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function gh(t,e,n,o){if(n===0)return-1;let r=e.length;for(let i=0;i<n;i++)e.push(o),t.blueprint.push(o),t.data.push(null);return r}function Fu(t,e){return t[Gn]?t[fl][Ue]=e:t[Gn]=e,t[fl]=e,e}function S(t=1){mh(ge(),V(),xt()+t,!1)}function mh(t,e,n,o){if(!o)if((e[P]&3)===3){let i=t.preOrderCheckHooks;i!==null&&_i(e,i,n)}else{let i=t.preOrderHooks;i!==null&&Ci(e,i,0,n)}Yt(n)}var qi=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(qi||{});function tu(t,e,n,o){let r=b(null);try{let[i,s,l]=t.inputs[n],c=null;(s&qi.SignalBased)!==0&&(c=e[i][Pe]),c!==null&&c.transformFn!==void 0?o=c.transformFn(o):l!==null&&(o=l.call(e,o)),t.setInput!==null?t.setInput(e,c,o,n,i):Fp(e,c,i,o)}finally{b(r)}}var Pt=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(Pt||{}),ME;function ku(t,e){return ME(t,e)}var Dn=new Set,Lu=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Lu||{}),jo=new B(""),gp=new Set;function Sn(t){gp.has(t)||(gp.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var yh=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=re({token:t,providedIn:"root",factory:()=>new t})}return t})();var vh=new B("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:H(Oe)})});function Eh(t,e,n){let o=t.get(vh);if(Array.isArray(e))for(let r of e)o.queue.add(r),n?.detachedLeaveAnimationFns?.push(r);else o.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);o.scheduler&&o.scheduler(t)}function bE(t,e){let n=t.get(vh);if(e.detachedLeaveAnimationFns){for(let o of e.detachedLeaveAnimationFns)n.queue.delete(o);e.detachedLeaveAnimationFns=void 0}}function NE(t,e){for(let[n,o]of e)Eh(t,o.animateFns)}function mp(t,e,n,o){let r=t?.[mn]?.enter;e!==null&&r&&r.has(n.index)&&NE(o,r)}function Jn(t,e,n,o,r,i,s,l){if(r!=null){let c,d=!1;Qe(r)?c=r:yt(r)&&(d=!0,r=r[Ze]);let f=Be(r);t===0&&o!==null?(mp(l,o,i,n),s==null?ch(e,o,f):xi(e,o,f,s||null,!0)):t===1&&o!==null?(mp(l,o,i,n),xi(e,o,f,s||null,!0)):t===2?yp(l,i,n,p=>{dh(e,f,d,p)}):t===3&&yp(l,i,n,()=>{e.destroyNode(f)}),c!=null&&$E(e,t,n,c,i,o,s)}}function xE(t,e){_h(t,e),e[Ze]=null,e[He]=null}function RE(t,e,n,o,r,i){o[Ze]=r,o[He]=e,Wi(t,o,n,1,r,i)}function _h(t,e){e[gt].changeDetectionScheduler?.notify(9),Wi(t,e,e[ie],2,null,null)}function PE(t){let e=t[Gn];if(!e)return Gl(t[A],t);for(;e;){let n=null;if(yt(e))n=e[Gn];else{let o=e[ue];o&&(n=o)}if(!n){for(;e&&!e[Ue]&&e!==t;)yt(e)&&Gl(e[A],e),e=e[he];e===null&&(e=t),yt(e)&&Gl(e[A],e),n=e&&e[Ue]}e=n}}function Ou(t,e){let n=t[yn],o=n.indexOf(e);n.splice(o,1)}function zi(t,e){if(vn(e))return;let n=e[ie];n.destroyNode&&Wi(t,e,n,3,null,null),PE(e)}function Gl(t,e){if(vn(e))return;let n=b(null);try{e[P]&=-129,e[P]|=256,e[Le]&&wr(e[Le]),LE(t,e),kE(t,e),e[A].type===1&&e[ie].destroy();let o=e[Wt];if(o!==null&&Qe(e[he])){o!==e[he]&&Ou(o,e);let r=e[mt];r!==null&&r.detachView(t)}Xl(e)}finally{b(n)}}function yp(t,e,n,o){let r=t?.[mn];if(r==null||r.leave==null||!r.leave.has(e.index))return o(!1);t&&Dn.add(t),Eh(n,()=>{if(r.leave&&r.leave.has(e.index)){let s=r.leave.get(e.index),l=[];if(s){for(let c=0;c<s.animateFns.length;c++){let d=s.animateFns[c],{promise:f}=d();l.push(f)}r.detachedLeaveAnimationFns=void 0}r.running=Promise.allSettled(l),FE(t,o)}else t&&Dn.delete(t),o(!1)},r)}function FE(t,e){let n=t[mn]?.running;if(n){n.then(()=>{t[mn].running=void 0,Dn.delete(t),e(!0)});return}e(!1)}function kE(t,e){let n=t.cleanup,o=e[Bn];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let l=n[s+3];l>=0?o[l]():o[-l].unsubscribe(),s+=2}else{let l=o[n[s+1]];n[s].call(l)}o!==null&&(e[Bn]=null);let r=e[Mt];if(r!==null){e[Mt]=null;for(let s=0;s<r.length;s++){let l=r[s];l()}}let i=e[Mo];if(i!==null){e[Mo]=null;for(let s of i)s.destroy()}}function LE(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let o=0;o<n.length;o+=2){let r=e[n[o]];if(!(r instanceof Cn)){let i=n[o+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let l=r[i[s]],c=i[s+1];oe(j.LifecycleHookStart,l,c);try{c.call(l)}finally{oe(j.LifecycleHookEnd,l,c)}}else{oe(j.LifecycleHookStart,r,i);try{i.call(r)}finally{oe(j.LifecycleHookEnd,r,i)}}}}}function OE(t,e,n){return VE(t,e.parent,n)}function VE(t,e,n){let o=e;for(;o!==null&&o.type&168;)e=o,o=e.parent;if(o===null)return n[Ze];if(Jt(o)){let{encapsulation:r}=t.data[o.directiveStart+o.componentOffset];if(r===nt.None||r===nt.Emulated)return null}return Et(o,n)}function UE(t,e,n){return BE(t,e,n)}function HE(t,e,n){return t.type&40?Et(t,n):null}var BE=HE,vp;function Vu(t,e,n,o){let r=OE(t,o,e),i=e[ie],s=o.parent||e[He],l=UE(s,o,e);if(r!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)pp(i,r,n[c],l,!1);else pp(i,r,n,l,!1);vp!==void 0&&vp(i,o,e,n,r)}function ko(t,e){if(e!==null){let n=e.type;if(n&3)return Et(e,t);if(n&4)return nu(-1,t[e.index]);if(n&8){let o=e.child;if(o!==null)return ko(t,o);{let r=t[e.index];return Qe(r)?nu(-1,r):Be(r)}}else{if(n&128)return ko(t,e.next);if(n&32)return ku(e,t)()||Be(t[e.index]);{let o=Ch(t,e);if(o!==null){if(Array.isArray(o))return o[0];let r=Bt(t[ke]);return ko(r,o)}else return ko(t,e.next)}}}return null}function Ch(t,e){if(e!==null){let o=t[ke][He],r=e.projection;return o.projection[r]}return null}function nu(t,e){let n=ue+t+1;if(n<e.length){let o=e[n],r=o[A].firstChild;if(r!==null)return ko(o,r)}return e[jt]}function Uu(t,e,n,o,r,i,s){for(;n!=null;){let l=o[Nt];if(n.type===128){n=n.next;continue}let c=o[n.index],d=n.type;if(s&&e===0&&(c&&Zn(Be(c),o),n.flags|=2),!bu(n))if(d&8)Uu(t,e,n.child,o,r,i,!1),Jn(e,t,l,r,c,n,i,o);else if(d&32){let f=ku(n,o),p;for(;p=f();)Jn(e,t,l,r,p,n,i,o);Jn(e,t,l,r,c,n,i,o)}else d&16?GE(t,e,o,n,r,i):Jn(e,t,l,r,c,n,i,o);n=s?n.projectionNext:n.next}}function Wi(t,e,n,o,r,i){Uu(n,o,t.firstChild,e,r,i,!1)}function GE(t,e,n,o,r,i){let s=n[ke],c=s[He].projection[o.projection];if(Array.isArray(c))for(let d=0;d<c.length;d++){let f=c[d];Jn(e,t,n[Nt],r,f,o,i,n)}else{let d=c,f=s[he];Jp(o)&&(d.flags|=128),Uu(t,e,d,f,r,i,!0)}}function $E(t,e,n,o,r,i,s){let l=o[jt],c=Be(o);l!==c&&Jn(e,t,n,i,l,r,s);for(let d=ue;d<o.length;d++){let f=o[d];Wi(f[A],f,t,e,i,l)}}function qE(t,e,n,o,r){if(e)r?t.addClass(n,o):t.removeClass(n,o);else{let i=o.indexOf("-")===-1?void 0:Pt.DashCase;r==null?t.removeStyle(n,o,i):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),i|=Pt.Important),t.setStyle(n,o,r,i))}}function Dh(t,e,n,o,r){let i=xt(),s=o&2;try{Yt(-1),s&&e.length>Ee&&mh(t,e,Ee,!1);let l=s?j.TemplateUpdateStart:j.TemplateCreateStart;oe(l,r,n),n(o,r)}finally{Yt(i);let l=s?j.TemplateUpdateEnd:j.TemplateCreateEnd;oe(l,r,n)}}function Ih(t,e,n){KE(t,e,n),(n.flags&64)===64&&ZE(t,e,n)}function Hu(t,e,n=Et){let o=e.localNames;if(o!==null){let r=e.index+1;for(let i=0;i<o.length;i+=2){let s=o[i+1],l=s===-1?n(e,t):t[s];t[r++]=l}}}function zE(t,e,n,o){let i=o.get(nh,th)||n===nt.ShadowDom||n===nt.ExperimentalIsolatedShadowDom,s=t.selectRootElement(e,i);return WE(s),s}function WE(t){jE(t)}var jE=()=>null;function JE(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function Th(t,e,n,o,r,i){let s=e[A];if(Bu(t,s,e,n,o)){Jt(t)&&YE(e,t.index);return}t.type&3&&(n=JE(n)),Sh(t,e,n,o,r,i)}function Sh(t,e,n,o,r,i){if(t.type&3){let s=Et(t,e);o=i!=null?i(o,t.value||"",n):o,r.setProperty(s,n,o)}else t.type&12}function YE(t,e){let n=Ge(e,t);n[P]&16||(n[P]|=64)}function KE(t,e,n){let o=n.directiveStart,r=n.directiveEnd;Jt(n)&&AE(e,n,t.data[o+n.componentOffset]),t.firstCreatePass||Mi(n,e);let i=n.initialInputs;for(let s=o;s<r;s++){let l=t.data[s],c=Oo(e,t,s,n);if(Zn(c,e),i!==null&&e_(e,s-o,c,l,n,i),vt(l)){let d=Ge(n.index,e);d[fe]=Oo(e,t,s,n)}}}function ZE(t,e,n){let o=n.directiveStart,r=n.directiveEnd,i=n.index,s=jf();try{Yt(i);for(let l=o;l<r;l++){let c=t.data[l],d=e[l];fi(l),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&QE(c,d)}}finally{Yt(-1),fi(s)}}function QE(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function XE(t,e){let n=t.directiveRegistry,o=null;if(n)for(let r=0;r<n.length;r++){let i=n[r];EE(e,i.selectors,!1)&&(o??=[],vt(i)?o.unshift(i):o.push(i))}return o}function e_(t,e,n,o,r,i){let s=i[e];if(s!==null)for(let l=0;l<s.length;l+=2){let c=s[l],d=s[l+1];tu(o,n,c,d)}}function wh(t,e,n,o,r){let i=Ee+n,s=e[A],l=r(s,e,t,o,n);e[i]=l,qn(t,!0);let c=t.type===2;return c?(fh(e[ie],l,t),(Of()===0||ui(t))&&Zn(l,e),Vf()):Zn(l,e),yi()&&(!c||!bu(t))&&Vu(s,e,l,t),t}function Ah(t){let e=t;return Al()?Gf():(e=e.parent,qn(e,!1)),e}function t_(t,e){let n=t[Nt];if(!n)return;let o;try{o=n.get(jn,null)}catch{o=null}o?.(e)}function Bu(t,e,n,o,r){let i=t.inputs?.[o],s=t.hostDirectiveInputs?.[o],l=!1;if(s)for(let c=0;c<s.length;c+=2){let d=s[c],f=s[c+1],p=e.data[d];tu(p,n[d],f,r),l=!0}if(i)for(let c of i){let d=n[c],f=e.data[c];tu(f,d,o,r),l=!0}return l}function n_(t,e){let n=Ge(e,t),o=n[A];o_(o,n);let r=n[Ze];r!==null&&n[Hn]===null&&(n[Hn]=oh(r,n[Nt])),oe(j.ComponentStart);try{Gu(o,n,n[fe])}finally{oe(j.ComponentEnd,n[fe])}}function o_(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Gu(t,e,n){hi(e);try{let o=t.viewQuery;o!==null&&eu(1,o,n);let r=t.template;r!==null&&Dh(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[mt]?.finishViewCreation(t),t.staticContentQueries&&rh(t,e),t.staticViewQueries&&eu(2,t.viewQuery,n);let i=t.components;i!==null&&r_(e,i)}catch(o){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),o}finally{e[P]&=-5,gi()}}function r_(t,e){for(let n=0;n<e.length;n++)n_(t,e[n])}function ji(t,e,n,o){let r=b(null);try{let i=e.tView,l=t[P]&4096?4096:16,c=Pu(t,i,n,l,null,e,null,null,o?.injector??null,o?.embeddedViewInjector??null,o?.dehydratedView??null),d=t[e.index];c[Wt]=d;let f=t[mt];return f!==null&&(c[mt]=f.createEmbeddedView(i)),Gu(i,c,n),c}finally{b(r)}}function Vo(t,e){return!e||e.firstChild===null||Jp(t)}function Uo(t,e,n,o,r=!1){for(;n!==null;){if(n.type===128){n=r?n.projectionNext:n.next;continue}let i=e[n.index];i!==null&&o.push(Be(i)),Qe(i)&&Mh(i,o);let s=n.type;if(s&8)Uo(t,e,n.child,o);else if(s&32){let l=ku(n,e),c;for(;c=l();)o.push(c)}else if(s&16){let l=Ch(e,n);if(Array.isArray(l))o.push(...l);else{let c=Bt(e[ke]);Uo(c[A],c,l,o,!0)}}n=r?n.projectionNext:n.next}return o}function Mh(t,e){for(let n=ue;n<t.length;n++){let o=t[n],r=o[A].firstChild;r!==null&&Uo(o[A],o,r,e)}t[jt]!==t[Ze]&&e.push(t[jt])}function bh(t){if(t[li]!==null){for(let e of t[li])e.impl.addSequence(e);t[li].length=0}}var Nh=[];function i_(t){return t[Le]??s_(t)}function s_(t){let e=Nh.pop()??Object.create(l_);return e.lView=t,e}function a_(t){t.lView[Le]!==t&&(t.lView=null,Nh.push(t))}var l_=K(q({},go),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Ro(t.lView)},consumerOnSignalRead(){this.lView[Le]=this}});function u_(t){let e=t[Le]??Object.create(c_);return e.lView=t,e}var c_=K(q({},go),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Bt(t.lView);for(;e&&!xh(e[A]);)e=Bt(e);e&&El(e)},consumerOnSignalRead(){this.lView[Le]=this}});function xh(t){return t.type!==2}function Rh(t){if(t[Mo]===null)return;let e=!0;for(;e;){let n=!1;for(let o of t[Mo])o.dirty&&(n=!0,o.zone===null||Zone.current===o.zone?o.run():o.zone.run(()=>o.run()));e=n&&!!(t[P]&8192)}}var d_=100;function Ph(t,e=0){let o=t[gt].rendererFactory,r=!1;r||o.begin?.();try{f_(t,e)}finally{r||o.end?.()}}function f_(t,e){let n=Ml();try{bl(!0),ou(t,e);let o=0;for(;xo(t);){if(o===d_)throw new O(103,!1);o++,ou(t,1)}}finally{bl(n)}}function p_(t,e,n,o){if(vn(e))return;let r=e[P],i=!1,s=!1;hi(e);let l=!0,c=null,d=null;i||(xh(t)?(d=i_(e),c=Sr(d)):Tr()===null?(l=!1,d=u_(e),c=Sr(d)):e[Le]&&(wr(e[Le]),e[Le]=null));try{vl(e),qf(t.bindingStartIndex),n!==null&&Dh(t,e,n,2,o);let f=(r&3)===3;if(!i)if(f){let g=t.preOrderCheckHooks;g!==null&&_i(e,g,null)}else{let g=t.preOrderHooks;g!==null&&Ci(e,g,0,null),Hl(e,0)}if(s||h_(e),Rh(e),Fh(e,0),t.contentQueries!==null&&rh(t,e),!i)if(f){let g=t.contentCheckHooks;g!==null&&_i(e,g)}else{let g=t.contentHooks;g!==null&&Ci(e,g,1),Hl(e,1)}m_(t,e);let p=t.components;p!==null&&Lh(e,p,0);let h=t.viewQuery;if(h!==null&&eu(2,h,o),!i)if(f){let g=t.viewCheckHooks;g!==null&&_i(e,g)}else{let g=t.viewHooks;g!==null&&Ci(e,g,2),Hl(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[ai]){for(let g of e[ai])g();e[ai]=null}i||(bh(e),e[P]&=-73)}catch(f){throw i||Ro(e),f}finally{d!==null&&(ma(d,c),l&&a_(d)),gi()}}function Fh(t,e){for(let n=Kp(t);n!==null;n=Zp(n))for(let o=ue;o<n.length;o++){let r=n[o];kh(r,e)}}function h_(t){for(let e=Kp(t);e!==null;e=Zp(e)){if(!(e[P]&2))continue;let n=e[yn];for(let o=0;o<n.length;o++){let r=n[o];El(r)}}}function g_(t,e,n){oe(j.ComponentStart);let o=Ge(e,t);try{kh(o,n)}finally{oe(j.ComponentEnd,o[fe])}}function kh(t,e){ci(t)&&ou(t,e)}function ou(t,e){let o=t[A],r=t[P],i=t[Le],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(i?.dirty&&ya(i)),s||=!1,i&&(i.dirty=!1),t[P]&=-9217,s)p_(o,t,o.template,t[fe]);else if(r&8192){let l=b(null);try{Rh(t),Fh(t,1);let c=o.components;c!==null&&Lh(t,c,1),bh(t)}finally{b(l)}}}function Lh(t,e,n){for(let o=0;o<e.length;o++)g_(t,e[o],n)}function m_(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let o=0;o<n.length;o++){let r=n[o];if(r<0)Yt(~r);else{let i=r,s=n[++o],l=n[++o];Wf(s,i);let c=e[i];oe(j.HostBindingsUpdateStart,c);try{l(2,c)}finally{oe(j.HostBindingsUpdateEnd,c)}}}}finally{Yt(-1)}}function $u(t,e){let n=Ml()?64:1088;for(t[gt].changeDetectionScheduler?.notify(e);t;){t[P]|=n;let o=Bt(t);if($n(t)&&!o)return t;t=o}return null}function Oh(t,e,n,o){return[t,!0,0,e,null,o,null,n,null,null]}function Vh(t,e){let n=ue+e;if(n<t.length)return t[n]}function Ji(t,e,n,o=!0){let r=e[A];if(y_(r,e,t,n),o){let s=nu(n,t),l=e[ie],c=l.parentNode(t[jt]);c!==null&&RE(r,t[He],l,e,c,s)}let i=e[Hn];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function Uh(t,e){let n=Ho(t,e);return n!==void 0&&zi(n[A],n),n}function Ho(t,e){if(t.length<=ue)return;let n=ue+e,o=t[n];if(o){let r=o[Wt];r!==null&&r!==t&&Ou(r,o),e>0&&(t[n-1][Ue]=o[Ue]);let i=Io(t,ue+e);xE(o[A],o);let s=i[mt];s!==null&&s.detachView(i[A]),o[he]=null,o[Ue]=null,o[P]&=-129}return o}function y_(t,e,n,o){let r=ue+o,i=n.length;o>0&&(n[r-1][Ue]=e),o<i-ue?(e[Ue]=n[r],il(n,ue+o,e)):(n.push(e),e[Ue]=null),e[he]=n;let s=e[Wt];s!==null&&n!==s&&Hh(s,e);let l=e[mt];l!==null&&l.insertView(t),di(e),e[P]|=128}function Hh(t,e){let n=t[yn],o=e[he];if(yt(o))t[P]|=2;else{let r=o[he][ke];e[ke]!==r&&(t[P]|=2)}n===null?t[yn]=[e]:n.push(e)}var Kt=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[A];return Uo(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[fe]}set context(e){this._lView[fe]=e}get destroyed(){return vn(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[he];if(Qe(e)){let n=e[bo],o=n?n.indexOf(this):-1;o>-1&&(Ho(e,o),Io(n,o))}this._attachedToViewContainer=!1}zi(this._lView[A],this._lView)}onDestroy(e){_l(this._lView,e)}markForCheck(){$u(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[P]&=-129}reattach(){di(this._lView),this._lView[P]|=128}detectChanges(){this._lView[P]|=1024,Ph(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new O(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=$n(this._lView),n=this._lView[Wt];n!==null&&!e&&Ou(n,this._lView),_h(this._lView[A],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new O(902,!1);this._appRef=e;let n=$n(this._lView),o=this._lView[Wt];o!==null&&!n&&Hh(o,this._lView),di(this._lView)}};var Qn=(()=>{class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=v_;constructor(n,o,r){this._declarationLView=n,this._declarationTContainer=o,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,o){return this.createEmbeddedViewImpl(n,o)}createEmbeddedViewImpl(n,o,r){let i=ji(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:o,dehydratedView:r});return new Kt(i)}}return t})();function v_(){return qu(Me(),V())}function qu(t,e){return t.type&4?new Qn(e,t,eo(t,e)):null}function Yi(t,e,n,o,r){let i=t.data[e];if(i===null)i=E_(t,e,n,o,r),zf()&&(i.flags|=32);else if(i.type&64){i.type=n,i.value=o,i.attrs=r;let s=Bf();i.injectorIndex=s===null?-1:s.injectorIndex}return qn(i,!0),i}function E_(t,e,n,o,r){let i=wl(),s=Al(),l=s?i:i&&i.parent,c=t.data[e]=C_(t,l,n,e,o,r);return __(t,c,i,s),c}function __(t,e,n,o){t.firstChild===null&&(t.firstChild=e),n!==null&&(o?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function C_(t,e,n,o,r,i){let s=e?e.injectorIndex:-1,l=0;return Hf()&&(l|=128),{type:n,index:o,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:l,providerIndexes:0,value:r,attrs:i,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function D_(t){let e=t[hl]??[],o=t[he][ie],r=[];for(let i of e)i.data[eh]!==void 0?r.push(i):I_(i,o);t[hl]=r}function I_(t,e){let n=0,o=t.firstChild;if(o){let r=t.data[Xp];for(;n<r;){let i=o.nextSibling;dh(e,o,!1),o=i,n++}}}var T_=()=>null,S_=()=>null;function ru(t,e){return T_(t,e)}function Bh(t,e,n){return S_(t,e,n)}var Gh=class{},Ki=class{},iu=class{resolveComponentFactory(e){throw new O(917,!1)}},Zi=class{static NULL=new iu},In=class{},Jo=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>w_()}return t})();function w_(){let t=V(),e=Me(),n=Ge(e.index,t);return(yt(n)?n:t)[ie]}var $h=(()=>{class t{static \u0275prov=re({token:t,providedIn:"root",factory:()=>null})}return t})();var Ii={},su=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,o){let r=this.injector.get(e,Ii,o);return r!==Ii||n===Ii?r:this.parentInjector.get(e,n,o)}};function Ri(t,e,n){let o=n?t.styles:null,r=n?t.classes:null,i=0;if(e!==null)for(let s=0;s<e.length;s++){let l=e[s];if(typeof l=="number")i=l;else if(i==1)r=Qr(r,l);else if(i==2){let c=l,d=e[++s];o=Qr(o,c+": "+d+";")}}n?t.styles=o:t.stylesWithoutHost=o,n?t.classes=r:t.classesWithoutHost=r}function ce(t,e=0){let n=V();if(n===null)return Z(t,e);let o=Me();return zp(o,n,ve(t),e)}function A_(t,e,n,o,r){let i=o===null?null:{"":-1},s=r(t,n);if(s!==null){let l=s,c=null,d=null;for(let f of s)if(f.resolveHostDirectives!==null){[l,c,d]=f.resolveHostDirectives(s);break}N_(t,e,n,l,i,c,d)}i!==null&&o!==null&&M_(n,o,i)}function M_(t,e,n){let o=t.localNames=[];for(let r=0;r<e.length;r+=2){let i=n[e[r+1]];if(i==null)throw new O(-301,!1);o.push(e[r],i)}}function b_(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function N_(t,e,n,o,r,i,s){let l=o.length,c=null;for(let h=0;h<l;h++){let g=o[h];c===null&&vt(g)&&(c=g,b_(t,n,h)),Zl(Mi(n,e),t,g.type)}L_(n,t.data.length,l),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let h=0;h<l;h++){let g=o[h];g.providersResolver&&g.providersResolver(g)}let d=!1,f=!1,p=gh(t,e,l,null);l>0&&(n.directiveToIndex=new Map);for(let h=0;h<l;h++){let g=o[h];if(n.mergedAttrs=Kn(n.mergedAttrs,g.hostAttrs),R_(t,n,e,p,g),k_(p,g,r),s!==null&&s.has(g)){let[y,E]=s.get(g);n.directiveToIndex.set(g.type,[p,y+n.directiveStart,E+n.directiveStart])}else(i===null||!i.has(g))&&n.directiveToIndex.set(g.type,p);g.contentQueries!==null&&(n.flags|=4),(g.hostBindings!==null||g.hostAttrs!==null||g.hostVars!==0)&&(n.flags|=64);let m=g.type.prototype;!d&&(m.ngOnChanges||m.ngOnInit||m.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),d=!0),!f&&(m.ngOnChanges||m.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),f=!0),p++}x_(t,n,i)}function x_(t,e,n){for(let o=e.directiveStart;o<e.directiveEnd;o++){let r=t.data[o];if(n===null||!n.has(r))Ep(0,e,r,o),Ep(1,e,r,o),Cp(e,o,!1);else{let i=n.get(r);_p(0,e,i,o),_p(1,e,i,o),Cp(e,o,!0)}}}function Ep(t,e,n,o){let r=t===0?n.inputs:n.outputs;for(let i in r)if(r.hasOwnProperty(i)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[i]??=[],s[i].push(o),qh(e,i)}}function _p(t,e,n,o){let r=t===0?n.inputs:n.outputs;for(let i in r)if(r.hasOwnProperty(i)){let s=r[i],l;t===0?l=e.hostDirectiveInputs??={}:l=e.hostDirectiveOutputs??={},l[s]??=[],l[s].push(o,i),qh(e,s)}}function qh(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function Cp(t,e,n){let{attrs:o,inputs:r,hostDirectiveInputs:i}=t;if(o===null||!n&&r===null||n&&i===null||xu(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,l=0;for(;l<o.length;){let c=o[l];if(c===0){l+=4;continue}else if(c===5){l+=2;continue}else if(typeof c=="number")break;if(!n&&r.hasOwnProperty(c)){let d=r[c];for(let f of d)if(f===e){s??=[],s.push(c,o[l+1]);break}}else if(n&&i.hasOwnProperty(c)){let d=i[c];for(let f=0;f<d.length;f+=2)if(d[f]===e){s??=[],s.push(d[f+1],o[l+1]);break}}l+=2}t.initialInputs??=[],t.initialInputs.push(s)}function R_(t,e,n,o,r){t.data[o]=r;let i=r.factory||(r.factory=un(r.type,!0)),s=new Cn(i,vt(r),ce,null);t.blueprint[o]=s,n[o]=s,P_(t,e,o,gh(t,n,r.hostVars,$e),r)}function P_(t,e,n,o,r){let i=r.hostBindings;if(i){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let l=~e.index;F_(s)!=l&&s.push(l),s.push(n,o,i)}}function F_(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function k_(t,e,n){if(n){if(e.exportAs)for(let o=0;o<e.exportAs.length;o++)n[e.exportAs[o]]=t;vt(e)&&(n[""]=t)}}function L_(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function zh(t,e,n,o,r,i,s,l){let c=e[A],d=c.consts,f=_t(d,s),p=Yi(c,t,n,o,f);return i&&A_(c,e,p,_t(d,l),r),p.mergedAttrs=Kn(p.mergedAttrs,p.attrs),p.attrs!==null&&Ri(p,p.attrs,!1),p.mergedAttrs!==null&&Ri(p,p.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,p),p}function Wh(t,e){Lv(t,e),gl(e)&&t.queries.elementEnd(e)}function O_(t,e,n,o,r,i){let s=e.consts,l=_t(s,r),c=Yi(e,t,n,o,l);if(c.mergedAttrs=Kn(c.mergedAttrs,c.attrs),i!=null){let d=_t(s,i);c.localNames=[];for(let f=0;f<d.length;f+=2)c.localNames.push(d[f],-1)}return c.attrs!==null&&Ri(c,c.attrs,!1),c.mergedAttrs!==null&&Ri(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function V_(t,e,n){return t[e]=n}function It(t,e,n){if(n===$e)return!1;let o=t[e];return Object.is(o,n)?!1:(t[e]=n,!0)}function Dp(t,e,n,o){let r=It(t,e,n);return It(t,e+1,o)||r}function U_(t,e,n,o,r,i){let s=Dp(t,e,n,o);return Dp(t,e+2,r,i)||s}function Ti(t,e,n){return function o(r){let i=Jt(t)?Ge(t.index,e):e;$u(i,5);let s=e[fe],l=Ip(e,s,n,r),c=o.__ngNextListenerFn__;for(;c;)l=Ip(e,s,c,r)&&l,c=c.__ngNextListenerFn__;return l}}function Ip(t,e,n,o){let r=b(null);try{return oe(j.OutputStart,e,n),n(o)!==!1}catch(i){return t_(t,i),!1}finally{oe(j.OutputEnd,e,n),b(r)}}function jh(t,e,n,o,r,i,s,l){let c=ui(t),d=!1,f=null;if(!o&&c&&(f=B_(e,n,i,t.index)),f!==null){let p=f.__ngLastListenerFn__||f;p.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,d=!0}else{let p=Et(t,n),h=o?o(p):p;sE(n,h,i,l);let g=r.listen(h,i,l);if(!H_(i)){let m=o?y=>o(Be(y[t.index])):t.index;Jh(m,e,n,i,l,g,!1)}}return d}function H_(t){return t.startsWith("animation")||t.startsWith("transition")}function B_(t,e,n,o){let r=t.cleanup;if(r!=null)for(let i=0;i<r.length-1;i+=2){let s=r[i];if(s===n&&r[i+1]===o){let l=e[Bn],c=r[i+2];return l&&l.length>c?l[c]:null}typeof s=="string"&&(i+=2)}return null}function Jh(t,e,n,o,r,i,s){let l=e.firstCreatePass?Dl(e):null,c=Cl(n),d=c.length;c.push(r,i),l&&l.push(o,t,d,(d+1)*(s?-1:1))}function Tp(t,e,n,o,r,i){let s=e[n],l=e[A],d=l.data[n].outputs[o],p=s[d].subscribe(i);Jh(t.index,l,e,r,i,p,!0)}var au=Symbol("BINDING");var lu=class extends Zi{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=pn(e);return new Bo(n,this.ngModule)}};function G_(t){return Object.keys(t).map(e=>{let[n,o,r]=t[e],i={propName:n,templateName:e,isSignal:(o&qi.SignalBased)!==0};return r&&(i.transform=r),i})}function $_(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function q_(t,e,n){let o=e instanceof Oe?e:e?.injector;return o&&t.getStandaloneInjector!==null&&(o=t.getStandaloneInjector(o)||o),o?new su(n,o):n}function z_(t){let e=t.get(In,null);if(e===null)throw new O(407,!1);let n=t.get($h,null),o=t.get(Vn,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:o,ngReflect:!1}}function W_(t,e){let n=Yh(t);return uh(e,n,n==="svg"?ml:n==="math"?xf:null)}function Yh(t){return(t.selectors[0][0]||"div").toLowerCase()}var Bo=class extends Ki{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=G_(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=$_(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=IE(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,o,r,i,s){oe(j.DynamicComponentStart);let l=b(null);try{let c=this.componentDef,d=j_(o,c,s,i),f=q_(c,r||this.ngModule,e),p=z_(f),h=p.rendererFactory.createRenderer(null,c),g=o?zE(h,o,c.encapsulation,f):W_(c,h),m=s?.some(Sp)||i?.some(v=>typeof v!="function"&&v.bindings.some(Sp)),y=Pu(null,d,null,512|hh(c),null,null,p,h,f,null,oh(g,f,!0));y[Ee]=g,hi(y);let E=null;try{let v=zh(Ee,y,2,"#host",()=>d.directiveRegistry,!0,0);fh(h,g,v),Zn(g,y),Ih(d,y,v),ih(d,v,y),Wh(d,v),n!==void 0&&Y_(v,this.ngContentSelectors,n),E=Ge(v.index,y),y[fe]=E[fe],Gu(d,y,null)}catch(v){throw E!==null&&Xl(E),Xl(y),v}finally{oe(j.DynamicComponentEnd),gi()}return new Pi(this.componentType,y,!!m)}finally{b(l)}}};function j_(t,e,n,o){let r=t?["ng-version","21.0.6"]:TE(e.selectors[0]),i=null,s=null,l=0;if(n)for(let f of n)l+=f[au].requiredVars,f.create&&(f.targetIdx=0,(i??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(o)for(let f=0;f<o.length;f++){let p=o[f];if(typeof p!="function")for(let h of p.bindings){l+=h[au].requiredVars;let g=f+1;h.create&&(h.targetIdx=g,(i??=[]).push(h)),h.update&&(h.targetIdx=g,(s??=[]).push(h))}}let c=[e];if(o)for(let f of o){let p=typeof f=="function"?f:f.type,h=tl(p);c.push(h)}return Ru(0,null,J_(i,s),1,l,c,null,null,null,[r],null)}function J_(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let o of t)o.create();if(n&2&&e)for(let o of e)o.update()}}function Sp(t){let e=t[au].kind;return e==="input"||e==="twoWay"}var Pi=class extends Gh{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,o){super(),this._rootLView=n,this._hasInputBindings=o,this._tNode=No(n[A],Ee),this.location=eo(this._tNode,n),this.instance=Ge(this._tNode.index,n)[fe],this.hostView=this.changeDetectorRef=new Kt(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let o=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let r=this._rootLView,i=Bu(o,r[A],r,e,n);this.previousInputValues.set(e,n);let s=Ge(o.index,r);$u(s,1)}get injector(){return new _n(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Y_(t,e,n){let o=t.projection=[];for(let r=0;r<e.length;r++){let i=n[r];o.push(i!=null&&i.length?Array.from(i):null)}}var Yo=(()=>{class t{static __NG_ELEMENT_ID__=K_}return t})();function K_(){let t=Me();return Zh(t,V())}var Z_=Yo,Kh=class extends Z_{_lContainer;_hostTNode;_hostLView;constructor(e,n,o){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=o}get element(){return eo(this._hostTNode,this._hostLView)}get injector(){return new _n(this._hostTNode,this._hostLView)}get parentInjector(){let e=Su(this._hostTNode,this._hostLView);if(Up(e)){let n=Ai(e,this._hostLView),o=wi(e),r=n[A].data[o+8];return new _n(r,n)}else return new _n(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=wp(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-ue}createEmbeddedView(e,n,o){let r,i;typeof o=="number"?r=o:o!=null&&(r=o.index,i=o.injector);let s=ru(this._lContainer,e.ssrId),l=e.createEmbeddedViewImpl(n||{},i,s);return this.insertImpl(l,r,Vo(this._hostTNode,s)),l}createComponent(e,n,o,r,i,s,l){let c=e&&!xv(e),d;if(c)d=n;else{let E=n||{};d=E.index,o=E.injector,r=E.projectableNodes,i=E.environmentInjector||E.ngModuleRef,s=E.directives,l=E.bindings}let f=c?e:new Bo(pn(e)),p=o||this.parentInjector;if(!i&&f.ngModule==null){let v=(c?p:this.parentInjector).get(Oe,null);v&&(i=v)}let h=pn(f.componentType??{}),g=ru(this._lContainer,h?.id??null),m=g?.firstChild??null,y=f.create(p,r,m,i,s,l);return this.insertImpl(y.hostView,d,Vo(this._hostTNode,g)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,o){let r=e._lView;if(Pf(r)){let l=this.indexOf(e);if(l!==-1)this.detach(l);else{let c=r[he],d=new Kh(c,c[He],c[he]);d.detach(d.indexOf(e))}}let i=this._adjustIndex(n),s=this._lContainer;return Ji(s,r,i,o),e.attachToViewContainerRef(),il($l(s),i,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=wp(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),o=Ho(this._lContainer,n);o&&(Io($l(this._lContainer),n),zi(o[A],o))}detach(e){let n=this._adjustIndex(e,-1),o=Ho(this._lContainer,n);return o&&Io($l(this._lContainer),n)!=null?new Kt(o):null}_adjustIndex(e,n=0){return e??this.length+n}};function wp(t){return t[bo]}function $l(t){return t[bo]||(t[bo]=[])}function Zh(t,e){let n,o=e[t.index];return Qe(o)?n=o:(n=Oh(o,e,null,t),e[t.index]=n,Fu(e,n)),X_(n,e,t,o),new Kh(n,t,e)}function Q_(t,e){let n=t[ie],o=n.createComment(""),r=Et(e,t),i=n.parentNode(r);return xi(n,i,o,n.nextSibling(r),!1),o}var X_=nC,eC=()=>!1;function tC(t,e,n){return eC(t,e,n)}function nC(t,e,n,o){if(t[jt])return;let r;n.type&8?r=Be(o):r=Q_(e,n),t[jt]=r}var uu=class t{queryList;matches=null;constructor(e){this.queryList=e}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},cu=class t{queries;constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let o=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let i=0;i<o;i++){let s=n.getByIndex(i),l=this.queries[s.indexInDeclarationView];r.push(l.clone())}return new t(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)zu(e,n).matches!==null&&this.queries[n].setDirty()}},du=class{flags;read;predicate;constructor(e,n,o=null){this.flags=n,this.read=o,typeof e=="string"?this.predicate=cC(e):this.predicate=e}},fu=class t{queries;constructor(e=[]){this.queries=e}elementStart(e,n){for(let o=0;o<this.queries.length;o++)this.queries[o].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let o=0;o<this.length;o++){let r=n!==null?n.length:0,i=this.getByIndex(o).embeddedTView(e,r);i&&(i.indexInDeclarationView=o,n!==null?n.push(i):n=[i])}return n!==null?new t(n):null}template(e,n){for(let o=0;o<this.queries.length;o++)this.queries[o].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},pu=class t{metadata;matches=null;indexInDeclarationView=-1;crossesNgTemplate=!1;_declarationNodeIndex;_appliesToNextNode=!0;constructor(e,n=-1){this.metadata=e,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,o=e.parent;for(;o!==null&&o.type&8&&o.index!==n;)o=o.parent;return n===(o!==null?o.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let o=this.metadata.predicate;if(Array.isArray(o))for(let r=0;r<o.length;r++){let i=o[r];this.matchTNodeWithReadOption(e,n,oC(n,i)),this.matchTNodeWithReadOption(e,n,Di(n,e,i,!1,!1))}else o===Qn?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Di(n,e,o,!1,!1))}matchTNodeWithReadOption(e,n,o){if(o!==null){let r=this.metadata.read;if(r!==null)if(r===Ft||r===Yo||r===Qn&&n.type&4)this.addMatch(n.index,-2);else{let i=Di(n,e,r,!1,!1);i!==null&&this.addMatch(n.index,i)}else this.addMatch(n.index,o)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function oC(t,e){let n=t.localNames;if(n!==null){for(let o=0;o<n.length;o+=2)if(n[o]===e)return n[o+1]}return null}function rC(t,e){return t.type&11?eo(t,e):t.type&4?qu(t,e):null}function iC(t,e,n,o){return n===-1?rC(e,t):n===-2?sC(t,e,o):Oo(t,t[A],n,e)}function sC(t,e,n){if(n===Ft)return eo(e,t);if(n===Qn)return qu(e,t);if(n===Yo)return Zh(e,t)}function Qh(t,e,n,o){let r=e[mt].queries[o];if(r.matches===null){let i=t.data,s=n.matches,l=[];for(let c=0;s!==null&&c<s.length;c+=2){let d=s[c];if(d<0)l.push(null);else{let f=i[d];l.push(iC(e,f,s[c+1],n.metadata.read))}}r.matches=l}return r.matches}function hu(t,e,n,o){let r=t.queries.getByIndex(n),i=r.matches;if(i!==null){let s=Qh(t,e,r,n);for(let l=0;l<i.length;l+=2){let c=i[l];if(c>0)o.push(s[l/2]);else{let d=i[l+1],f=e[-c];for(let p=ue;p<f.length;p++){let h=f[p];h[Wt]===h[he]&&hu(h[A],h,d,o)}if(f[yn]!==null){let p=f[yn];for(let h=0;h<p.length;h++){let g=p[h];hu(g[A],g,d,o)}}}}}return o}function aC(t,e){return t[mt].queries[e].queryList}function lC(t,e,n){let o=new bi((n&4)===4);return Lf(t,e,o,o.destroy),(e[mt]??=new cu).queries.push(new uu(o))-1}function uC(t,e,n){let o=ge();return o.firstCreatePass&&(dC(o,new du(t,e,n),-1),(e&2)===2&&(o.staticViewQueries=!0)),lC(o,V(),e)}function cC(t){return t.split(",").map(e=>e.trim())}function dC(t,e,n){t.queries===null&&(t.queries=new fu),t.queries.track(new pu(e,n))}function zu(t,e){return t.queries.getByIndex(e)}function fC(t,e){let n=t[A],o=zu(n,e);return o.crossesNgTemplate?hu(n,t,e,[]):Qh(n,t,o,e)}var Fi=class{};var Go=class extends Fi{injector;componentFactoryResolver=new lu(this);instance=null;constructor(e){super();let n=new dn([...e.providers,{provide:Fi,useValue:this},{provide:Zi,useValue:this.componentFactoryResolver}],e.parent||wo(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Xh(t,e,n=null){return new Go({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var pC=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let o=ul(!1,n.type),r=o.length>0?Xh([o],this._injector,""):null;this.cachedInjectors.set(n,r)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=re({token:t,providedIn:"environment",factory:()=>new t(Z(Oe))})}return t})();function ot(t){return qo(()=>{let e=eg(t),n=K(q({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Au.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?r=>r.get(pC).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||nt.Emulated,styles:t.styles||Ae,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Sn("NgStandalone"),tg(n);let o=t.dependencies;return n.directiveDefs=Ap(o,hC),n.pipeDefs=Ap(o,yf),n.id=yC(n),n})}function hC(t){return pn(t)||tl(t)}function wn(t){return qo(()=>({type:t.type,bootstrap:t.bootstrap||Ae,declarations:t.declarations||Ae,imports:t.imports||Ae,exports:t.exports||Ae,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function gC(t,e){if(t==null)return zt;let n={};for(let o in t)if(t.hasOwnProperty(o)){let r=t[o],i,s,l,c;Array.isArray(r)?(l=r[0],i=r[1],s=r[2]??i,c=r[3]||null):(i=r,s=r,l=qi.None,c=null),n[i]=[o,l,c],e[i]=s}return n}function mC(t){if(t==null)return zt;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function rt(t){return qo(()=>{let e=eg(t);return tg(e),e})}function eg(t){let e={};return{type:t.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||zt,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Ae,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:gC(t.inputs,e),outputs:mC(t.outputs),debugInfo:null}}function tg(t){t.features?.forEach(e=>e(t))}function Ap(t,e){return t?()=>{let n=typeof t=="function"?t():t,o=[];for(let r of n){let i=e(r);i!==null&&o.push(i)}return o}:null}function yC(t){let e=0,n=typeof t.consts=="function"?"":t.consts,o=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let i of o.join("|"))e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function vC(t){return Object.getPrototypeOf(t.prototype).constructor}function kt(t){let e=vC(t.type),n=!0,o=[t];for(;e;){let r;if(vt(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new O(903,!1);r=e.\u0275dir}if(r){if(n){o.push(r);let s=t;s.inputs=ql(t.inputs),s.declaredInputs=ql(t.declaredInputs),s.outputs=ql(t.outputs);let l=r.hostBindings;l&&IC(t,l);let c=r.viewQuery,d=r.contentQueries;if(c&&CC(t,c),d&&DC(t,d),EC(t,r),mf(t.outputs,r.outputs),vt(r)&&r.data.animation){let f=t.data;f.animation=(f.animation||[]).concat(r.data.animation)}}let i=r.features;if(i)for(let s=0;s<i.length;s++){let l=i[s];l&&l.ngInherit&&l(t),l===kt&&(n=!1)}}e=Object.getPrototypeOf(e)}_C(o)}function EC(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let o=e.inputs[n];o!==void 0&&(t.inputs[n]=o,t.declaredInputs[n]=e.declaredInputs[n])}}function _C(t){let e=0,n=null;for(let o=t.length-1;o>=0;o--){let r=t[o];r.hostVars=e+=r.hostVars,r.hostAttrs=Kn(r.hostAttrs,n=Kn(n,r.hostAttrs))}}function ql(t){return t===zt?{}:t===Ae?[]:t}function CC(t,e){let n=t.viewQuery;n?t.viewQuery=(o,r)=>{e(o,r),n(o,r)}:t.viewQuery=e}function DC(t,e){let n=t.contentQueries;n?t.contentQueries=(o,r,i)=>{e(o,r,i),n(o,r,i)}:t.contentQueries=e}function IC(t,e){let n=t.hostBindings;n?t.hostBindings=(o,r)=>{e(o,r),n(o,r)}:t.hostBindings=e}function TC(t,e,n,o,r,i,s,l){if(n.firstCreatePass){t.mergedAttrs=Kn(t.mergedAttrs,t.attrs);let f=t.tView=Ru(2,t,r,i,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),f.queries=n.queries.embeddedTView(t))}l&&(t.flags|=l),qn(t,!1);let c=SC(n,e,t,o);yi()&&Vu(n,e,c,t),Zn(c,e);let d=Oh(c,e,c,t);e[o+Ee]=d,Fu(e,d),tC(d,t,e)}function ki(t,e,n,o,r,i,s,l,c,d,f){let p=n+Ee,h;if(e.firstCreatePass){if(h=Yi(e,p,4,s||null,l||null),d!=null){let g=_t(e.consts,d);h.localNames=[];for(let m=0;m<g.length;m+=2)h.localNames.push(g[m],-1)}}else h=e.data[p];return TC(h,t,e,n,o,r,i,c),d!=null&&Hu(t,h,f),h}var SC=wC;function wC(t,e,n,o){return vi(!0),e[ie].createComment("")}function ng(t){return typeof t=="function"&&t[Pe]!==void 0}function Wu(t){return ng(t)&&typeof t.set=="function"}var ju=new B("");function Ko(t){return!!t&&typeof t.then=="function"}function og(t){return!!t&&typeof t.subscribe=="function"}var rg=new B("");var Ju=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,o)=>{this.resolve=n,this.reject=o});appInits=H(rg,{optional:!0})??[];injector=H(Gt);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let r of this.appInits){let i=si(this.injector,r);if(Ko(i))n.push(i);else if(og(i)){let s=new Promise((l,c)=>{i.subscribe({complete:l,error:c})});n.push(s)}}let o=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{o()}).catch(r=>{this.reject(r)}),n.length===0&&o(),this.initialized=!0}static \u0275fac=function(o){return new(o||t)};static \u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ig=new B("");function sg(){Ca(()=>{let t="";throw new O(600,t)})}function ag(t){return t.isBoundToModule}var AC=10;var Zo=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=H(jn);afterRenderManager=H(yh);zonelessEnabled=H(Fo);rootEffectScheduler=H(Ul);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new Ke;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=H(Wn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(sn(n=>!n))}constructor(){H(jo,{optional:!0})}whenStable(){let n;return new Promise(o=>{n=this.isStable.subscribe({next:r=>{r&&o()}})}).finally(()=>{n.unsubscribe()})}_injector=H(Oe);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,o){return this.bootstrapImpl(n,o)}bootstrapImpl(n,o,r=Gt.NULL){return this._injector.get(Ve).run(()=>{oe(j.BootstrapComponentStart);let s=n instanceof Ki;if(!this._injector.get(Ju).done){let m="";throw new O(405,m)}let c;s?c=n:c=this._injector.get(Zi).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let d=ag(c)?void 0:this._injector.get(Fi),f=o||c.selector,p=c.create(r,[],f,d),h=p.location.nativeElement,g=p.injector.get(ju,null);return g?.registerApplication(h),p.onDestroy(()=>{this.detachView(p.hostView),Lo(this.components,p),g?.unregisterApplication(h)}),this._loadComponent(p),oe(j.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){oe(j.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Lu.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw oe(j.ChangeDetectionEnd),new O(101,!1);let n=b(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,b(n),this.afterTick.next(),oe(j.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(In,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<AC;){oe(j.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{oe(j.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let o=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:r}of this.allViews){if(!o&&!xo(r))continue;let i=o&&!this.zonelessEnabled?0:1;Ph(r,i),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>xo(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let o=n;this._views.push(o),o.attachToAppRef(this)}detachView(n){let o=n;Lo(this._views,o),o.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(r){this.internalErrorHandler(r)}this.components.push(n),this._injector.get(ig,[]).forEach(r=>r(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Lo(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new O(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(o){return new(o||t)};static \u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Lo(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var CF=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var gu=class{destroy(e){}updateValue(e,n){}swap(e,n){let o=Math.min(e,n),r=Math.max(e,n),i=this.detach(r);if(r-o>1){let s=this.detach(o);this.attach(o,i),this.attach(r,s)}else this.attach(o,i)}move(e,n){this.attach(n,this.detach(e))}};function zl(t,e,n,o,r){return t===n&&Object.is(e,o)?1:Object.is(r(t,e),r(n,o))?-1:0}function MC(t,e,n,o){let r,i,s=0,l=t.length-1,c=void 0;if(Array.isArray(e)){b(o);let d=e.length-1;for(b(null);s<=l&&s<=d;){let f=t.at(s),p=e[s],h=zl(s,f,s,p,n);if(h!==0){h<0&&t.updateValue(s,p),s++;continue}let g=t.at(l),m=e[d],y=zl(l,g,d,m,n);if(y!==0){y<0&&t.updateValue(l,m),l--,d--;continue}let E=n(s,f),v=n(l,g),w=n(s,p);if(Object.is(w,v)){let T=n(d,m);Object.is(T,E)?(t.swap(s,l),t.updateValue(l,m),d--,l--):t.move(l,s),t.updateValue(s,p),s++;continue}if(r??=new Li,i??=bp(t,s,l,n),mu(t,r,s,w))t.updateValue(s,p),s++,l++;else if(i.has(w))r.set(E,t.detach(s)),l--;else{let T=t.create(s,e[s]);t.attach(s,T),s++,l++}}for(;s<=d;)Mp(t,r,n,s,e[s]),s++}else if(e!=null){b(o);let d=e[Symbol.iterator]();b(null);let f=d.next();for(;!f.done&&s<=l;){let p=t.at(s),h=f.value,g=zl(s,p,s,h,n);if(g!==0)g<0&&t.updateValue(s,h),s++,f=d.next();else{r??=new Li,i??=bp(t,s,l,n);let m=n(s,h);if(mu(t,r,s,m))t.updateValue(s,h),s++,l++,f=d.next();else if(!i.has(m))t.attach(s,t.create(s,h)),s++,l++,f=d.next();else{let y=n(s,p);r.set(y,t.detach(s)),l--}}}for(;!f.done;)Mp(t,r,n,t.length,f.value),f=d.next()}for(;s<=l;)t.destroy(t.detach(l--));r?.forEach(d=>{t.destroy(d)})}function mu(t,e,n,o){return e!==void 0&&e.has(o)?(t.attach(n,e.get(o)),e.delete(o),!0):!1}function Mp(t,e,n,o,r){if(mu(t,e,o,n(o,r)))t.updateValue(o,r);else{let i=t.create(o,r);t.attach(o,i)}}function bp(t,e,n,o){let r=new Set;for(let i=e;i<=n;i++)r.add(o(i,t.at(i)));return r}var Li=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let o=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(o);)o=r.get(o);r.set(o,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,o]of this.kvMap)if(e(o,n),this._vMap!==void 0){let r=this._vMap;for(;r.has(o);)o=r.get(o),e(o,n)}}};function ee(t,e,n,o,r,i,s,l){Sn("NgControlFlow");let c=V(),d=ge(),f=_t(d.consts,i);return ki(c,d,t,e,n,o,r,f,256,s,l),Yu}function Yu(t,e,n,o,r,i,s,l){Sn("NgControlFlow");let c=V(),d=ge(),f=_t(d.consts,i);return ki(c,d,t,e,n,o,r,f,512,s,l),Yu}function te(t,e){Sn("NgControlFlow");let n=V(),o=En(),r=n[o]!==$e?n[o]:-1,i=r!==-1?Oi(n,Ee+r):void 0,s=0;if(It(n,o,t)){let l=b(null);try{if(i!==void 0&&Uh(i,s),t!==-1){let c=Ee+t,d=Oi(n,c),f=_u(n[A],c),p=Bh(d,f,n),h=ji(n,f,e,{dehydratedView:p});Ji(d,h,s,Vo(f,p))}}finally{b(l)}}else if(i!==void 0){let l=Vh(i,s);l!==void 0&&(l[fe]=e)}}var yu=class{lContainer;$implicit;$index;constructor(e,n,o){this.lContainer=e,this.$implicit=n,this.$index=o}get $count(){return this.lContainer.length-ue}};function Ku(t){return t}function Qi(t,e){return e}var vu=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,o){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=o}};function it(t,e,n,o,r,i,s,l,c,d,f,p,h){Sn("NgControlFlow");let g=V(),m=ge(),y=c!==void 0,E=V(),v=l?s.bind(E[ke][fe]):s,w=new vu(y,v);E[Ee+t]=w,ki(g,m,t+1,e,n,o,r,_t(m.consts,i),256),y&&ki(g,m,t+2,c,d,f,p,_t(m.consts,h),512)}var Eu=class extends gu{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,o){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=o}get length(){return this.lContainer.length-ue}at(e){return this.getLView(e)[fe].$implicit}attach(e,n){let o=n[Hn];this.needsIndexUpdate||=e!==this.length,Ji(this.lContainer,n,e,Vo(this.templateTNode,o)),bC(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,NC(this.lContainer,e),xC(this.lContainer,e)}create(e,n){let o=ru(this.lContainer,this.templateTNode.tView.ssrId);return ji(this.hostLView,this.templateTNode,new yu(this.lContainer,n,e),{dehydratedView:o})}destroy(e){zi(e[A],e)}updateValue(e,n){this.getLView(e)[fe].$implicit=n}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[fe].$index=e}getLView(e){return RC(this.lContainer,e)}};function st(t){let e=b(null),n=xt();try{let o=V(),r=o[A],i=o[n],s=n+1,l=Oi(o,s);if(i.liveCollection===void 0){let d=_u(r,s);i.liveCollection=new Eu(l,o,d)}else i.liveCollection.reset();let c=i.liveCollection;if(MC(c,t,i.trackByFn,e),c.updateIndexes(),i.hasEmptyBlock){let d=En(),f=c.length===0;if(It(o,d,f)){let p=n+2,h=Oi(o,p);if(f){let g=_u(r,p),m=Bh(h,g,o),y=ji(o,g,void 0,{dehydratedView:m});Ji(h,y,0,Vo(g,m))}else r.firstUpdatePass&&D_(h),Uh(h,0)}}}finally{b(e)}}function Oi(t,e){return t[e]}function bC(t,e){if(t.length<=ue)return;let n=ue+e,o=t[n],r=o?o[mn]:void 0;if(o&&r&&r.detachedLeaveAnimationFns&&r.detachedLeaveAnimationFns.length>0){let i=o[Nt];bE(i,r),Dn.delete(o),r.detachedLeaveAnimationFns=void 0}}function NC(t,e){if(t.length<=ue)return;let n=ue+e,o=t[n],r=o?o[mn]:void 0;r&&r.leave&&r.leave.size>0&&(r.detachedLeaveAnimationFns=[])}function xC(t,e){return Ho(t,e)}function RC(t,e){return Vh(t,e)}function _u(t,e){return No(t,e)}function Qo(t,e,n){let o=V(),r=En();if(It(o,r,e)){let i=ge(),s=mi();Th(s,o,t,e,o[ie],n)}return Qo}function Cu(t,e,n,o,r){Bu(e,t,n,r?"class":"style",o)}function L(t,e,n,o){let r=V(),i=r[A],s=t+Ee,l=i.firstCreatePass?zh(s,r,2,e,XE,Uf(),n,o):i.data[s];if(wh(l,r,t,e,lg),ui(l)){let c=r[A];Ih(c,r,l),ih(c,l,r)}return o!=null&&Hu(r,l),L}function z(){let t=ge(),e=Me(),n=Ah(e);return t.firstCreatePass&&Wh(t,n),Tl(n)&&Sl(),Il(),n.classesWithoutHost!=null&&Vv(n)&&Cu(t,n,V(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&Uv(n)&&Cu(t,n,V(),n.stylesWithoutHost,!1),z}function Tt(t,e,n,o){return L(t,e,n,o),z(),Tt}function C(t,e,n,o){let r=V(),i=r[A],s=t+Ee,l=i.firstCreatePass?O_(s,i,2,e,n,o):i.data[s];return wh(l,r,t,e,lg),o!=null&&Hu(r,l),C}function D(){let t=Me(),e=Ah(t);return Tl(e)&&Sl(),Il(),D}function qe(t,e,n,o){return C(t,e,n,o),D(),qe}var lg=(t,e,n,o,r)=>(vi(!0),uh(e[ie],o,Xf()));function _e(){return V()}function ze(t,e,n){let o=V(),r=En();if(It(o,r,e)){let i=ge(),s=mi();Sh(s,o,t,e,o[ie],n)}return ze}var Xo="en-US";var PC=Xo;function ug(t){typeof t=="string"&&(PC=t.toLowerCase().replace(/_/g,"-"))}function Ie(t,e,n){let o=V(),r=ge(),i=Me();return cg(r,o,o[ie],i,t,e,n),Ie}function se(t,e,n){let o=V(),r=ge(),i=Me();return(i.type&3||n)&&jh(i,r,o,n,o[ie],t,e,Ti(i,o,e)),se}function cg(t,e,n,o,r,i,s){let l=!0,c=null;if((o.type&3||s)&&(c??=Ti(o,e,i),jh(o,t,e,s,n,r,i,c)&&(l=!1)),l){let d=o.outputs?.[r],f=o.hostDirectiveOutputs?.[r];if(f&&f.length)for(let p=0;p<f.length;p+=2){let h=f[p],g=f[p+1];c??=Ti(o,e,i),Tp(o,e,h,g,r,c)}if(d&&d.length)for(let p of d)c??=Ti(o,e,i),Tp(o,e,p,r,r,c)}}function J(t=1){return Qf(t)}function to(t,e,n){return uC(t,e,n),to}function er(t){let e=V(),n=ge(),o=xl();pi(o+1);let r=zu(n,o);if(t.dirty&&Rf(e)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let i=fC(e,o);t.reset(i,Qv),t.notifyOnChanges()}return!0}return!1}function tr(){return aC(V(),xl())}function Ei(t,e){return t<<17|e<<2}function Tn(t){return t>>17&32767}function FC(t){return(t&2)==2}function kC(t,e){return t&131071|e<<17}function Du(t){return t|2}function Xn(t){return(t&131068)>>2}function Wl(t,e){return t&-131069|e<<2}function LC(t){return(t&1)===1}function Iu(t){return t|1}function OC(t,e,n,o,r,i){let s=i?e.classBindings:e.styleBindings,l=Tn(s),c=Xn(s);t[o]=n;let d=!1,f;if(Array.isArray(n)){let p=n;f=p[1],(f===null||Un(p,f)>0)&&(d=!0)}else f=n;if(r)if(c!==0){let h=Tn(t[l+1]);t[o+1]=Ei(h,l),h!==0&&(t[h+1]=Wl(t[h+1],o)),t[l+1]=kC(t[l+1],o)}else t[o+1]=Ei(l,0),l!==0&&(t[l+1]=Wl(t[l+1],o)),l=o;else t[o+1]=Ei(c,0),l===0?l=o:t[c+1]=Wl(t[c+1],o),c=o;d&&(t[o+1]=Du(t[o+1])),Np(t,f,o,!0),Np(t,f,o,!1),VC(e,f,t,o,i),s=Ei(l,c),i?e.classBindings=s:e.styleBindings=s}function VC(t,e,n,o,r){let i=r?t.residualClasses:t.residualStyles;i!=null&&typeof e=="string"&&Un(i,e)>=0&&(n[o+1]=Iu(n[o+1]))}function Np(t,e,n,o){let r=t[n+1],i=e===null,s=o?Tn(r):Xn(r),l=!1;for(;s!==0&&(l===!1||i);){let c=t[s],d=t[s+1];UC(c,e)&&(l=!0,t[s+1]=o?Iu(d):Du(d)),s=o?Tn(d):Xn(d)}l&&(t[n+1]=o?Du(r):Iu(r))}function UC(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Un(t,e)>=0:!1}var tt={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function HC(t){return t.substring(tt.key,tt.keyEnd)}function BC(t){return GC(t),dg(t,fg(t,0,tt.textEnd))}function dg(t,e){let n=tt.textEnd;return n===e?-1:(e=tt.keyEnd=$C(t,tt.key=e,n),fg(t,e,n))}function GC(t){tt.key=0,tt.keyEnd=0,tt.value=0,tt.valueEnd=0,tt.textEnd=t.length}function fg(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function $C(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function Xi(t,e,n){return pg(t,e,n,!1),Xi}function Te(t,e){return pg(t,e,null,!0),Te}function We(t){zC(ZC,qC,t,!0)}function qC(t,e){for(let n=BC(e);n>=0;n=dg(e,n))ri(t,HC(e),!0)}function pg(t,e,n,o){let r=V(),i=ge(),s=Nl(2);if(i.firstUpdatePass&&gg(i,t,s,o),e!==$e&&It(r,s,e)){let l=i.data[xt()];mg(i,l,r,r[ie],t,r[s+1]=XC(e,n),o,s)}}function zC(t,e,n,o){let r=ge(),i=Nl(2);r.firstUpdatePass&&gg(r,null,i,o);let s=V();if(n!==$e&&It(s,i,n)){let l=r.data[xt()];if(yg(l,o)&&!hg(r,i)){let c=o?l.classesWithoutHost:l.stylesWithoutHost;c!==null&&(n=Qr(c,n||"")),Cu(r,l,s,n,o)}else QC(r,l,s,s[ie],s[i+1],s[i+1]=KC(t,e,n),o,i)}}function hg(t,e){return e>=t.expandoStartIndex}function gg(t,e,n,o){let r=t.data;if(r[n+1]===null){let i=r[xt()],s=hg(t,n);yg(i,o)&&e===null&&!s&&(e=!1),e=WC(r,i,e,o),OC(r,i,e,n,s,o)}}function WC(t,e,n,o){let r=Jf(t),i=o?e.residualClasses:e.residualStyles;if(r===null)(o?e.classBindings:e.styleBindings)===0&&(n=jl(null,t,e,n,o),n=$o(n,e.attrs,o),i=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==r)if(n=jl(r,t,e,n,o),i===null){let c=jC(t,e,o);c!==void 0&&Array.isArray(c)&&(c=jl(null,t,e,c[1],o),c=$o(c,e.attrs,o),JC(t,e,o,c))}else i=YC(t,e,o)}return i!==void 0&&(o?e.residualClasses=i:e.residualStyles=i),n}function jC(t,e,n){let o=n?e.classBindings:e.styleBindings;if(Xn(o)!==0)return t[Tn(o)]}function JC(t,e,n,o){let r=n?e.classBindings:e.styleBindings;t[Tn(r)]=o}function YC(t,e,n){let o,r=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<r;i++){let s=t[i].hostAttrs;o=$o(o,s,n)}return $o(o,e.attrs,n)}function jl(t,e,n,o,r){let i=null,s=n.directiveEnd,l=n.directiveStylingLast;for(l===-1?l=n.directiveStart:l++;l<s&&(i=e[l],o=$o(o,i.hostAttrs,r),i!==t);)l++;return t!==null&&(n.directiveStylingLast=l),o}function $o(t,e,n){let o=n?1:2,r=-1;if(e!==null)for(let i=0;i<e.length;i++){let s=e[i];typeof s=="number"?r=s:r===o&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),ri(t,s,n?!0:e[++i]))}return t===void 0?null:t}function KC(t,e,n){if(n==null||n==="")return Ae;let o=[],r=$i(n);if(Array.isArray(r))for(let i=0;i<r.length;i++)t(o,r[i],!0);else if(typeof r=="object")for(let i in r)r.hasOwnProperty(i)&&t(o,i,r[i]);else typeof r=="string"&&e(o,r);return o}function ZC(t,e,n){let o=String(e);o!==""&&!o.includes(" ")&&ri(t,o,n)}function QC(t,e,n,o,r,i,s,l){r===$e&&(r=Ae);let c=0,d=0,f=0<r.length?r[0]:null,p=0<i.length?i[0]:null;for(;f!==null||p!==null;){let h=c<r.length?r[c+1]:void 0,g=d<i.length?i[d+1]:void 0,m=null,y;f===p?(c+=2,d+=2,h!==g&&(m=p,y=g)):p===null||f!==null&&f<p?(c+=2,m=f):(d+=2,m=p,y=g),m!==null&&mg(t,e,n,o,m,y,s,l),f=c<r.length?r[c]:null,p=d<i.length?i[d]:null}}function mg(t,e,n,o,r,i,s,l){if(!(e.type&3))return;let c=t.data,d=c[l+1],f=LC(d)?xp(c,e,n,r,Xn(d),s):void 0;if(!Vi(f)){Vi(i)||FC(d)&&(i=xp(c,null,n,r,l,s));let p=yl(xt(),n);qE(o,s,p,r,i)}}function xp(t,e,n,o,r,i){let s=e===null,l;for(;r>0;){let c=t[r],d=Array.isArray(c),f=d?c[1]:c,p=f===null,h=n[r+1];h===$e&&(h=p?Ae:void 0);let g=p?ii(h,o):f===o?h:void 0;if(d&&!Vi(g)&&(g=ii(c,o)),Vi(g)&&(l=g,s))return l;let m=t[r+1];r=s?Tn(m):Xn(m)}if(e!==null){let c=i?e.residualClasses:e.residualStyles;c!=null&&(l=ii(c,o))}return l}function Vi(t){return t!==void 0}function XC(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Ht($i(t)))),t}function yg(t,e){return(t.flags&(e?8:16))!==0}function _(t,e=""){let n=V(),o=ge(),r=t+Ee,i=o.firstCreatePass?Yi(o,r,1,e,null):o.data[r],s=eD(o,n,i,e,t);n[r]=s,yi()&&Vu(o,n,s,i),qn(i,!1)}var eD=(t,e,n,o,r)=>(vi(!0),uE(e[ie],o));function tD(t,e,n,o=""){return It(t,En(),n)?e+ti(n)+o:$e}function St(t){return me("",t),St}function me(t,e,n){let o=V(),r=tD(o,t,e,n);return r!==$e&&nD(o,xt(),r),me}function nD(t,e,n){let o=yl(e,t);cE(t[ie],o,n)}function es(t,e,n){Wu(e)&&(e=e());let o=V(),r=En();if(It(o,r,e)){let i=ge(),s=mi();Th(s,o,t,e,o[ie],n)}return es}function Zu(t,e){let n=Wu(t);return n&&t.set(e),n}function ts(t,e){let n=V(),o=ge(),r=Me();return cg(o,n,n[ie],r,t,e),ts}function Rp(t,e,n){let o=ge();o.firstCreatePass&&vg(e,o.data,o.blueprint,vt(t),n)}function vg(t,e,n,o,r){if(t=ve(t),Array.isArray(t))for(let i=0;i<t.length;i++)vg(t[i],e,n,o,r);else{let i=ge(),s=V(),l=Me(),c=cn(t)?t:ve(t.provide),d=dl(t),f=l.providerIndexes&1048575,p=l.directiveStart,h=l.providerIndexes>>20;if(cn(t)||!t.multi){let g=new Cn(d,r,ce,null),m=Yl(c,e,r?f:f+h,p);m===-1?(Zl(Mi(l,s),i,c),Jl(i,t,e.length),e.push(c),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),n.push(g),s.push(g)):(n[m]=g,s[m]=g)}else{let g=Yl(c,e,f+h,p),m=Yl(c,e,f,f+h),y=g>=0&&n[g],E=m>=0&&n[m];if(r&&!E||!r&&!y){Zl(Mi(l,s),i,c);let v=iD(r?rD:oD,n.length,r,o,d,t);!r&&E&&(n[m].providerFactory=v),Jl(i,t,e.length,0),e.push(c),l.directiveStart++,l.directiveEnd++,r&&(l.providerIndexes+=1048576),n.push(v),s.push(v)}else{let v=Eg(n[r?m:g],d,!r&&o);Jl(i,t,g>-1?g:m,v)}!r&&o&&E&&n[m].componentProviders++}}}function Jl(t,e,n,o){let r=cn(e),i=Mf(e);if(r||i){let c=(i?ve(e.useClass):e).prototype.ngOnDestroy;if(c){let d=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){let f=d.indexOf(n);f===-1?d.push(n,[o,c]):d[f+1].push(o,c)}else d.push(n,c)}}}function Eg(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Yl(t,e,n,o){for(let r=n;r<o;r++)if(e[r]===t)return r;return-1}function oD(t,e,n,o,r){return Tu(this.multi,[])}function rD(t,e,n,o,r){let i=this.multi,s;if(this.providerFactory){let l=this.providerFactory.componentProviders,c=Oo(o,o[A],this.providerFactory.index,r);s=c.slice(0,l),Tu(i,s);for(let d=l;d<c.length;d++)s.push(c[d])}else s=[],Tu(i,s);return s}function Tu(t,e){for(let n=0;n<t.length;n++){let o=t[n];e.push(o())}return e}function iD(t,e,n,o,r,i){let s=new Cn(t,n,ce,null);return s.multi=[],s.index=e,s.componentProviders=0,Eg(s,r,o&&!n),s}function nr(t,e){return n=>{n.providersResolver=(o,r)=>Rp(o,r?r(t):t,!1),e&&(n.viewProvidersResolver=(o,r)=>Rp(o,r?r(e):e,!0))}}function Qu(t,e,n,o,r,i,s){return aD(V(),$f(),t,e,n,o,r,i,s)}function sD(t,e){let n=t[e];return n===$e?void 0:n}function aD(t,e,n,o,r,i,s,l,c){let d=e+n;return U_(t,d,r,i,s,l)?V_(t,d+4,c?o.call(c,r,i,s,l):o(r,i,s,l)):sD(t,d+4)}var _g=(()=>{class t{applicationErrorHandler=H(jn);appRef=H(Zo);taskService=H(Wn);ngZone=H(Ve);zonelessEnabled=H(Fo);tracing=H(jo,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new we;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Co):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(H(Vl,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let o=this.useMicrotaskScheduler?kl:Fl;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>o(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>o(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Co+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(o){this.taskService.remove(n),this.applicationErrorHandler(o)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,kl(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(o){return new(o||t)};static \u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Xu(){return Sn("NgZoneless"),ll([...ec(),[]])}function ec(){return[{provide:Vn,useExisting:_g},{provide:Ve,useClass:Do},{provide:Fo,useValue:!0}]}function lD(){return typeof $localize<"u"&&$localize.locale||Xo}var tc=new B("",{factory:()=>H(tc,{optional:!0,skipSelf:!0})||lD()});function Zt(t,e){return Ar(t,e?.equal)}var nc=new B(""),vD=new B("");function or(t){return!t.moduleRef}function ED(t){let e=or(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Ve);return n.run(()=>{or(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let o=e.get(jn),r;if(n.runOutsideAngular(()=>{r=n.onError.subscribe({next:o})}),or(t)){let i=()=>e.destroy(),s=t.platformInjector.get(nc);s.add(i),e.onDestroy(()=>{r.unsubscribe(),s.delete(i)})}else{let i=()=>t.moduleRef.destroy(),s=t.platformInjector.get(nc);s.add(i),t.moduleRef.onDestroy(()=>{Lo(t.allPlatformModules,t.moduleRef),r.unsubscribe(),s.delete(i)})}return CD(o,n,()=>{let i=e.get(Wn),s=i.add(),l=e.get(Ju);return l.runInitializers(),l.donePromise.then(()=>{let c=e.get(tc,Xo);if(ug(c||Xo),!e.get(vD,!0))return or(t)?e.get(Zo):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(or(t)){let f=e.get(Zo);return t.rootComponent!==void 0&&f.bootstrap(t.rootComponent),f}else return _D?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void i.remove(s))})})}var _D;function CD(t,e,n){try{let o=n();return Ko(o)?o.catch(r=>{throw e.runOutsideAngular(()=>t(r)),r}):o}catch(o){throw e.runOutsideAngular(()=>t(o)),o}}var ns=null;function DD(t=[],e){return Gt.create({name:e,providers:[{provide:So,useValue:"platform"},{provide:nc,useValue:new Set([()=>ns=null])},...t]})}function ID(t=[]){if(ns)return ns;let e=DD(t);return ns=e,sg(),TD(e),e}function TD(t){let e=t.get(Bi,null);si(t,()=>{e?.forEach(n=>n())})}var oc=(()=>{class t{static __NG_ELEMENT_ID__=SD}return t})();function SD(t){return wD(Me(),V(),(t&16)===16)}function wD(t,e,n){if(Jt(t)&&!n){let o=Ge(t.index,e);return new Kt(o,o)}else if(t.type&175){let o=e[ke];return new Kt(o,e)}return null}function Cg(t){let{rootComponent:e,appProviders:n,platformProviders:o,platformRef:r}=t;oe(j.BootstrapApplicationStart);try{let i=r?.injector??ID(o),s=[ec(),rp,...n||[]],l=new Go({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return ED({r3Injector:l.injector,platformInjector:i,rootComponent:e})}catch(i){return Promise.reject(i)}finally{oe(j.BootstrapApplicationEnd)}}function Dg(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var Ig=null;function Qt(){return Ig}function rc(t){Ig??=t}var ir=class{};var je=(()=>{class t{static \u0275fac=function(o){return new(o||t)};static \u0275mod=wn({type:t});static \u0275inj=qt({})}return t})();function ic(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let o=n.indexOf("="),[r,i]=o==-1?[n,""]:[n.slice(0,o),n.slice(o+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}var sr=class{};var Tg="browser";var ar=class{_doc;constructor(e){this._doc=e}manager},os=(()=>{class t extends ar{constructor(n){super(n)}supports(n){return!0}addEventListener(n,o,r,i){return n.addEventListener(o,r,i),()=>this.removeEventListener(n,o,r,i)}removeEventListener(n,o,r,i){return n.removeEventListener(o,r,i)}static \u0275fac=function(o){return new(o||t)(Z(Xe))};static \u0275prov=re({token:t,factory:t.\u0275fac})}return t})(),ss=new B(""),uc=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,o){this._zone=o,n.forEach(s=>{s.manager=this});let r=n.filter(s=>!(s instanceof os));this._plugins=r.slice().reverse();let i=n.find(s=>s instanceof os);i&&this._plugins.push(i)}addEventListener(n,o,r,i){return this._findPluginFor(o).addEventListener(n,o,r,i)}getZone(){return this._zone}_findPluginFor(n){let o=this._eventNameToPlugin.get(n);if(o)return o;if(o=this._plugins.find(i=>i.supports(n)),!o)throw new O(5101,!1);return this._eventNameToPlugin.set(n,o),o}static \u0275fac=function(o){return new(o||t)(Z(ss),Z(Ve))};static \u0275prov=re({token:t,factory:t.\u0275fac})}return t})(),sc="ng-app-id";function Sg(t){for(let e of t)e.remove()}function wg(t,e){let n=e.createElement("style");return n.textContent=t,n}function MD(t,e,n,o){let r=t.head?.querySelectorAll(`style[${sc}="${e}"],link[${sc}="${e}"]`);if(r)for(let i of r)i.removeAttribute(sc),i instanceof HTMLLinkElement?o.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&n.set(i.textContent,{usage:0,elements:[i]})}function lc(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var cc=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,o,r,i={}){this.doc=n,this.appId=o,this.nonce=r,MD(n,o,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,o){for(let r of n)this.addUsage(r,this.inline,wg);o?.forEach(r=>this.addUsage(r,this.external,lc))}removeStyles(n,o){for(let r of n)this.removeUsage(r,this.inline);o?.forEach(r=>this.removeUsage(r,this.external))}addUsage(n,o,r){let i=o.get(n);i?i.usage++:o.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,r(n,this.doc)))})}removeUsage(n,o){let r=o.get(n);r&&(r.usage--,r.usage<=0&&(Sg(r.elements),o.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])Sg(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[o,{elements:r}]of this.inline)r.push(this.addElement(n,wg(o,this.doc)));for(let[o,{elements:r}]of this.external)r.push(this.addElement(n,lc(o,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,o){return this.nonce&&o.setAttribute("nonce",this.nonce),n.appendChild(o)}static \u0275fac=function(o){return new(o||t)(Z(Xe),Z(Hi),Z(Gi,8),Z(zo))};static \u0275prov=re({token:t,factory:t.\u0275fac})}return t})(),ac={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},dc=/%COMP%/g;var Mg="%COMP%",bD=`_nghost-${Mg}`,ND=`_ngcontent-${Mg}`,xD=!0,RD=new B("",{factory:()=>xD});function PD(t){return ND.replace(dc,t)}function FD(t){return bD.replace(dc,t)}function bg(t,e){return e.map(n=>n.replace(dc,t))}var fc=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,o,r,i,s,l,c=null,d=null){this.eventManager=n,this.sharedStylesHost=o,this.appId=r,this.removeStylesOnCompDestroy=i,this.doc=s,this.ngZone=l,this.nonce=c,this.tracingService=d,this.defaultRenderer=new lr(n,s,l,this.tracingService)}createRenderer(n,o){if(!n||!o)return this.defaultRenderer;let r=this.getOrCreateRenderer(n,o);return r instanceof is?r.applyToHost(n):r instanceof ur&&r.applyStyles(),r}getOrCreateRenderer(n,o){let r=this.rendererByCompId,i=r.get(o.id);if(!i){let s=this.doc,l=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.tracingService;switch(o.encapsulation){case nt.Emulated:i=new is(c,d,o,this.appId,f,s,l,p);break;case nt.ShadowDom:return new rs(c,n,o,s,l,this.nonce,p,d);case nt.ExperimentalIsolatedShadowDom:return new rs(c,n,o,s,l,this.nonce,p);default:i=new ur(c,d,o,f,s,l,p);break}r.set(o.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(o){return new(o||t)(Z(uc),Z(cc),Z(Hi),Z(RD),Z(Xe),Z(Ve),Z(Gi),Z(jo,8))};static \u0275prov=re({token:t,factory:t.\u0275fac})}return t})(),lr=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,o,r){this.eventManager=e,this.doc=n,this.ngZone=o,this.tracingService=r}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(ac[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Ag(e)?e.content:e).appendChild(n)}insertBefore(e,n,o){e&&(Ag(e)?e.content:e).insertBefore(n,o)}removeChild(e,n){n.remove()}selectRootElement(e,n){let o=typeof e=="string"?this.doc.querySelector(e):e;if(!o)throw new O(-5104,!1);return n||(o.textContent=""),o}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,o,r){if(r){n=r+":"+n;let i=ac[r];i?e.setAttributeNS(i,n,o):e.setAttribute(n,o)}else e.setAttribute(n,o)}removeAttribute(e,n,o){if(o){let r=ac[o];r?e.removeAttributeNS(r,n):e.removeAttribute(`${o}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,o,r){r&(Pt.DashCase|Pt.Important)?e.style.setProperty(n,o,r&Pt.Important?"important":""):e.style[n]=o}removeStyle(e,n,o){o&Pt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,o){e!=null&&(e[n]=o)}setValue(e,n){e.nodeValue=n}listen(e,n,o,r){if(typeof e=="string"&&(e=Qt().getGlobalEventTarget(this.doc,e),!e))throw new O(5102,!1);let i=this.decoratePreventDefault(o);return this.tracingService?.wrapEventListener&&(i=this.tracingService.wrapEventListener(e,n,i)),this.eventManager.addEventListener(e,n,i,r)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function Ag(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var rs=class extends lr{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,o,r,i,s,l,c){super(e,r,i,l),this.hostEl=n,this.sharedStylesHost=c,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let d=o.styles;d=bg(o.id,d);for(let p of d){let h=document.createElement("style");s&&h.setAttribute("nonce",s),h.textContent=p,this.shadowRoot.appendChild(h)}let f=o.getExternalStyles?.();if(f)for(let p of f){let h=lc(p,r);s&&h.setAttribute("nonce",s),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,o){return super.insertBefore(this.nodeOrShadowRoot(e),n,o)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},ur=class extends lr{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,o,r,i,s,l,c){super(e,i,s,l),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r;let d=o.styles;this.styles=c?bg(c,d):d,this.styleUrls=o.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Dn.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},is=class extends ur{contentAttr;hostAttr;constructor(e,n,o,r,i,s,l,c){let d=r+"-"+o.id;super(e,n,o,i,s,l,c,d),this.contentAttr=PD(d),this.hostAttr=FD(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let o=super.createElement(e,n);return super.setAttribute(o,this.contentAttr,""),o}};var as=class t extends ir{supportsDOMEvents=!0;static makeCurrent(){rc(new t)}onAndCancel(e,n,o,r){return e.addEventListener(n,o,r),()=>{e.removeEventListener(n,o,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=kD();return n==null?null:LD(n)}resetBaseElement(){cr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ic(document.cookie,e)}},cr=null;function kD(){return cr=cr||document.head.querySelector("base"),cr?cr.getAttribute("href"):null}function LD(t){return new URL(t,document.baseURI).pathname}var OD=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(o){return new(o||t)};static \u0275prov=re({token:t,factory:t.\u0275fac})}return t})(),Ng=["alt","control","meta","shift"],VD={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},UD={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},xg=(()=>{class t extends ar{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,o,r,i){let s=t.parseEventName(o),l=t.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Qt().onAndCancel(n,s.domEventName,l,i))}static parseEventName(n){let o=n.toLowerCase().split("."),r=o.shift();if(o.length===0||!(r==="keydown"||r==="keyup"))return null;let i=t._normalizeKey(o.pop()),s="",l=o.indexOf("code");if(l>-1&&(o.splice(l,1),s="code."),Ng.forEach(d=>{let f=o.indexOf(d);f>-1&&(o.splice(f,1),s+=d+".")}),s+=i,o.length!=0||i.length===0)return null;let c={};return c.domEventName=r,c.fullKey=s,c}static matchEventFullKeyCode(n,o){let r=VD[n.key]||n.key,i="";return o.indexOf("code.")>-1&&(r=n.code,i="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),Ng.forEach(s=>{if(s!==r){let l=UD[s];l(n)&&(i+=s+".")}}),i+=r,i===o)}static eventCallback(n,o,r){return i=>{t.matchEventFullKeyCode(i,n)&&r.runGuarded(()=>o(i))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(o){return new(o||t)(Z(Xe))};static \u0275prov=re({token:t,factory:t.\u0275fac})}return t})();function pc(t,e,n){let o=q({rootComponent:t,platformRef:n?.platformRef},HD(e));return Cg(o)}function HD(t){return{appProviders:[...zD,...t?.providers??[]],platformProviders:qD}}function BD(){as.makeCurrent()}function GD(){return new bt}function $D(){return Mu(document),document}var qD=[{provide:zo,useValue:Tg},{provide:Bi,useValue:BD,multi:!0},{provide:Xe,useFactory:$D}];var zD=[{provide:So,useValue:"root"},{provide:bt,useFactory:GD},{provide:ss,useClass:os,multi:!0},{provide:ss,useClass:xg,multi:!0},fc,cc,uc,{provide:In,useExisting:fc},{provide:sr,useClass:OD},[]];var WD,jD;function JD(){return{geminiUrl:WD,vertexUrl:jD}}function YD(t,e,n,o){var r,i;if(!t?.baseUrl){let s=JD();return e?(r=s.vertexUrl)!==null&&r!==void 0?r:n:(i=s.geminiUrl)!==null&&i!==void 0?i:o}return t.baseUrl}var ct=class{};function I(t,e){let n=/\{([^}]+)\}/g;return t.replace(n,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){let i=e[r];return i!=null?String(i):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function u(t,e,n){for(let i=0;i<e.length-1;i++){let s=e[i];if(s.endsWith("[]")){let l=s.slice(0,-2);if(!(l in t))if(Array.isArray(n))t[l]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[l])){let c=t[l];if(Array.isArray(n))for(let d=0;d<c.length;d++){let f=c[d];u(f,e.slice(i+1),n[d])}else for(let d of c)u(d,e.slice(i+1),n)}return}else if(s.endsWith("[0]")){let l=s.slice(0,-3);l in t||(t[l]=[{}]);let c=t[l];u(c[0],e.slice(i+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}let o=e[e.length-1],r=t[o];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function a(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;let r=e[o];if(r.endsWith("[]")){let i=r.slice(0,-2);if(i in t){let s=t[i];return Array.isArray(s)?s.map(l=>a(l,e.slice(o+1),n)):n}else return n}else t=t[r]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function KD(t,e){for(let[n,o]of Object.entries(e)){let r=n.split("."),i=o.split("."),s=new Set,l=-1;for(let c=0;c<r.length;c++)if(r[c]==="*"){l=c;break}if(l!==-1&&i.length>l)for(let c=l;c<i.length;c++){let d=i[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&s.add(d)}mc(t,r,i,0,s)}}function mc(t,e,n,o,r){if(o>=e.length||typeof t!="object"||t===null)return;let i=e[o];if(i.endsWith("[]")){let s=i.slice(0,-2),l=t;if(s in l&&Array.isArray(l[s]))for(let c of l[s])mc(c,e,n,o+1,r)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){let s=t,l=Object.keys(s).filter(d=>!d.startsWith("_")&&!r.has(d)),c={};for(let d of l)c[d]=s[d];for(let[d,f]of Object.entries(c)){let p=[];for(let h of n.slice(o))h==="*"?p.push(d):p.push(h);u(s,p,f)}for(let d of l)delete s[d]}}else{let s=t;i in s&&mc(s[i],e,n,o+1,r)}}function hd(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}function ZD(t){let e={},n=a(t,["operationName"]);n!=null&&u(e,["operationName"],n);let o=a(t,["resourceName"]);return o!=null&&u(e,["_url","resourceName"],o),e}function QD(t){let e={},n=a(t,["name"]);n!=null&&u(e,["name"],n);let o=a(t,["metadata"]);o!=null&&u(e,["metadata"],o);let r=a(t,["done"]);r!=null&&u(e,["done"],r);let i=a(t,["error"]);i!=null&&u(e,["error"],i);let s=a(t,["response","generateVideoResponse"]);return s!=null&&u(e,["response"],eI(s)),e}function XD(t){let e={},n=a(t,["name"]);n!=null&&u(e,["name"],n);let o=a(t,["metadata"]);o!=null&&u(e,["metadata"],o);let r=a(t,["done"]);r!=null&&u(e,["done"],r);let i=a(t,["error"]);i!=null&&u(e,["error"],i);let s=a(t,["response"]);return s!=null&&u(e,["response"],tI(s)),e}function eI(t){let e={},n=a(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>nI(s))),u(e,["generatedVideos"],i)}let o=a(t,["raiMediaFilteredCount"]);o!=null&&u(e,["raiMediaFilteredCount"],o);let r=a(t,["raiMediaFilteredReasons"]);return r!=null&&u(e,["raiMediaFilteredReasons"],r),e}function tI(t){let e={},n=a(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>oI(s))),u(e,["generatedVideos"],i)}let o=a(t,["raiMediaFilteredCount"]);o!=null&&u(e,["raiMediaFilteredCount"],o);let r=a(t,["raiMediaFilteredReasons"]);return r!=null&&u(e,["raiMediaFilteredReasons"],r),e}function nI(t){let e={},n=a(t,["video"]);return n!=null&&u(e,["video"],uI(n)),e}function oI(t){let e={},n=a(t,["_self"]);return n!=null&&u(e,["video"],cI(n)),e}function rI(t){let e={},n=a(t,["operationName"]);return n!=null&&u(e,["_url","operationName"],n),e}function iI(t){let e={},n=a(t,["operationName"]);return n!=null&&u(e,["_url","operationName"],n),e}function sI(t){let e={},n=a(t,["name"]);n!=null&&u(e,["name"],n);let o=a(t,["metadata"]);o!=null&&u(e,["metadata"],o);let r=a(t,["done"]);r!=null&&u(e,["done"],r);let i=a(t,["error"]);i!=null&&u(e,["error"],i);let s=a(t,["response"]);return s!=null&&u(e,["response"],aI(s)),e}function aI(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["parent"]);o!=null&&u(e,["parent"],o);let r=a(t,["documentName"]);return r!=null&&u(e,["documentName"],r),e}function om(t){let e={},n=a(t,["name"]);n!=null&&u(e,["name"],n);let o=a(t,["metadata"]);o!=null&&u(e,["metadata"],o);let r=a(t,["done"]);r!=null&&u(e,["done"],r);let i=a(t,["error"]);i!=null&&u(e,["error"],i);let s=a(t,["response"]);return s!=null&&u(e,["response"],lI(s)),e}function lI(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["parent"]);o!=null&&u(e,["parent"],o);let r=a(t,["documentName"]);return r!=null&&u(e,["documentName"],r),e}function uI(t){let e={},n=a(t,["uri"]);n!=null&&u(e,["uri"],n);let o=a(t,["encodedVideo"]);o!=null&&u(e,["videoBytes"],hd(o));let r=a(t,["encoding"]);return r!=null&&u(e,["mimeType"],r),e}function cI(t){let e={},n=a(t,["gcsUri"]);n!=null&&u(e,["uri"],n);let o=a(t,["bytesBase64Encoded"]);o!=null&&u(e,["videoBytes"],hd(o));let r=a(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}var Ce=(function(t){return t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL",t})(Ce||{});var yc=(function(t){return t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO",t})(yc||{});var rm=(function(t){return t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED",t})(rm||{});var fr=(function(t){return t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT",t})(fr||{});var hr=class{constructor(e){let n={};for(let o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}};var Mn=class{get text(){var e,n,o,r,i,s,l,c;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1,p=[];for(let h of(c=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(let[g,m]of Object.entries(h))g!=="text"&&g!=="thought"&&g!=="thoughtSignature"&&(m!==null||m!==void 0)&&p.push(g);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;f=!0,d+=h.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,o,r,i,s,l,c;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="",f=[];for(let p of(c=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)!==null&&c!==void 0?c:[]){for(let[h,g]of Object.entries(p))h!=="inlineData"&&(g!==null||g!==void 0)&&f.push(h);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,o,r,i,s,l,c;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");let d=(c=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if(d?.length!==0)return d}get executableCode(){var e,n,o,r,i,s,l,c,d;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");let f=(c=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if(f?.length!==0)return(d=f?.[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,o,r,i,s,l,c,d;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");let f=(c=(l=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if(f?.length!==0)return(d=f?.[0])===null||d===void 0?void 0:d.output}},gs=class{},ms=class{},vc=class{},Ec=class{},_c=class{},Cc=class{},ys=class{},vs=class{},Es=class{},Dc=class{};var _s=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let o=new t,r,i=e;return n?r=XD(i):r=QD(i),Object.assign(o,r),o}},Cs=class{},Ds=class{},Is=class{},Ts=class{},Ic=class{},Tc=class{},Sc=class{};var wc=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let o=new t,i=sI(e);return Object.assign(o,i),o}},Ac=class{},Mc=class{},bc=class{};var Ss=class{};var Nc=class{get text(){var e,n,o;let r="",i=!1,s=[];for(let l of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(let[c,d]of Object.entries(l))c!=="text"&&c!=="thought"&&d!==null&&s.push(c);if(typeof l.text=="string"){if(typeof l.thought=="boolean"&&l.thought)continue;i=!0,r+=l.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?r:void 0}get data(){var e,n,o;let r="",i=[];for(let s of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(let[l,c]of Object.entries(s))l!=="inlineData"&&c!==null&&i.push(l);s.inlineData&&typeof s.inlineData.data=="string"&&(r+=atob(s.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}};var xc=class{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}};var Rc=class t{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){let o=new t,i=om(e);return Object.assign(o,i),o}};function W(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){let n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function im(t,e){let n=W(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function sm(t){return Array.isArray(t)?t.map(e=>ws(e)):[ws(t)]}function ws(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function am(t){let e=ws(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function lm(t){let e=ws(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Rg(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function um(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>Rg(e)):[Rg(t)]}function Pc(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function Pg(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function Fg(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Se(t){if(t==null)throw new Error("ContentUnion is required");return Pc(t)?t:{role:"user",parts:um(t)}}function gd(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{let o=Se(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){let n=Se(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Se(n)):[Se(e)]}function Je(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(Pg(t)||Fg(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Se(t)]}let e=[],n=[],o=Pc(t[0]);for(let r of t){let i=Pc(r);if(i!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(r);else{if(Pg(r)||Fg(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return o||e.push({role:"user",parts:um(n)}),e}function dI(t,e){t.includes("null")&&(e.nullable=!0);let n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(Ce).includes(n[0].toUpperCase())?n[0].toUpperCase():Ce.TYPE_UNSPECIFIED;else{e.anyOf=[];for(let o of n)e.anyOf.push({type:Object.values(Ce).includes(o.toUpperCase())?o.toUpperCase():Ce.TYPE_UNSPECIFIED})}}function oo(t){let e={},n=["items"],o=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");let i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&dI(t.type,e);for(let[s,l]of Object.entries(t))if(l!=null)if(s=="type"){if(l==="null")throw new Error("type: null can not be the only possible type for the field.");if(l instanceof Array)continue;e.type=Object.values(Ce).includes(l.toUpperCase())?l.toUpperCase():Ce.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=oo(l);else if(o.includes(s)){let c=[];for(let d of l){if(d.type=="null"){e.nullable=!0;continue}c.push(oo(d))}e[s]=c}else if(r.includes(s)){let c={};for(let[d,f]of Object.entries(l))c[d]=oo(f);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=l}return e}function md(t){return oo(t)}function yd(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function vd(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function ao(t){if(t.functionDeclarations)for(let e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=oo(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=oo(e.response));return t}function lo(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");let e=[];for(let n of t)e.push(n);return e}function fI(t,e,n,o=1){let r=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function Ot(t,e){if(typeof e!="string")throw new Error("name must be a string");return fI(t,e,"cachedContents")}function cm(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Xt(t){return hd(t)}function pI(t){return t!=null&&typeof t=="object"&&"name"in t}function hI(t){return t!=null&&typeof t=="object"&&"video"in t}function gI(t){return t!=null&&typeof t=="object"&&"uri"in t}function dm(t){var e;let n;if(pI(t)&&(n=t.name),!(gI(t)&&(n=t.uri,n===void 0))&&!(hI(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){let r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function fm(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function pm(t){for(let e of["models","tunedModels","publisherModels"])if(mI(t,e))return t[e];return[]}function mI(t,e){return t!==null&&typeof t=="object"&&e in t}function yI(t,e={}){let n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function vI(t,e={}){let n=[],o=new Set;for(let r of t){let i=r.name;if(o.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);o.add(i);let s=yI(r,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function hm(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;let o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function EI(t){if(typeof t!="string")return t;let e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function gm(t){if(typeof t!="object"||t===null)return{};let e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;let r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let i=!1;for(let s of r){if(typeof s!="object"||s===null)continue;let c=s.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function uo(t,e){let n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function mm(t){let e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function _I(t){let e={},n=a(t,["responsesFile"]);n!=null&&u(e,["fileName"],n);let o=a(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>eT(s))),u(e,["inlinedResponses"],i)}let r=a(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["inlinedEmbedContentResponses"],i)}return e}function CI(t){let e={},n=a(t,["predictionsFormat"]);n!=null&&u(e,["format"],n);let o=a(t,["gcsDestination","outputUriPrefix"]);o!=null&&u(e,["gcsUri"],o);let r=a(t,["bigqueryDestination","outputUri"]);return r!=null&&u(e,["bigqueryUri"],r),e}function DI(t){let e={},n=a(t,["format"]);n!=null&&u(e,["predictionsFormat"],n);let o=a(t,["gcsUri"]);o!=null&&u(e,["gcsDestination","outputUriPrefix"],o);let r=a(t,["bigqueryUri"]);if(r!=null&&u(e,["bigqueryDestination","outputUri"],r),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ps(t){let e={},n=a(t,["name"]);n!=null&&u(e,["name"],n);let o=a(t,["metadata","displayName"]);o!=null&&u(e,["displayName"],o);let r=a(t,["metadata","state"]);r!=null&&u(e,["state"],mm(r));let i=a(t,["metadata","createTime"]);i!=null&&u(e,["createTime"],i);let s=a(t,["metadata","endTime"]);s!=null&&u(e,["endTime"],s);let l=a(t,["metadata","updateTime"]);l!=null&&u(e,["updateTime"],l);let c=a(t,["metadata","model"]);c!=null&&u(e,["model"],c);let d=a(t,["metadata","output"]);return d!=null&&u(e,["dest"],_I(gm(d))),e}function Fc(t){let e={},n=a(t,["name"]);n!=null&&u(e,["name"],n);let o=a(t,["displayName"]);o!=null&&u(e,["displayName"],o);let r=a(t,["state"]);r!=null&&u(e,["state"],mm(r));let i=a(t,["error"]);i!=null&&u(e,["error"],i);let s=a(t,["createTime"]);s!=null&&u(e,["createTime"],s);let l=a(t,["startTime"]);l!=null&&u(e,["startTime"],l);let c=a(t,["endTime"]);c!=null&&u(e,["endTime"],c);let d=a(t,["updateTime"]);d!=null&&u(e,["updateTime"],d);let f=a(t,["model"]);f!=null&&u(e,["model"],f);let p=a(t,["inputConfig"]);p!=null&&u(e,["src"],II(p));let h=a(t,["outputConfig"]);h!=null&&u(e,["dest"],CI(gm(h)));let g=a(t,["completionStats"]);return g!=null&&u(e,["completionStats"],g),e}function II(t){let e={},n=a(t,["instancesFormat"]);n!=null&&u(e,["format"],n);let o=a(t,["gcsSource","uris"]);o!=null&&u(e,["gcsUri"],o);let r=a(t,["bigquerySource","inputUri"]);return r!=null&&u(e,["bigqueryUri"],r),e}function TI(t,e){let n={};if(a(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");let o=a(e,["fileName"]);o!=null&&u(n,["fileName"],o);let r=a(e,["inlinedRequests"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>XI(t,s))),u(n,["requests","requests"],i)}return n}function SI(t){let e={},n=a(t,["format"]);n!=null&&u(e,["instancesFormat"],n);let o=a(t,["gcsUri"]);o!=null&&u(e,["gcsSource","uris"],o);let r=a(t,["bigqueryUri"]);if(r!=null&&u(e,["bigquerySource","inputUri"],r),a(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function wI(t){let e={},n=a(t,["data"]);if(n!=null&&u(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function AI(t,e){let n={},o=a(e,["name"]);return o!=null&&u(n,["_url","name"],uo(t,o)),n}function MI(t,e){let n={},o=a(e,["name"]);return o!=null&&u(n,["_url","name"],uo(t,o)),n}function bI(t){let e={},n=a(t,["content"]);n!=null&&u(e,["content"],n);let o=a(t,["citationMetadata"]);o!=null&&u(e,["citationMetadata"],NI(o));let r=a(t,["tokenCount"]);r!=null&&u(e,["tokenCount"],r);let i=a(t,["finishReason"]);i!=null&&u(e,["finishReason"],i);let s=a(t,["avgLogprobs"]);s!=null&&u(e,["avgLogprobs"],s);let l=a(t,["groundingMetadata"]);l!=null&&u(e,["groundingMetadata"],l);let c=a(t,["index"]);c!=null&&u(e,["index"],c);let d=a(t,["logprobsResult"]);d!=null&&u(e,["logprobsResult"],d);let f=a(t,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>g)),u(e,["safetyRatings"],h)}let p=a(t,["urlContextMetadata"]);return p!=null&&u(e,["urlContextMetadata"],p),e}function NI(t){let e={},n=a(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),u(e,["citations"],o)}return e}function ym(t){let e={},n=a(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>aT(i))),u(e,["parts"],r)}let o=a(t,["role"]);return o!=null&&u(e,["role"],o),e}function xI(t,e){let n={},o=a(t,["displayName"]);if(e!==void 0&&o!=null&&u(e,["batch","displayName"],o),a(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function RI(t,e){let n={},o=a(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);let r=a(t,["dest"]);return e!==void 0&&r!=null&&u(e,["outputConfig"],DI(EI(r))),n}function kg(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],W(t,o));let r=a(e,["src"]);r!=null&&u(n,["batch","inputConfig"],TI(t,hm(t,r)));let i=a(e,["config"]);return i!=null&&xI(i,n),n}function PI(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["model"],W(t,o));let r=a(e,["src"]);r!=null&&u(n,["inputConfig"],SI(hm(t,r)));let i=a(e,["config"]);return i!=null&&RI(i,n),n}function FI(t,e){let n={},o=a(t,["displayName"]);return e!==void 0&&o!=null&&u(e,["batch","displayName"],o),n}function kI(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],W(t,o));let r=a(e,["src"]);r!=null&&u(n,["batch","inputConfig"],GI(t,r));let i=a(e,["config"]);return i!=null&&FI(i,n),n}function LI(t,e){let n={},o=a(e,["name"]);return o!=null&&u(n,["_url","name"],uo(t,o)),n}function OI(t,e){let n={},o=a(e,["name"]);return o!=null&&u(n,["_url","name"],uo(t,o)),n}function VI(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["name"]);o!=null&&u(e,["name"],o);let r=a(t,["done"]);r!=null&&u(e,["done"],r);let i=a(t,["error"]);return i!=null&&u(e,["error"],i),e}function UI(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["name"]);o!=null&&u(e,["name"],o);let r=a(t,["done"]);r!=null&&u(e,["done"],r);let i=a(t,["error"]);return i!=null&&u(e,["error"],i),e}function HI(t,e){let n={},o=a(e,["contents"]);if(o!=null){let i=gd(t,o);Array.isArray(i)&&(i=i.map(s=>s)),u(n,["requests[]","request","content"],i)}let r=a(e,["config"]);return r!=null&&(u(n,["_self"],BI(r,n)),KD(n,{"requests[].*":"requests[].request.*"})),n}function BI(t,e){let n={},o=a(t,["taskType"]);e!==void 0&&o!=null&&u(e,["requests[]","taskType"],o);let r=a(t,["title"]);e!==void 0&&r!=null&&u(e,["requests[]","title"],r);let i=a(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&u(e,["requests[]","outputDimensionality"],i),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function GI(t,e){let n={},o=a(e,["fileName"]);o!=null&&u(n,["file_name"],o);let r=a(e,["inlinedRequests"]);return r!=null&&u(n,["requests"],HI(t,r)),n}function $I(t){let e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=a(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);let o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function qI(t){let e={},n=a(t,["id"]);n!=null&&u(e,["id"],n);let o=a(t,["args"]);o!=null&&u(e,["args"],o);let r=a(t,["name"]);if(r!=null&&u(e,["name"],r),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function zI(t){let e={},n=a(t,["mode"]);n!=null&&u(e,["mode"],n);let o=a(t,["allowedFunctionNames"]);if(o!=null&&u(e,["allowedFunctionNames"],o),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function WI(t,e,n){let o={},r=a(e,["systemInstruction"]);n!==void 0&&r!=null&&u(n,["systemInstruction"],ym(Se(r)));let i=a(e,["temperature"]);i!=null&&u(o,["temperature"],i);let s=a(e,["topP"]);s!=null&&u(o,["topP"],s);let l=a(e,["topK"]);l!=null&&u(o,["topK"],l);let c=a(e,["candidateCount"]);c!=null&&u(o,["candidateCount"],c);let d=a(e,["maxOutputTokens"]);d!=null&&u(o,["maxOutputTokens"],d);let f=a(e,["stopSequences"]);f!=null&&u(o,["stopSequences"],f);let p=a(e,["responseLogprobs"]);p!=null&&u(o,["responseLogprobs"],p);let h=a(e,["logprobs"]);h!=null&&u(o,["logprobs"],h);let g=a(e,["presencePenalty"]);g!=null&&u(o,["presencePenalty"],g);let m=a(e,["frequencyPenalty"]);m!=null&&u(o,["frequencyPenalty"],m);let y=a(e,["seed"]);y!=null&&u(o,["seed"],y);let E=a(e,["responseMimeType"]);E!=null&&u(o,["responseMimeType"],E);let v=a(e,["responseSchema"]);v!=null&&u(o,["responseSchema"],md(v));let w=a(e,["responseJsonSchema"]);if(w!=null&&u(o,["responseJsonSchema"],w),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let T=a(e,["safetySettings"]);if(n!==void 0&&T!=null){let le=T;Array.isArray(le)&&(le=le.map(ft=>lT(ft))),u(n,["safetySettings"],le)}let M=a(e,["tools"]);if(n!==void 0&&M!=null){let le=lo(M);Array.isArray(le)&&(le=le.map(ft=>cT(ao(ft)))),u(n,["tools"],le)}let N=a(e,["toolConfig"]);if(n!==void 0&&N!=null&&u(n,["toolConfig"],uT(N)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let U=a(e,["cachedContent"]);n!==void 0&&U!=null&&u(n,["cachedContent"],Ot(t,U));let k=a(e,["responseModalities"]);k!=null&&u(o,["responseModalities"],k);let ae=a(e,["mediaResolution"]);ae!=null&&u(o,["mediaResolution"],ae);let R=a(e,["speechConfig"]);if(R!=null&&u(o,["speechConfig"],yd(R)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let G=a(e,["thinkingConfig"]);G!=null&&u(o,["thinkingConfig"],G);let ye=a(e,["imageConfig"]);ye!=null&&u(o,["imageConfig"],QI(ye));let Vt=a(e,["enableEnhancedCivicAnswers"]);return Vt!=null&&u(o,["enableEnhancedCivicAnswers"],Vt),o}function jI(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>bI(d))),u(e,["candidates"],c)}let r=a(t,["modelVersion"]);r!=null&&u(e,["modelVersion"],r);let i=a(t,["promptFeedback"]);i!=null&&u(e,["promptFeedback"],i);let s=a(t,["responseId"]);s!=null&&u(e,["responseId"],s);let l=a(t,["usageMetadata"]);return l!=null&&u(e,["usageMetadata"],l),e}function JI(t,e){let n={},o=a(e,["name"]);return o!=null&&u(n,["_url","name"],uo(t,o)),n}function YI(t,e){let n={},o=a(e,["name"]);return o!=null&&u(n,["_url","name"],uo(t,o)),n}function KI(t){let e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=a(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function ZI(t){let e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=a(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function QI(t){let e={},n=a(t,["aspectRatio"]);n!=null&&u(e,["aspectRatio"],n);let o=a(t,["imageSize"]);if(o!=null&&u(e,["imageSize"],o),a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function XI(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["request","model"],W(t,o));let r=a(e,["contents"]);if(r!=null){let l=Je(r);Array.isArray(l)&&(l=l.map(c=>ym(c))),u(n,["request","contents"],l)}let i=a(e,["metadata"]);i!=null&&u(n,["metadata"],i);let s=a(e,["config"]);return s!=null&&u(n,["request","generationConfig"],WI(t,s,a(n,["request"],{}))),n}function eT(t){let e={},n=a(t,["response"]);n!=null&&u(e,["response"],jI(n));let o=a(t,["error"]);return o!=null&&u(e,["error"],o),e}function tT(t,e){let n={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);let r=a(t,["pageToken"]);if(e!==void 0&&r!=null&&u(e,["_query","pageToken"],r),a(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function nT(t,e){let n={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);let r=a(t,["pageToken"]);e!==void 0&&r!=null&&u(e,["_query","pageToken"],r);let i=a(t,["filter"]);return e!==void 0&&i!=null&&u(e,["_query","filter"],i),n}function oT(t){let e={},n=a(t,["config"]);return n!=null&&tT(n,e),e}function rT(t){let e={},n=a(t,["config"]);return n!=null&&nT(n,e),e}function iT(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);let r=a(t,["operations"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>ps(s))),u(e,["batchJobs"],i)}return e}function sT(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);let r=a(t,["batchPredictionJobs"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Fc(s))),u(e,["batchJobs"],i)}return e}function aT(t){let e={},n=a(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);let o=a(t,["codeExecutionResult"]);o!=null&&u(e,["codeExecutionResult"],o);let r=a(t,["executableCode"]);r!=null&&u(e,["executableCode"],r);let i=a(t,["fileData"]);i!=null&&u(e,["fileData"],$I(i));let s=a(t,["functionCall"]);s!=null&&u(e,["functionCall"],qI(s));let l=a(t,["functionResponse"]);l!=null&&u(e,["functionResponse"],l);let c=a(t,["inlineData"]);c!=null&&u(e,["inlineData"],wI(c));let d=a(t,["text"]);d!=null&&u(e,["text"],d);let f=a(t,["thought"]);f!=null&&u(e,["thought"],f);let p=a(t,["thoughtSignature"]);p!=null&&u(e,["thoughtSignature"],p);let h=a(t,["videoMetadata"]);return h!=null&&u(e,["videoMetadata"],h),e}function lT(t){let e={},n=a(t,["category"]);if(n!=null&&u(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let o=a(t,["threshold"]);return o!=null&&u(e,["threshold"],o),e}function uT(t){let e={},n=a(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],zI(n));let o=a(t,["retrievalConfig"]);return o!=null&&u(e,["retrievalConfig"],o),e}function cT(t){let e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),u(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let o=a(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],o);let r=a(t,["computerUse"]);r!=null&&u(e,["computerUse"],r);let i=a(t,["fileSearch"]);i!=null&&u(e,["fileSearch"],i);let s=a(t,["codeExecution"]);if(s!=null&&u(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let l=a(t,["googleMaps"]);l!=null&&u(e,["googleMaps"],KI(l));let c=a(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],ZI(c));let d=a(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}var en=(function(t){return t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents",t})(en||{}),Lt=class{constructor(e,n,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,r)}init(e,n,o){var r,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n?.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!o||Object.keys(o).length===0?s={config:{}}:typeof o=="object"?s=Object.assign({},o):s=o,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(i=(r=s.config)===null||r===void 0?void 0:r.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};let e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");let e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}};var kc=class extends ct{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Lt(en.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){let n=kg(this.apiClient,e),o=n._url,r=I("{model}:batchGenerateContent",o),l=n.batch.inputConfig.requests,c=l.requests,d=[];for(let f of c){let p=Object.assign({},f);if(p.systemInstruction){let h=p.systemInstruction;delete p.systemInstruction;let g=p.request;g.systemInstruction=h,p.request=g}d.push(p)}return l.requests=d,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){let o=n?Object.assign({},n):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){let i=this.getGcsUri(e),s=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?o.dest=`${i.slice(0,-6)}/dest`:o.dest=`${i}_dest_${r}`;else if(s)o.dest=`${s}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=PI(this.apiClient,e);return l=I("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Fc(f))}else{let d=kg(this.apiClient,e);return l=I("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>ps(f))}}async createEmbeddingsInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=kI(this.apiClient,e);return i=I("{model}:asyncBatchEmbedContent",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>ps(c))}}async get(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=YI(this.apiClient,e);return l=I("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Fc(f))}else{let d=JI(this.apiClient,e);return l=I("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>ps(f))}}async cancel(e){var n,o,r,i;let s="",l={};if(this.apiClient.isVertexAI()){let c=MI(this.apiClient,e);s=I("batchPredictionJobs/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{let c=AI(this.apiClient,e);s=I("batches/{name}:cancel",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=rT(e);return l=I("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=sT(f),h=new Ss;return Object.assign(h,p),h})}else{let d=oT(e);return l=I("batches",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=iT(f),h=new Ss;return Object.assign(h,p),h})}}async delete(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=OI(this.apiClient,e);return l=I("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>UI(f))}else{let d=LI(this.apiClient,e);return l=I("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>VI(f))}}};function dT(t){let e={},n=a(t,["data"]);if(n!=null&&u(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function Lg(t){let e={},n=a(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>FT(i))),u(e,["parts"],r)}let o=a(t,["role"]);return o!=null&&u(e,["role"],o),e}function fT(t,e){let n={},o=a(t,["ttl"]);e!==void 0&&o!=null&&u(e,["ttl"],o);let r=a(t,["expireTime"]);e!==void 0&&r!=null&&u(e,["expireTime"],r);let i=a(t,["displayName"]);e!==void 0&&i!=null&&u(e,["displayName"],i);let s=a(t,["contents"]);if(e!==void 0&&s!=null){let f=Je(s);Array.isArray(f)&&(f=f.map(p=>Lg(p))),u(e,["contents"],f)}let l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&u(e,["systemInstruction"],Lg(Se(l)));let c=a(t,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(p=>LT(p))),u(e,["tools"],f)}let d=a(t,["toolConfig"]);if(e!==void 0&&d!=null&&u(e,["toolConfig"],kT(d)),a(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function pT(t,e){let n={},o=a(t,["ttl"]);e!==void 0&&o!=null&&u(e,["ttl"],o);let r=a(t,["expireTime"]);e!==void 0&&r!=null&&u(e,["expireTime"],r);let i=a(t,["displayName"]);e!==void 0&&i!=null&&u(e,["displayName"],i);let s=a(t,["contents"]);if(e!==void 0&&s!=null){let p=Je(s);Array.isArray(p)&&(p=p.map(h=>h)),u(e,["contents"],p)}let l=a(t,["systemInstruction"]);e!==void 0&&l!=null&&u(e,["systemInstruction"],Se(l));let c=a(t,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(h=>OT(h))),u(e,["tools"],p)}let d=a(t,["toolConfig"]);e!==void 0&&d!=null&&u(e,["toolConfig"],d);let f=a(t,["kmsKeyName"]);return e!==void 0&&f!=null&&u(e,["encryption_spec","kmsKeyName"],f),n}function hT(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["model"],im(t,o));let r=a(e,["config"]);return r!=null&&fT(r,n),n}function gT(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["model"],im(t,o));let r=a(e,["config"]);return r!=null&&pT(r,n),n}function mT(t,e){let n={},o=a(e,["name"]);return o!=null&&u(n,["_url","name"],Ot(t,o)),n}function yT(t,e){let n={},o=a(e,["name"]);return o!=null&&u(n,["_url","name"],Ot(t,o)),n}function vT(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function ET(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function _T(t){let e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=a(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);let o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function CT(t){let e={},n=a(t,["id"]);n!=null&&u(e,["id"],n);let o=a(t,["args"]);o!=null&&u(e,["args"],o);let r=a(t,["name"]);if(r!=null&&u(e,["name"],r),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function DT(t){let e={},n=a(t,["mode"]);n!=null&&u(e,["mode"],n);let o=a(t,["allowedFunctionNames"]);if(o!=null&&u(e,["allowedFunctionNames"],o),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function IT(t){let e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let n=a(t,["description"]);n!=null&&u(e,["description"],n);let o=a(t,["name"]);o!=null&&u(e,["name"],o);let r=a(t,["parameters"]);r!=null&&u(e,["parameters"],r);let i=a(t,["parametersJsonSchema"]);i!=null&&u(e,["parametersJsonSchema"],i);let s=a(t,["response"]);s!=null&&u(e,["response"],s);let l=a(t,["responseJsonSchema"]);return l!=null&&u(e,["responseJsonSchema"],l),e}function TT(t,e){let n={},o=a(e,["name"]);return o!=null&&u(n,["_url","name"],Ot(t,o)),n}function ST(t,e){let n={},o=a(e,["name"]);return o!=null&&u(n,["_url","name"],Ot(t,o)),n}function wT(t){let e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=a(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function AT(t){let e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=a(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function MT(t,e){let n={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);let r=a(t,["pageToken"]);return e!==void 0&&r!=null&&u(e,["_query","pageToken"],r),n}function bT(t,e){let n={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);let r=a(t,["pageToken"]);return e!==void 0&&r!=null&&u(e,["_query","pageToken"],r),n}function NT(t){let e={},n=a(t,["config"]);return n!=null&&MT(n,e),e}function xT(t){let e={},n=a(t,["config"]);return n!=null&&bT(n,e),e}function RT(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);let r=a(t,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["cachedContents"],i)}return e}function PT(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);let r=a(t,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["cachedContents"],i)}return e}function FT(t){let e={},n=a(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);let o=a(t,["codeExecutionResult"]);o!=null&&u(e,["codeExecutionResult"],o);let r=a(t,["executableCode"]);r!=null&&u(e,["executableCode"],r);let i=a(t,["fileData"]);i!=null&&u(e,["fileData"],_T(i));let s=a(t,["functionCall"]);s!=null&&u(e,["functionCall"],CT(s));let l=a(t,["functionResponse"]);l!=null&&u(e,["functionResponse"],l);let c=a(t,["inlineData"]);c!=null&&u(e,["inlineData"],dT(c));let d=a(t,["text"]);d!=null&&u(e,["text"],d);let f=a(t,["thought"]);f!=null&&u(e,["thought"],f);let p=a(t,["thoughtSignature"]);p!=null&&u(e,["thoughtSignature"],p);let h=a(t,["videoMetadata"]);return h!=null&&u(e,["videoMetadata"],h),e}function kT(t){let e={},n=a(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],DT(n));let o=a(t,["retrievalConfig"]);return o!=null&&u(e,["retrievalConfig"],o),e}function LT(t){let e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),u(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let o=a(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],o);let r=a(t,["computerUse"]);r!=null&&u(e,["computerUse"],r);let i=a(t,["fileSearch"]);i!=null&&u(e,["fileSearch"],i);let s=a(t,["codeExecution"]);if(s!=null&&u(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let l=a(t,["googleMaps"]);l!=null&&u(e,["googleMaps"],wT(l));let c=a(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],AT(c));let d=a(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}function OT(t){let e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>IT(h))),u(e,["functionDeclarations"],p)}let o=a(t,["retrieval"]);o!=null&&u(e,["retrieval"],o);let r=a(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);let i=a(t,["computerUse"]);if(i!=null&&u(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let s=a(t,["codeExecution"]);s!=null&&u(e,["codeExecution"],s);let l=a(t,["enterpriseWebSearch"]);l!=null&&u(e,["enterpriseWebSearch"],l);let c=a(t,["googleMaps"]);c!=null&&u(e,["googleMaps"],c);let d=a(t,["googleSearch"]);d!=null&&u(e,["googleSearch"],d);let f=a(t,["urlContext"]);return f!=null&&u(e,["urlContext"],f),e}function VT(t,e){let n={},o=a(t,["ttl"]);e!==void 0&&o!=null&&u(e,["ttl"],o);let r=a(t,["expireTime"]);return e!==void 0&&r!=null&&u(e,["expireTime"],r),n}function UT(t,e){let n={},o=a(t,["ttl"]);e!==void 0&&o!=null&&u(e,["ttl"],o);let r=a(t,["expireTime"]);return e!==void 0&&r!=null&&u(e,["expireTime"],r),n}function HT(t,e){let n={},o=a(e,["name"]);o!=null&&u(n,["_url","name"],Ot(t,o));let r=a(e,["config"]);return r!=null&&VT(r,n),n}function BT(t,e){let n={},o=a(e,["name"]);o!=null&&u(n,["_url","name"],Ot(t,o));let r=a(e,["config"]);return r!=null&&UT(r,n),n}var Lc=class extends ct{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Lt(en.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=gT(this.apiClient,e);return l=I("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{let d=hT(this.apiClient,e);return l=I("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=ST(this.apiClient,e);return l=I("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{let d=TT(this.apiClient,e);return l=I("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=yT(this.apiClient,e);return l=I("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=ET(f),h=new Is;return Object.assign(h,p),h})}else{let d=mT(this.apiClient,e);return l=I("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=vT(f),h=new Is;return Object.assign(h,p),h})}}async update(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=BT(this.apiClient,e);return l=I("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{let d=HT(this.apiClient,e);return l=I("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=xT(e);return l=I("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=PT(f),h=new Ts;return Object.assign(h,p),h})}else{let d=NT(e);return l=I("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=RT(f),h=new Ts;return Object.assign(h,p),h})}}};function As(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(n[o[r]]=t[o[r]]);return n}function Og(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function x(t){return this instanceof x?(this.v=t,this):new x(t)}function lt(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),r,i=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(g){return function(m){return Promise.resolve(m).then(g,p)}}function l(g,m){o[g]&&(r[g]=function(y){return new Promise(function(E,v){i.push([g,y,E,v])>1||c(g,y)})},m&&(r[g]=m(r[g])))}function c(g,m){try{d(o[g](m))}catch(y){h(i[0][3],y)}}function d(g){g.value instanceof x?Promise.resolve(g.value.v).then(f,p):h(i[0][2],g)}function f(g){c("next",g)}function p(g){c("throw",g)}function h(g,m){g(m),i.shift(),i.length&&c(i[0][0],i[0][1])}}function ut(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Og=="function"?Og(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(i){n[i]=t[i]&&function(s){return new Promise(function(l,c){s=t[i](s),r(l,c,s.done,s.value)})}}function r(i,s,l,c){Promise.resolve(c).then(function(d){i({value:d,done:l})},s)}}function GT(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;let n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:vm(n)}function vm(t){if(t.parts===void 0||t.parts.length===0)return!1;for(let e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function $T(t){if(t.length!==0){for(let e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Vg(t){if(t===void 0||t.length===0)return[];let e=[],n=t.length,o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{let r=[],i=!0;for(;o<n&&t[o].role==="model";)r.push(t[o]),i&&!vm(t[o])&&(i=!1),o++;i?e.push(...r):e.pop()}return e}var Oc=class{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new Vc(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}},Vc=class{constructor(e,n,o,r={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=r,this.history=i,this.sendPromise=Promise.resolve(),$T(i)}async sendMessage(e){var n;await this.sendPromise;let o=Se(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,s,l;let c=await r,d=(s=(i=c.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content,f=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length,h=[];f!=null&&(h=(l=f.slice(p))!==null&&l!==void 0?l:[]);let g=d?[d]:[];this.recordHistory(o,g,h)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;let o=Se(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});let i=await r;return this.processStreamResponse(i,o)}getHistory(e=!1){let n=e?Vg(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return lt(this,arguments,function*(){var r,i,s,l,c,d;let f=[];try{for(var p=!0,h=ut(e),g;g=yield x(h.next()),r=g.done,!r;p=!0){l=g.value,p=!1;let m=l;if(GT(m)){let y=(d=(c=m.candidates)===null||c===void 0?void 0:c[0])===null||d===void 0?void 0:d.content;y!==void 0&&f.push(y)}yield yield x(m)}}catch(m){i={error:m}}finally{try{!p&&!r&&(s=h.return)&&(yield x(s.call(h)))}finally{if(i)throw i.error}}this.recordHistory(n,f)})}recordHistory(e,n,o){let r=[];n.length>0&&n.every(i=>i.role!==void 0)?r=n:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...Vg(o)):this.history.push(e),this.history.push(...r)}};var Ms=class t extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,t.prototype)}};function qT(t){let e={},n=a(t,["file"]);return n!=null&&u(e,["file"],n),e}function zT(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function WT(t){let e={},n=a(t,["name"]);return n!=null&&u(e,["_url","file"],dm(n)),e}function jT(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function JT(t){let e={},n=a(t,["name"]);return n!=null&&u(e,["_url","file"],dm(n)),e}function YT(t,e){let n={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);let r=a(t,["pageToken"]);return e!==void 0&&r!=null&&u(e,["_query","pageToken"],r),n}function KT(t){let e={},n=a(t,["config"]);return n!=null&&YT(n,e),e}function ZT(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);let r=a(t,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["files"],i)}return e}var Uc=class extends ct{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Lt(en.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=KT(e);return i=I("files",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{let d=ZT(c),f=new Ac;return Object.assign(f,d),f})}}async createInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=qT(e);return i=I("upload/v1beta/files",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{let d=zT(c),f=new Mc;return Object.assign(f,d),f})}}async get(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=JT(e);return i=I("files/{file}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=WT(e);return i=I("files/{file}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{let d=jT(c),f=new bc;return Object.assign(f,d),f})}}};function hs(t){let e={},n=a(t,["data"]);if(n!=null&&u(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function QT(t){let e={},n=a(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>h0(i))),u(e,["parts"],r)}let o=a(t,["role"]);return o!=null&&u(e,["role"],o),e}function XT(t){let e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=a(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);let o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function e0(t){let e={},n=a(t,["id"]);n!=null&&u(e,["id"],n);let o=a(t,["args"]);o!=null&&u(e,["args"],o);let r=a(t,["name"]);if(r!=null&&u(e,["name"],r),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function t0(t){let e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let n=a(t,["description"]);n!=null&&u(e,["description"],n);let o=a(t,["name"]);o!=null&&u(e,["name"],o);let r=a(t,["parameters"]);r!=null&&u(e,["parameters"],r);let i=a(t,["parametersJsonSchema"]);i!=null&&u(e,["parametersJsonSchema"],i);let s=a(t,["response"]);s!=null&&u(e,["response"],s);let l=a(t,["responseJsonSchema"]);return l!=null&&u(e,["responseJsonSchema"],l),e}function n0(t){let e={},n=a(t,["modelSelectionConfig"]);n!=null&&u(e,["modelConfig"],n);let o=a(t,["responseJsonSchema"]);o!=null&&u(e,["responseJsonSchema"],o);let r=a(t,["audioTimestamp"]);r!=null&&u(e,["audioTimestamp"],r);let i=a(t,["candidateCount"]);i!=null&&u(e,["candidateCount"],i);let s=a(t,["enableAffectiveDialog"]);s!=null&&u(e,["enableAffectiveDialog"],s);let l=a(t,["frequencyPenalty"]);l!=null&&u(e,["frequencyPenalty"],l);let c=a(t,["logprobs"]);c!=null&&u(e,["logprobs"],c);let d=a(t,["maxOutputTokens"]);d!=null&&u(e,["maxOutputTokens"],d);let f=a(t,["mediaResolution"]);f!=null&&u(e,["mediaResolution"],f);let p=a(t,["presencePenalty"]);p!=null&&u(e,["presencePenalty"],p);let h=a(t,["responseLogprobs"]);h!=null&&u(e,["responseLogprobs"],h);let g=a(t,["responseMimeType"]);g!=null&&u(e,["responseMimeType"],g);let m=a(t,["responseModalities"]);m!=null&&u(e,["responseModalities"],m);let y=a(t,["responseSchema"]);y!=null&&u(e,["responseSchema"],y);let E=a(t,["routingConfig"]);E!=null&&u(e,["routingConfig"],E);let v=a(t,["seed"]);v!=null&&u(e,["seed"],v);let w=a(t,["speechConfig"]);w!=null&&u(e,["speechConfig"],w);let T=a(t,["stopSequences"]);T!=null&&u(e,["stopSequences"],T);let M=a(t,["temperature"]);M!=null&&u(e,["temperature"],M);let N=a(t,["thinkingConfig"]);N!=null&&u(e,["thinkingConfig"],N);let U=a(t,["topK"]);U!=null&&u(e,["topK"],U);let k=a(t,["topP"]);if(k!=null&&u(e,["topP"],k),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function o0(t){let e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=a(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function r0(t){let e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=a(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function i0(t,e){let n={},o=a(t,["generationConfig"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig"],o);let r=a(t,["responseModalities"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig","responseModalities"],r);let i=a(t,["temperature"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","temperature"],i);let s=a(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);let l=a(t,["topK"]);e!==void 0&&l!=null&&u(e,["setup","generationConfig","topK"],l);let c=a(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);let d=a(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);let f=a(t,["seed"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","seed"],f);let p=a(t,["speechConfig"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","speechConfig"],vd(p));let h=a(t,["thinkingConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","thinkingConfig"],h);let g=a(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],g);let m=a(t,["systemInstruction"]);e!==void 0&&m!=null&&u(e,["setup","systemInstruction"],QT(Se(m)));let y=a(t,["tools"]);if(e!==void 0&&y!=null){let U=lo(y);Array.isArray(U)&&(U=U.map(k=>m0(ao(k)))),u(e,["setup","tools"],U)}let E=a(t,["sessionResumption"]);e!==void 0&&E!=null&&u(e,["setup","sessionResumption"],g0(E));let v=a(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&u(e,["setup","inputAudioTranscription"],v);let w=a(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&u(e,["setup","outputAudioTranscription"],w);let T=a(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&u(e,["setup","realtimeInputConfig"],T);let M=a(t,["contextWindowCompression"]);e!==void 0&&M!=null&&u(e,["setup","contextWindowCompression"],M);let N=a(t,["proactivity"]);if(e!==void 0&&N!=null&&u(e,["setup","proactivity"],N),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function s0(t,e){let n={},o=a(t,["generationConfig"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig"],n0(o));let r=a(t,["responseModalities"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig","responseModalities"],r);let i=a(t,["temperature"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","temperature"],i);let s=a(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);let l=a(t,["topK"]);e!==void 0&&l!=null&&u(e,["setup","generationConfig","topK"],l);let c=a(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);let d=a(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);let f=a(t,["seed"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","seed"],f);let p=a(t,["speechConfig"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","speechConfig"],vd(p));let h=a(t,["thinkingConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","thinkingConfig"],h);let g=a(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],g);let m=a(t,["systemInstruction"]);e!==void 0&&m!=null&&u(e,["setup","systemInstruction"],Se(m));let y=a(t,["tools"]);if(e!==void 0&&y!=null){let k=lo(y);Array.isArray(k)&&(k=k.map(ae=>y0(ao(ae)))),u(e,["setup","tools"],k)}let E=a(t,["sessionResumption"]);e!==void 0&&E!=null&&u(e,["setup","sessionResumption"],E);let v=a(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&u(e,["setup","inputAudioTranscription"],v);let w=a(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&u(e,["setup","outputAudioTranscription"],w);let T=a(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&u(e,["setup","realtimeInputConfig"],T);let M=a(t,["contextWindowCompression"]);e!==void 0&&M!=null&&u(e,["setup","contextWindowCompression"],M);let N=a(t,["proactivity"]);e!==void 0&&N!=null&&u(e,["setup","proactivity"],N);let U=a(t,["explicitVadSignal"]);return e!==void 0&&U!=null&&u(e,["setup","explicitVadSignal"],U),n}function a0(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["setup","model"],W(t,o));let r=a(e,["config"]);return r!=null&&u(n,["config"],i0(r,n)),n}function l0(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["setup","model"],W(t,o));let r=a(e,["config"]);return r!=null&&u(n,["config"],s0(r,n)),n}function u0(t){let e={},n=a(t,["musicGenerationConfig"]);return n!=null&&u(e,["musicGenerationConfig"],n),e}function c0(t){let e={},n=a(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),u(e,["weightedPrompts"],o)}return e}function d0(t){let e={},n=a(t,["media"]);if(n!=null){let d=sm(n);Array.isArray(d)&&(d=d.map(f=>hs(f))),u(e,["mediaChunks"],d)}let o=a(t,["audio"]);o!=null&&u(e,["audio"],hs(lm(o)));let r=a(t,["audioStreamEnd"]);r!=null&&u(e,["audioStreamEnd"],r);let i=a(t,["video"]);i!=null&&u(e,["video"],hs(am(i)));let s=a(t,["text"]);s!=null&&u(e,["text"],s);let l=a(t,["activityStart"]);l!=null&&u(e,["activityStart"],l);let c=a(t,["activityEnd"]);return c!=null&&u(e,["activityEnd"],c),e}function f0(t){let e={},n=a(t,["media"]);if(n!=null){let d=sm(n);Array.isArray(d)&&(d=d.map(f=>f)),u(e,["mediaChunks"],d)}let o=a(t,["audio"]);o!=null&&u(e,["audio"],lm(o));let r=a(t,["audioStreamEnd"]);r!=null&&u(e,["audioStreamEnd"],r);let i=a(t,["video"]);i!=null&&u(e,["video"],am(i));let s=a(t,["text"]);s!=null&&u(e,["text"],s);let l=a(t,["activityStart"]);l!=null&&u(e,["activityStart"],l);let c=a(t,["activityEnd"]);return c!=null&&u(e,["activityEnd"],c),e}function p0(t){let e={},n=a(t,["setupComplete"]);n!=null&&u(e,["setupComplete"],n);let o=a(t,["serverContent"]);o!=null&&u(e,["serverContent"],o);let r=a(t,["toolCall"]);r!=null&&u(e,["toolCall"],r);let i=a(t,["toolCallCancellation"]);i!=null&&u(e,["toolCallCancellation"],i);let s=a(t,["usageMetadata"]);s!=null&&u(e,["usageMetadata"],v0(s));let l=a(t,["goAway"]);l!=null&&u(e,["goAway"],l);let c=a(t,["sessionResumptionUpdate"]);c!=null&&u(e,["sessionResumptionUpdate"],c);let d=a(t,["voiceActivityDetectionSignal"]);return d!=null&&u(e,["voiceActivityDetectionSignal"],d),e}function h0(t){let e={},n=a(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);let o=a(t,["codeExecutionResult"]);o!=null&&u(e,["codeExecutionResult"],o);let r=a(t,["executableCode"]);r!=null&&u(e,["executableCode"],r);let i=a(t,["fileData"]);i!=null&&u(e,["fileData"],XT(i));let s=a(t,["functionCall"]);s!=null&&u(e,["functionCall"],e0(s));let l=a(t,["functionResponse"]);l!=null&&u(e,["functionResponse"],l);let c=a(t,["inlineData"]);c!=null&&u(e,["inlineData"],hs(c));let d=a(t,["text"]);d!=null&&u(e,["text"],d);let f=a(t,["thought"]);f!=null&&u(e,["thought"],f);let p=a(t,["thoughtSignature"]);p!=null&&u(e,["thoughtSignature"],p);let h=a(t,["videoMetadata"]);return h!=null&&u(e,["videoMetadata"],h),e}function g0(t){let e={},n=a(t,["handle"]);if(n!=null&&u(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function m0(t){let e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),u(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let o=a(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],o);let r=a(t,["computerUse"]);r!=null&&u(e,["computerUse"],r);let i=a(t,["fileSearch"]);i!=null&&u(e,["fileSearch"],i);let s=a(t,["codeExecution"]);if(s!=null&&u(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let l=a(t,["googleMaps"]);l!=null&&u(e,["googleMaps"],o0(l));let c=a(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],r0(c));let d=a(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}function y0(t){let e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>t0(h))),u(e,["functionDeclarations"],p)}let o=a(t,["retrieval"]);o!=null&&u(e,["retrieval"],o);let r=a(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);let i=a(t,["computerUse"]);if(i!=null&&u(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let s=a(t,["codeExecution"]);s!=null&&u(e,["codeExecution"],s);let l=a(t,["enterpriseWebSearch"]);l!=null&&u(e,["enterpriseWebSearch"],l);let c=a(t,["googleMaps"]);c!=null&&u(e,["googleMaps"],c);let d=a(t,["googleSearch"]);d!=null&&u(e,["googleSearch"],d);let f=a(t,["urlContext"]);return f!=null&&u(e,["urlContext"],f),e}function v0(t){let e={},n=a(t,["promptTokenCount"]);n!=null&&u(e,["promptTokenCount"],n);let o=a(t,["cachedContentTokenCount"]);o!=null&&u(e,["cachedContentTokenCount"],o);let r=a(t,["candidatesTokenCount"]);r!=null&&u(e,["responseTokenCount"],r);let i=a(t,["toolUsePromptTokenCount"]);i!=null&&u(e,["toolUsePromptTokenCount"],i);let s=a(t,["thoughtsTokenCount"]);s!=null&&u(e,["thoughtsTokenCount"],s);let l=a(t,["totalTokenCount"]);l!=null&&u(e,["totalTokenCount"],l);let c=a(t,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(m=>m)),u(e,["promptTokensDetails"],g)}let d=a(t,["cacheTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(m=>m)),u(e,["cacheTokensDetails"],g)}let f=a(t,["candidatesTokensDetails"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(m=>m)),u(e,["responseTokensDetails"],g)}let p=a(t,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(m=>m)),u(e,["toolUsePromptTokensDetails"],g)}let h=a(t,["trafficType"]);return h!=null&&u(e,["trafficType"],h),e}function E0(t){let e={},n=a(t,["data"]);if(n!=null&&u(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function _0(t){let e={},n=a(t,["content"]);n!=null&&u(e,["content"],n);let o=a(t,["citationMetadata"]);o!=null&&u(e,["citationMetadata"],C0(o));let r=a(t,["tokenCount"]);r!=null&&u(e,["tokenCount"],r);let i=a(t,["finishReason"]);i!=null&&u(e,["finishReason"],i);let s=a(t,["avgLogprobs"]);s!=null&&u(e,["avgLogprobs"],s);let l=a(t,["groundingMetadata"]);l!=null&&u(e,["groundingMetadata"],l);let c=a(t,["index"]);c!=null&&u(e,["index"],c);let d=a(t,["logprobsResult"]);d!=null&&u(e,["logprobsResult"],d);let f=a(t,["safetyRatings"]);if(f!=null){let h=f;Array.isArray(h)&&(h=h.map(g=>g)),u(e,["safetyRatings"],h)}let p=a(t,["urlContextMetadata"]);return p!=null&&u(e,["urlContextMetadata"],p),e}function C0(t){let e={},n=a(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),u(e,["citations"],o)}return e}function D0(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],W(t,o));let r=a(e,["contents"]);if(r!=null){let i=Je(r);Array.isArray(i)&&(i=i.map(s=>s)),u(n,["contents"],i)}return n}function I0(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),u(e,["tokensInfo"],r)}return e}function T0(t){let e={},n=a(t,["values"]);n!=null&&u(e,["values"],n);let o=a(t,["statistics"]);return o!=null&&u(e,["statistics"],S0(o)),e}function S0(t){let e={},n=a(t,["truncated"]);n!=null&&u(e,["truncated"],n);let o=a(t,["token_count"]);return o!=null&&u(e,["tokenCount"],o),e}function $s(t){let e={},n=a(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>FS(i))),u(e,["parts"],r)}let o=a(t,["role"]);return o!=null&&u(e,["role"],o),e}function w0(t){let e={},n=a(t,["controlType"]);n!=null&&u(e,["controlType"],n);let o=a(t,["enableControlImageComputation"]);return o!=null&&u(e,["computeControl"],o),e}function A0(t){let e={};if(a(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function M0(t,e){let n={},o=a(t,["systemInstruction"]);e!==void 0&&o!=null&&u(e,["systemInstruction"],Se(o));let r=a(t,["tools"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(l=>Dm(l))),u(e,["tools"],s)}let i=a(t,["generationConfig"]);return e!==void 0&&i!=null&&u(e,["generationConfig"],ES(i)),n}function b0(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],W(t,o));let r=a(e,["contents"]);if(r!=null){let s=Je(r);Array.isArray(s)&&(s=s.map(l=>$s(l))),u(n,["contents"],s)}let i=a(e,["config"]);return i!=null&&A0(i),n}function N0(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],W(t,o));let r=a(e,["contents"]);if(r!=null){let s=Je(r);Array.isArray(s)&&(s=s.map(l=>l)),u(n,["contents"],s)}let i=a(e,["config"]);return i!=null&&M0(i,n),n}function x0(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["totalTokens"]);o!=null&&u(e,["totalTokens"],o);let r=a(t,["cachedContentTokenCount"]);return r!=null&&u(e,["cachedContentTokenCount"],r),e}function R0(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["totalTokens"]);return o!=null&&u(e,["totalTokens"],o),e}function P0(t,e){let n={},o=a(e,["model"]);return o!=null&&u(n,["_url","name"],W(t,o)),n}function F0(t,e){let n={},o=a(e,["model"]);return o!=null&&u(n,["_url","name"],W(t,o)),n}function k0(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function L0(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}function O0(t,e){let n={},o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&u(e,["parameters","storageUri"],o);let r=a(t,["negativePrompt"]);e!==void 0&&r!=null&&u(e,["parameters","negativePrompt"],r);let i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&u(e,["parameters","sampleCount"],i);let s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s);let l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&u(e,["parameters","guidanceScale"],l);let c=a(t,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);let d=a(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&u(e,["parameters","safetySetting"],d);let f=a(t,["personGeneration"]);e!==void 0&&f!=null&&u(e,["parameters","personGeneration"],f);let p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&u(e,["parameters","includeSafetyAttributes"],p);let h=a(t,["includeRaiReason"]);e!==void 0&&h!=null&&u(e,["parameters","includeRaiReason"],h);let g=a(t,["language"]);e!==void 0&&g!=null&&u(e,["parameters","language"],g);let m=a(t,["outputMimeType"]);e!==void 0&&m!=null&&u(e,["parameters","outputOptions","mimeType"],m);let y=a(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&u(e,["parameters","outputOptions","compressionQuality"],y);let E=a(t,["addWatermark"]);e!==void 0&&E!=null&&u(e,["parameters","addWatermark"],E);let v=a(t,["labels"]);e!==void 0&&v!=null&&u(e,["labels"],v);let w=a(t,["editMode"]);e!==void 0&&w!=null&&u(e,["parameters","editMode"],w);let T=a(t,["baseSteps"]);return e!==void 0&&T!=null&&u(e,["parameters","editConfig","baseSteps"],T),n}function V0(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],W(t,o));let r=a(e,["prompt"]);r!=null&&u(n,["instances[0]","prompt"],r);let i=a(e,["referenceImages"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>HS(c))),u(n,["instances[0]","referenceImages"],l)}let s=a(e,["config"]);return s!=null&&O0(s,n),n}function U0(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>qs(i))),u(e,["generatedImages"],r)}return e}function H0(t,e){let n={},o=a(t,["taskType"]);e!==void 0&&o!=null&&u(e,["requests[]","taskType"],o);let r=a(t,["title"]);e!==void 0&&r!=null&&u(e,["requests[]","title"],r);let i=a(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&u(e,["requests[]","outputDimensionality"],i),a(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function B0(t,e){let n={},o=a(t,["taskType"]);e!==void 0&&o!=null&&u(e,["instances[]","task_type"],o);let r=a(t,["title"]);e!==void 0&&r!=null&&u(e,["instances[]","title"],r);let i=a(t,["outputDimensionality"]);e!==void 0&&i!=null&&u(e,["parameters","outputDimensionality"],i);let s=a(t,["mimeType"]);e!==void 0&&s!=null&&u(e,["instances[]","mimeType"],s);let l=a(t,["autoTruncate"]);return e!==void 0&&l!=null&&u(e,["parameters","autoTruncate"],l),n}function G0(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],W(t,o));let r=a(e,["contents"]);if(r!=null){let l=gd(t,r);Array.isArray(l)&&(l=l.map(c=>c)),u(n,["requests[]","content"],l)}let i=a(e,["config"]);i!=null&&H0(i,n);let s=a(e,["model"]);return s!==void 0&&u(n,["requests[]","model"],W(t,s)),n}function $0(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],W(t,o));let r=a(e,["contents"]);if(r!=null){let s=gd(t,r);Array.isArray(s)&&(s=s.map(l=>l)),u(n,["instances[]","content"],s)}let i=a(e,["config"]);return i!=null&&B0(i,n),n}function q0(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["embeddings"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["embeddings"],i)}let r=a(t,["metadata"]);return r!=null&&u(e,["metadata"],r),e}function z0(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["predictions[]","embeddings"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>T0(s))),u(e,["embeddings"],i)}let r=a(t,["metadata"]);return r!=null&&u(e,["metadata"],r),e}function W0(t){let e={},n=a(t,["endpoint"]);n!=null&&u(e,["name"],n);let o=a(t,["deployedModelId"]);return o!=null&&u(e,["deployedModelId"],o),e}function j0(t){let e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=a(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);let o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function J0(t){let e={},n=a(t,["id"]);n!=null&&u(e,["id"],n);let o=a(t,["args"]);o!=null&&u(e,["args"],o);let r=a(t,["name"]);if(r!=null&&u(e,["name"],r),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Y0(t){let e={},n=a(t,["mode"]);n!=null&&u(e,["mode"],n);let o=a(t,["allowedFunctionNames"]);if(o!=null&&u(e,["allowedFunctionNames"],o),a(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function K0(t){let e={};if(a(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");let n=a(t,["description"]);n!=null&&u(e,["description"],n);let o=a(t,["name"]);o!=null&&u(e,["name"],o);let r=a(t,["parameters"]);r!=null&&u(e,["parameters"],r);let i=a(t,["parametersJsonSchema"]);i!=null&&u(e,["parametersJsonSchema"],i);let s=a(t,["response"]);s!=null&&u(e,["response"],s);let l=a(t,["responseJsonSchema"]);return l!=null&&u(e,["responseJsonSchema"],l),e}function Z0(t,e,n){let o={},r=a(e,["systemInstruction"]);n!==void 0&&r!=null&&u(n,["systemInstruction"],$s(Se(r)));let i=a(e,["temperature"]);i!=null&&u(o,["temperature"],i);let s=a(e,["topP"]);s!=null&&u(o,["topP"],s);let l=a(e,["topK"]);l!=null&&u(o,["topK"],l);let c=a(e,["candidateCount"]);c!=null&&u(o,["candidateCount"],c);let d=a(e,["maxOutputTokens"]);d!=null&&u(o,["maxOutputTokens"],d);let f=a(e,["stopSequences"]);f!=null&&u(o,["stopSequences"],f);let p=a(e,["responseLogprobs"]);p!=null&&u(o,["responseLogprobs"],p);let h=a(e,["logprobs"]);h!=null&&u(o,["logprobs"],h);let g=a(e,["presencePenalty"]);g!=null&&u(o,["presencePenalty"],g);let m=a(e,["frequencyPenalty"]);m!=null&&u(o,["frequencyPenalty"],m);let y=a(e,["seed"]);y!=null&&u(o,["seed"],y);let E=a(e,["responseMimeType"]);E!=null&&u(o,["responseMimeType"],E);let v=a(e,["responseSchema"]);v!=null&&u(o,["responseSchema"],md(v));let w=a(e,["responseJsonSchema"]);if(w!=null&&u(o,["responseJsonSchema"],w),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");let T=a(e,["safetySettings"]);if(n!==void 0&&T!=null){let le=T;Array.isArray(le)&&(le=le.map(ft=>BS(ft))),u(n,["safetySettings"],le)}let M=a(e,["tools"]);if(n!==void 0&&M!=null){let le=lo(M);Array.isArray(le)&&(le=le.map(ft=>JS(ao(ft)))),u(n,["tools"],le)}let N=a(e,["toolConfig"]);if(n!==void 0&&N!=null&&u(n,["toolConfig"],jS(N)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let U=a(e,["cachedContent"]);n!==void 0&&U!=null&&u(n,["cachedContent"],Ot(t,U));let k=a(e,["responseModalities"]);k!=null&&u(o,["responseModalities"],k);let ae=a(e,["mediaResolution"]);ae!=null&&u(o,["mediaResolution"],ae);let R=a(e,["speechConfig"]);if(R!=null&&u(o,["speechConfig"],yd(R)),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");let G=a(e,["thinkingConfig"]);G!=null&&u(o,["thinkingConfig"],G);let ye=a(e,["imageConfig"]);ye!=null&&u(o,["imageConfig"],TS(ye));let Vt=a(e,["enableEnhancedCivicAnswers"]);return Vt!=null&&u(o,["enableEnhancedCivicAnswers"],Vt),o}function Q0(t,e,n){let o={},r=a(e,["systemInstruction"]);n!==void 0&&r!=null&&u(n,["systemInstruction"],Se(r));let i=a(e,["temperature"]);i!=null&&u(o,["temperature"],i);let s=a(e,["topP"]);s!=null&&u(o,["topP"],s);let l=a(e,["topK"]);l!=null&&u(o,["topK"],l);let c=a(e,["candidateCount"]);c!=null&&u(o,["candidateCount"],c);let d=a(e,["maxOutputTokens"]);d!=null&&u(o,["maxOutputTokens"],d);let f=a(e,["stopSequences"]);f!=null&&u(o,["stopSequences"],f);let p=a(e,["responseLogprobs"]);p!=null&&u(o,["responseLogprobs"],p);let h=a(e,["logprobs"]);h!=null&&u(o,["logprobs"],h);let g=a(e,["presencePenalty"]);g!=null&&u(o,["presencePenalty"],g);let m=a(e,["frequencyPenalty"]);m!=null&&u(o,["frequencyPenalty"],m);let y=a(e,["seed"]);y!=null&&u(o,["seed"],y);let E=a(e,["responseMimeType"]);E!=null&&u(o,["responseMimeType"],E);let v=a(e,["responseSchema"]);v!=null&&u(o,["responseSchema"],md(v));let w=a(e,["responseJsonSchema"]);w!=null&&u(o,["responseJsonSchema"],w);let T=a(e,["routingConfig"]);T!=null&&u(o,["routingConfig"],T);let M=a(e,["modelSelectionConfig"]);M!=null&&u(o,["modelConfig"],M);let N=a(e,["safetySettings"]);if(n!==void 0&&N!=null){let At=N;Array.isArray(At)&&(At=At.map(aa=>aa)),u(n,["safetySettings"],At)}let U=a(e,["tools"]);if(n!==void 0&&U!=null){let At=lo(U);Array.isArray(At)&&(At=At.map(aa=>Dm(ao(aa)))),u(n,["tools"],At)}let k=a(e,["toolConfig"]);n!==void 0&&k!=null&&u(n,["toolConfig"],k);let ae=a(e,["labels"]);n!==void 0&&ae!=null&&u(n,["labels"],ae);let R=a(e,["cachedContent"]);n!==void 0&&R!=null&&u(n,["cachedContent"],Ot(t,R));let G=a(e,["responseModalities"]);G!=null&&u(o,["responseModalities"],G);let ye=a(e,["mediaResolution"]);ye!=null&&u(o,["mediaResolution"],ye);let Vt=a(e,["speechConfig"]);Vt!=null&&u(o,["speechConfig"],yd(Vt));let le=a(e,["audioTimestamp"]);le!=null&&u(o,["audioTimestamp"],le);let ft=a(e,["thinkingConfig"]);ft!=null&&u(o,["thinkingConfig"],ft);let Md=a(e,["imageConfig"]);if(Md!=null&&u(o,["imageConfig"],SS(Md)),a(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function Ug(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],W(t,o));let r=a(e,["contents"]);if(r!=null){let s=Je(r);Array.isArray(s)&&(s=s.map(l=>$s(l))),u(n,["contents"],s)}let i=a(e,["config"]);return i!=null&&u(n,["generationConfig"],Z0(t,i,n)),n}function Hg(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],W(t,o));let r=a(e,["contents"]);if(r!=null){let s=Je(r);Array.isArray(s)&&(s=s.map(l=>l)),u(n,["contents"],s)}let i=a(e,["config"]);return i!=null&&u(n,["generationConfig"],Q0(t,i,n)),n}function Bg(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>_0(d))),u(e,["candidates"],c)}let r=a(t,["modelVersion"]);r!=null&&u(e,["modelVersion"],r);let i=a(t,["promptFeedback"]);i!=null&&u(e,["promptFeedback"],i);let s=a(t,["responseId"]);s!=null&&u(e,["responseId"],s);let l=a(t,["usageMetadata"]);return l!=null&&u(e,["usageMetadata"],l),e}function Gg(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(f=>f)),u(e,["candidates"],d)}let r=a(t,["createTime"]);r!=null&&u(e,["createTime"],r);let i=a(t,["modelVersion"]);i!=null&&u(e,["modelVersion"],i);let s=a(t,["promptFeedback"]);s!=null&&u(e,["promptFeedback"],s);let l=a(t,["responseId"]);l!=null&&u(e,["responseId"],l);let c=a(t,["usageMetadata"]);return c!=null&&u(e,["usageMetadata"],c),e}function X0(t,e){let n={};if(a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");let o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o);let r=a(t,["aspectRatio"]);e!==void 0&&r!=null&&u(e,["parameters","aspectRatio"],r);let i=a(t,["guidanceScale"]);if(e!==void 0&&i!=null&&u(e,["parameters","guidanceScale"],i),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let s=a(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&u(e,["parameters","safetySetting"],s);let l=a(t,["personGeneration"]);e!==void 0&&l!=null&&u(e,["parameters","personGeneration"],l);let c=a(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&u(e,["parameters","includeSafetyAttributes"],c);let d=a(t,["includeRaiReason"]);e!==void 0&&d!=null&&u(e,["parameters","includeRaiReason"],d);let f=a(t,["language"]);e!==void 0&&f!=null&&u(e,["parameters","language"],f);let p=a(t,["outputMimeType"]);e!==void 0&&p!=null&&u(e,["parameters","outputOptions","mimeType"],p);let h=a(t,["outputCompressionQuality"]);if(e!==void 0&&h!=null&&u(e,["parameters","outputOptions","compressionQuality"],h),a(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");let g=a(t,["imageSize"]);if(e!==void 0&&g!=null&&u(e,["parameters","sampleImageSize"],g),a(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function eS(t,e){let n={},o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&u(e,["parameters","storageUri"],o);let r=a(t,["negativePrompt"]);e!==void 0&&r!=null&&u(e,["parameters","negativePrompt"],r);let i=a(t,["numberOfImages"]);e!==void 0&&i!=null&&u(e,["parameters","sampleCount"],i);let s=a(t,["aspectRatio"]);e!==void 0&&s!=null&&u(e,["parameters","aspectRatio"],s);let l=a(t,["guidanceScale"]);e!==void 0&&l!=null&&u(e,["parameters","guidanceScale"],l);let c=a(t,["seed"]);e!==void 0&&c!=null&&u(e,["parameters","seed"],c);let d=a(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&u(e,["parameters","safetySetting"],d);let f=a(t,["personGeneration"]);e!==void 0&&f!=null&&u(e,["parameters","personGeneration"],f);let p=a(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&u(e,["parameters","includeSafetyAttributes"],p);let h=a(t,["includeRaiReason"]);e!==void 0&&h!=null&&u(e,["parameters","includeRaiReason"],h);let g=a(t,["language"]);e!==void 0&&g!=null&&u(e,["parameters","language"],g);let m=a(t,["outputMimeType"]);e!==void 0&&m!=null&&u(e,["parameters","outputOptions","mimeType"],m);let y=a(t,["outputCompressionQuality"]);e!==void 0&&y!=null&&u(e,["parameters","outputOptions","compressionQuality"],y);let E=a(t,["addWatermark"]);e!==void 0&&E!=null&&u(e,["parameters","addWatermark"],E);let v=a(t,["labels"]);e!==void 0&&v!=null&&u(e,["labels"],v);let w=a(t,["imageSize"]);e!==void 0&&w!=null&&u(e,["parameters","sampleImageSize"],w);let T=a(t,["enhancePrompt"]);return e!==void 0&&T!=null&&u(e,["parameters","enhancePrompt"],T),n}function tS(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],W(t,o));let r=a(e,["prompt"]);r!=null&&u(n,["instances[0]","prompt"],r);let i=a(e,["config"]);return i!=null&&X0(i,n),n}function nS(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],W(t,o));let r=a(e,["prompt"]);r!=null&&u(n,["instances[0]","prompt"],r);let i=a(e,["config"]);return i!=null&&eS(i,n),n}function oS(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>gS(s))),u(e,["generatedImages"],i)}let r=a(t,["positivePromptSafetyAttributes"]);return r!=null&&u(e,["positivePromptSafetyAttributes"],_m(r)),e}function rS(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>qs(s))),u(e,["generatedImages"],i)}let r=a(t,["positivePromptSafetyAttributes"]);return r!=null&&u(e,["positivePromptSafetyAttributes"],Cm(r)),e}function iS(t,e){let n={},o=a(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o),a(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");let r=a(t,["durationSeconds"]);if(e!==void 0&&r!=null&&u(e,["parameters","durationSeconds"],r),a(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");let i=a(t,["aspectRatio"]);e!==void 0&&i!=null&&u(e,["parameters","aspectRatio"],i);let s=a(t,["resolution"]);e!==void 0&&s!=null&&u(e,["parameters","resolution"],s);let l=a(t,["personGeneration"]);if(e!==void 0&&l!=null&&u(e,["parameters","personGeneration"],l),a(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");let c=a(t,["negativePrompt"]);e!==void 0&&c!=null&&u(e,["parameters","negativePrompt"],c);let d=a(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&u(e,["parameters","enhancePrompt"],d),a(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");let f=a(t,["lastFrame"]);e!==void 0&&f!=null&&u(e,["instances[0]","lastFrame"],zs(f));let p=a(t,["referenceImages"]);if(e!==void 0&&p!=null){let h=p;Array.isArray(h)&&(h=h.map(g=>aw(g))),u(e,["instances[0]","referenceImages"],h)}if(a(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function sS(t,e){let n={},o=a(t,["numberOfVideos"]);e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o);let r=a(t,["outputGcsUri"]);e!==void 0&&r!=null&&u(e,["parameters","storageUri"],r);let i=a(t,["fps"]);e!==void 0&&i!=null&&u(e,["parameters","fps"],i);let s=a(t,["durationSeconds"]);e!==void 0&&s!=null&&u(e,["parameters","durationSeconds"],s);let l=a(t,["seed"]);e!==void 0&&l!=null&&u(e,["parameters","seed"],l);let c=a(t,["aspectRatio"]);e!==void 0&&c!=null&&u(e,["parameters","aspectRatio"],c);let d=a(t,["resolution"]);e!==void 0&&d!=null&&u(e,["parameters","resolution"],d);let f=a(t,["personGeneration"]);e!==void 0&&f!=null&&u(e,["parameters","personGeneration"],f);let p=a(t,["pubsubTopic"]);e!==void 0&&p!=null&&u(e,["parameters","pubsubTopic"],p);let h=a(t,["negativePrompt"]);e!==void 0&&h!=null&&u(e,["parameters","negativePrompt"],h);let g=a(t,["enhancePrompt"]);e!==void 0&&g!=null&&u(e,["parameters","enhancePrompt"],g);let m=a(t,["generateAudio"]);e!==void 0&&m!=null&&u(e,["parameters","generateAudio"],m);let y=a(t,["lastFrame"]);e!==void 0&&y!=null&&u(e,["instances[0]","lastFrame"],dt(y));let E=a(t,["referenceImages"]);if(e!==void 0&&E!=null){let T=E;Array.isArray(T)&&(T=T.map(M=>lw(M))),u(e,["instances[0]","referenceImages"],T)}let v=a(t,["mask"]);e!==void 0&&v!=null&&u(e,["instances[0]","mask"],sw(v));let w=a(t,["compressionQuality"]);return e!==void 0&&w!=null&&u(e,["parameters","compressionQuality"],w),n}function aS(t){let e={},n=a(t,["name"]);n!=null&&u(e,["name"],n);let o=a(t,["metadata"]);o!=null&&u(e,["metadata"],o);let r=a(t,["done"]);r!=null&&u(e,["done"],r);let i=a(t,["error"]);i!=null&&u(e,["error"],i);let s=a(t,["response","generateVideoResponse"]);return s!=null&&u(e,["response"],dS(s)),e}function lS(t){let e={},n=a(t,["name"]);n!=null&&u(e,["name"],n);let o=a(t,["metadata"]);o!=null&&u(e,["metadata"],o);let r=a(t,["done"]);r!=null&&u(e,["done"],r);let i=a(t,["error"]);i!=null&&u(e,["error"],i);let s=a(t,["response"]);return s!=null&&u(e,["response"],fS(s)),e}function uS(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],W(t,o));let r=a(e,["prompt"]);r!=null&&u(n,["instances[0]","prompt"],r);let i=a(e,["image"]);i!=null&&u(n,["instances[0]","image"],zs(i));let s=a(e,["video"]);s!=null&&u(n,["instances[0]","video"],Im(s));let l=a(e,["source"]);l!=null&&pS(l,n);let c=a(e,["config"]);return c!=null&&iS(c,n),n}function cS(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],W(t,o));let r=a(e,["prompt"]);r!=null&&u(n,["instances[0]","prompt"],r);let i=a(e,["image"]);i!=null&&u(n,["instances[0]","image"],dt(i));let s=a(e,["video"]);s!=null&&u(n,["instances[0]","video"],Tm(s));let l=a(e,["source"]);l!=null&&hS(l,n);let c=a(e,["config"]);return c!=null&&sS(c,n),n}function dS(t){let e={},n=a(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>yS(s))),u(e,["generatedVideos"],i)}let o=a(t,["raiMediaFilteredCount"]);o!=null&&u(e,["raiMediaFilteredCount"],o);let r=a(t,["raiMediaFilteredReasons"]);return r!=null&&u(e,["raiMediaFilteredReasons"],r),e}function fS(t){let e={},n=a(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>vS(s))),u(e,["generatedVideos"],i)}let o=a(t,["raiMediaFilteredCount"]);o!=null&&u(e,["raiMediaFilteredCount"],o);let r=a(t,["raiMediaFilteredReasons"]);return r!=null&&u(e,["raiMediaFilteredReasons"],r),e}function pS(t,e){let n={},o=a(t,["prompt"]);e!==void 0&&o!=null&&u(e,["instances[0]","prompt"],o);let r=a(t,["image"]);e!==void 0&&r!=null&&u(e,["instances[0]","image"],zs(r));let i=a(t,["video"]);return e!==void 0&&i!=null&&u(e,["instances[0]","video"],Im(i)),n}function hS(t,e){let n={},o=a(t,["prompt"]);e!==void 0&&o!=null&&u(e,["instances[0]","prompt"],o);let r=a(t,["image"]);e!==void 0&&r!=null&&u(e,["instances[0]","image"],dt(r));let i=a(t,["video"]);return e!==void 0&&i!=null&&u(e,["instances[0]","video"],Tm(i)),n}function gS(t){let e={},n=a(t,["_self"]);n!=null&&u(e,["image"],wS(n));let o=a(t,["raiFilteredReason"]);o!=null&&u(e,["raiFilteredReason"],o);let r=a(t,["_self"]);return r!=null&&u(e,["safetyAttributes"],_m(r)),e}function qs(t){let e={},n=a(t,["_self"]);n!=null&&u(e,["image"],Em(n));let o=a(t,["raiFilteredReason"]);o!=null&&u(e,["raiFilteredReason"],o);let r=a(t,["_self"]);r!=null&&u(e,["safetyAttributes"],Cm(r));let i=a(t,["prompt"]);return i!=null&&u(e,["enhancedPrompt"],i),e}function mS(t){let e={},n=a(t,["_self"]);n!=null&&u(e,["mask"],Em(n));let o=a(t,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),u(e,["labels"],r)}return e}function yS(t){let e={},n=a(t,["video"]);return n!=null&&u(e,["video"],rw(n)),e}function vS(t){let e={},n=a(t,["_self"]);return n!=null&&u(e,["video"],iw(n)),e}function ES(t){let e={},n=a(t,["modelSelectionConfig"]);n!=null&&u(e,["modelConfig"],n);let o=a(t,["responseJsonSchema"]);o!=null&&u(e,["responseJsonSchema"],o);let r=a(t,["audioTimestamp"]);r!=null&&u(e,["audioTimestamp"],r);let i=a(t,["candidateCount"]);i!=null&&u(e,["candidateCount"],i);let s=a(t,["enableAffectiveDialog"]);s!=null&&u(e,["enableAffectiveDialog"],s);let l=a(t,["frequencyPenalty"]);l!=null&&u(e,["frequencyPenalty"],l);let c=a(t,["logprobs"]);c!=null&&u(e,["logprobs"],c);let d=a(t,["maxOutputTokens"]);d!=null&&u(e,["maxOutputTokens"],d);let f=a(t,["mediaResolution"]);f!=null&&u(e,["mediaResolution"],f);let p=a(t,["presencePenalty"]);p!=null&&u(e,["presencePenalty"],p);let h=a(t,["responseLogprobs"]);h!=null&&u(e,["responseLogprobs"],h);let g=a(t,["responseMimeType"]);g!=null&&u(e,["responseMimeType"],g);let m=a(t,["responseModalities"]);m!=null&&u(e,["responseModalities"],m);let y=a(t,["responseSchema"]);y!=null&&u(e,["responseSchema"],y);let E=a(t,["routingConfig"]);E!=null&&u(e,["routingConfig"],E);let v=a(t,["seed"]);v!=null&&u(e,["seed"],v);let w=a(t,["speechConfig"]);w!=null&&u(e,["speechConfig"],w);let T=a(t,["stopSequences"]);T!=null&&u(e,["stopSequences"],T);let M=a(t,["temperature"]);M!=null&&u(e,["temperature"],M);let N=a(t,["thinkingConfig"]);N!=null&&u(e,["thinkingConfig"],N);let U=a(t,["topK"]);U!=null&&u(e,["topK"],U);let k=a(t,["topP"]);if(k!=null&&u(e,["topP"],k),a(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function _S(t,e){let n={},o=a(e,["model"]);return o!=null&&u(n,["_url","name"],W(t,o)),n}function CS(t,e){let n={},o=a(e,["model"]);return o!=null&&u(n,["_url","name"],W(t,o)),n}function DS(t){let e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=a(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function IS(t){let e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=a(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function TS(t){let e={},n=a(t,["aspectRatio"]);n!=null&&u(e,["aspectRatio"],n);let o=a(t,["imageSize"]);if(o!=null&&u(e,["imageSize"],o),a(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(a(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function SS(t){let e={},n=a(t,["aspectRatio"]);n!=null&&u(e,["aspectRatio"],n);let o=a(t,["imageSize"]);o!=null&&u(e,["imageSize"],o);let r=a(t,["outputMimeType"]);r!=null&&u(e,["imageOutputOptions","mimeType"],r);let i=a(t,["outputCompressionQuality"]);return i!=null&&u(e,["imageOutputOptions","compressionQuality"],i),e}function wS(t){let e={},n=a(t,["bytesBase64Encoded"]);n!=null&&u(e,["imageBytes"],Xt(n));let o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function Em(t){let e={},n=a(t,["gcsUri"]);n!=null&&u(e,["gcsUri"],n);let o=a(t,["bytesBase64Encoded"]);o!=null&&u(e,["imageBytes"],Xt(o));let r=a(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function zs(t){let e={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");let n=a(t,["imageBytes"]);n!=null&&u(e,["bytesBase64Encoded"],Xt(n));let o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function dt(t){let e={},n=a(t,["gcsUri"]);n!=null&&u(e,["gcsUri"],n);let o=a(t,["imageBytes"]);o!=null&&u(e,["bytesBase64Encoded"],Xt(o));let r=a(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function AS(t,e,n){let o={},r=a(e,["pageSize"]);n!==void 0&&r!=null&&u(n,["_query","pageSize"],r);let i=a(e,["pageToken"]);n!==void 0&&i!=null&&u(n,["_query","pageToken"],i);let s=a(e,["filter"]);n!==void 0&&s!=null&&u(n,["_query","filter"],s);let l=a(e,["queryBase"]);return n!==void 0&&l!=null&&u(n,["_url","models_url"],fm(t,l)),o}function MS(t,e,n){let o={},r=a(e,["pageSize"]);n!==void 0&&r!=null&&u(n,["_query","pageSize"],r);let i=a(e,["pageToken"]);n!==void 0&&i!=null&&u(n,["_query","pageToken"],i);let s=a(e,["filter"]);n!==void 0&&s!=null&&u(n,["_query","filter"],s);let l=a(e,["queryBase"]);return n!==void 0&&l!=null&&u(n,["_url","models_url"],fm(t,l)),o}function bS(t,e){let n={},o=a(e,["config"]);return o!=null&&AS(t,o,n),n}function NS(t,e){let n={},o=a(e,["config"]);return o!=null&&MS(t,o,n),n}function xS(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);let r=a(t,["_self"]);if(r!=null){let i=pm(r);Array.isArray(i)&&(i=i.map(s=>Hc(s))),u(e,["models"],i)}return e}function RS(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);let r=a(t,["_self"]);if(r!=null){let i=pm(r);Array.isArray(i)&&(i=i.map(s=>Bc(s))),u(e,["models"],i)}return e}function PS(t){let e={},n=a(t,["maskMode"]);n!=null&&u(e,["maskMode"],n);let o=a(t,["segmentationClasses"]);o!=null&&u(e,["maskClasses"],o);let r=a(t,["maskDilation"]);return r!=null&&u(e,["dilation"],r),e}function Hc(t){let e={},n=a(t,["name"]);n!=null&&u(e,["name"],n);let o=a(t,["displayName"]);o!=null&&u(e,["displayName"],o);let r=a(t,["description"]);r!=null&&u(e,["description"],r);let i=a(t,["version"]);i!=null&&u(e,["version"],i);let s=a(t,["_self"]);s!=null&&u(e,["tunedModelInfo"],YS(s));let l=a(t,["inputTokenLimit"]);l!=null&&u(e,["inputTokenLimit"],l);let c=a(t,["outputTokenLimit"]);c!=null&&u(e,["outputTokenLimit"],c);let d=a(t,["supportedGenerationMethods"]);d!=null&&u(e,["supportedActions"],d);let f=a(t,["temperature"]);f!=null&&u(e,["temperature"],f);let p=a(t,["maxTemperature"]);p!=null&&u(e,["maxTemperature"],p);let h=a(t,["topP"]);h!=null&&u(e,["topP"],h);let g=a(t,["topK"]);g!=null&&u(e,["topK"],g);let m=a(t,["thinking"]);return m!=null&&u(e,["thinking"],m),e}function Bc(t){let e={},n=a(t,["name"]);n!=null&&u(e,["name"],n);let o=a(t,["displayName"]);o!=null&&u(e,["displayName"],o);let r=a(t,["description"]);r!=null&&u(e,["description"],r);let i=a(t,["versionId"]);i!=null&&u(e,["version"],i);let s=a(t,["deployedModels"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(h=>W0(h))),u(e,["endpoints"],p)}let l=a(t,["labels"]);l!=null&&u(e,["labels"],l);let c=a(t,["_self"]);c!=null&&u(e,["tunedModelInfo"],KS(c));let d=a(t,["defaultCheckpointId"]);d!=null&&u(e,["defaultCheckpointId"],d);let f=a(t,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(h=>h)),u(e,["checkpoints"],p)}return e}function FS(t){let e={},n=a(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);let o=a(t,["codeExecutionResult"]);o!=null&&u(e,["codeExecutionResult"],o);let r=a(t,["executableCode"]);r!=null&&u(e,["executableCode"],r);let i=a(t,["fileData"]);i!=null&&u(e,["fileData"],j0(i));let s=a(t,["functionCall"]);s!=null&&u(e,["functionCall"],J0(s));let l=a(t,["functionResponse"]);l!=null&&u(e,["functionResponse"],l);let c=a(t,["inlineData"]);c!=null&&u(e,["inlineData"],E0(c));let d=a(t,["text"]);d!=null&&u(e,["text"],d);let f=a(t,["thought"]);f!=null&&u(e,["thought"],f);let p=a(t,["thoughtSignature"]);p!=null&&u(e,["thoughtSignature"],p);let h=a(t,["videoMetadata"]);return h!=null&&u(e,["videoMetadata"],h),e}function kS(t){let e={},n=a(t,["productImage"]);return n!=null&&u(e,["image"],dt(n)),e}function LS(t,e){let n={},o=a(t,["numberOfImages"]);e!==void 0&&o!=null&&u(e,["parameters","sampleCount"],o);let r=a(t,["baseSteps"]);e!==void 0&&r!=null&&u(e,["parameters","baseSteps"],r);let i=a(t,["outputGcsUri"]);e!==void 0&&i!=null&&u(e,["parameters","storageUri"],i);let s=a(t,["seed"]);e!==void 0&&s!=null&&u(e,["parameters","seed"],s);let l=a(t,["safetyFilterLevel"]);e!==void 0&&l!=null&&u(e,["parameters","safetySetting"],l);let c=a(t,["personGeneration"]);e!==void 0&&c!=null&&u(e,["parameters","personGeneration"],c);let d=a(t,["addWatermark"]);e!==void 0&&d!=null&&u(e,["parameters","addWatermark"],d);let f=a(t,["outputMimeType"]);e!==void 0&&f!=null&&u(e,["parameters","outputOptions","mimeType"],f);let p=a(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&u(e,["parameters","outputOptions","compressionQuality"],p);let h=a(t,["enhancePrompt"]);e!==void 0&&h!=null&&u(e,["parameters","enhancePrompt"],h);let g=a(t,["labels"]);return e!==void 0&&g!=null&&u(e,["labels"],g),n}function OS(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],W(t,o));let r=a(e,["source"]);r!=null&&US(r,n);let i=a(e,["config"]);return i!=null&&LS(i,n),n}function VS(t){let e={},n=a(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>qs(r))),u(e,["generatedImages"],o)}return e}function US(t,e){let n={},o=a(t,["prompt"]);e!==void 0&&o!=null&&u(e,["instances[0]","prompt"],o);let r=a(t,["personImage"]);e!==void 0&&r!=null&&u(e,["instances[0]","personImage","image"],dt(r));let i=a(t,["productImages"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>kS(l))),u(e,["instances[0]","productImages"],s)}return n}function HS(t){let e={},n=a(t,["referenceImage"]);n!=null&&u(e,["referenceImage"],dt(n));let o=a(t,["referenceId"]);o!=null&&u(e,["referenceId"],o);let r=a(t,["referenceType"]);r!=null&&u(e,["referenceType"],r);let i=a(t,["maskImageConfig"]);i!=null&&u(e,["maskImageConfig"],PS(i));let s=a(t,["controlImageConfig"]);s!=null&&u(e,["controlImageConfig"],w0(s));let l=a(t,["styleImageConfig"]);l!=null&&u(e,["styleImageConfig"],l);let c=a(t,["subjectImageConfig"]);return c!=null&&u(e,["subjectImageConfig"],c),e}function _m(t){let e={},n=a(t,["safetyAttributes","categories"]);n!=null&&u(e,["categories"],n);let o=a(t,["safetyAttributes","scores"]);o!=null&&u(e,["scores"],o);let r=a(t,["contentType"]);return r!=null&&u(e,["contentType"],r),e}function Cm(t){let e={},n=a(t,["safetyAttributes","categories"]);n!=null&&u(e,["categories"],n);let o=a(t,["safetyAttributes","scores"]);o!=null&&u(e,["scores"],o);let r=a(t,["contentType"]);return r!=null&&u(e,["contentType"],r),e}function BS(t){let e={},n=a(t,["category"]);if(n!=null&&u(e,["category"],n),a(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");let o=a(t,["threshold"]);return o!=null&&u(e,["threshold"],o),e}function GS(t){let e={},n=a(t,["image"]);return n!=null&&u(e,["image"],dt(n)),e}function $S(t,e){let n={},o=a(t,["mode"]);e!==void 0&&o!=null&&u(e,["parameters","mode"],o);let r=a(t,["maxPredictions"]);e!==void 0&&r!=null&&u(e,["parameters","maxPredictions"],r);let i=a(t,["confidenceThreshold"]);e!==void 0&&i!=null&&u(e,["parameters","confidenceThreshold"],i);let s=a(t,["maskDilation"]);e!==void 0&&s!=null&&u(e,["parameters","maskDilation"],s);let l=a(t,["binaryColorThreshold"]);e!==void 0&&l!=null&&u(e,["parameters","binaryColorThreshold"],l);let c=a(t,["labels"]);return e!==void 0&&c!=null&&u(e,["labels"],c),n}function qS(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],W(t,o));let r=a(e,["source"]);r!=null&&WS(r,n);let i=a(e,["config"]);return i!=null&&$S(i,n),n}function zS(t){let e={},n=a(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>mS(r))),u(e,["generatedMasks"],o)}return e}function WS(t,e){let n={},o=a(t,["prompt"]);e!==void 0&&o!=null&&u(e,["instances[0]","prompt"],o);let r=a(t,["image"]);e!==void 0&&r!=null&&u(e,["instances[0]","image"],dt(r));let i=a(t,["scribbleImage"]);return e!==void 0&&i!=null&&u(e,["instances[0]","scribble"],GS(i)),n}function jS(t){let e={},n=a(t,["functionCallingConfig"]);n!=null&&u(e,["functionCallingConfig"],Y0(n));let o=a(t,["retrievalConfig"]);return o!=null&&u(e,["retrievalConfig"],o),e}function JS(t){let e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),u(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let o=a(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],o);let r=a(t,["computerUse"]);r!=null&&u(e,["computerUse"],r);let i=a(t,["fileSearch"]);i!=null&&u(e,["fileSearch"],i);let s=a(t,["codeExecution"]);if(s!=null&&u(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let l=a(t,["googleMaps"]);l!=null&&u(e,["googleMaps"],DS(l));let c=a(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],IS(c));let d=a(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}function Dm(t){let e={},n=a(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(h=>K0(h))),u(e,["functionDeclarations"],p)}let o=a(t,["retrieval"]);o!=null&&u(e,["retrieval"],o);let r=a(t,["googleSearchRetrieval"]);r!=null&&u(e,["googleSearchRetrieval"],r);let i=a(t,["computerUse"]);if(i!=null&&u(e,["computerUse"],i),a(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");let s=a(t,["codeExecution"]);s!=null&&u(e,["codeExecution"],s);let l=a(t,["enterpriseWebSearch"]);l!=null&&u(e,["enterpriseWebSearch"],l);let c=a(t,["googleMaps"]);c!=null&&u(e,["googleMaps"],c);let d=a(t,["googleSearch"]);d!=null&&u(e,["googleSearch"],d);let f=a(t,["urlContext"]);return f!=null&&u(e,["urlContext"],f),e}function YS(t){let e={},n=a(t,["baseModel"]);n!=null&&u(e,["baseModel"],n);let o=a(t,["createTime"]);o!=null&&u(e,["createTime"],o);let r=a(t,["updateTime"]);return r!=null&&u(e,["updateTime"],r),e}function KS(t){let e={},n=a(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&u(e,["baseModel"],n);let o=a(t,["createTime"]);o!=null&&u(e,["createTime"],o);let r=a(t,["updateTime"]);return r!=null&&u(e,["updateTime"],r),e}function ZS(t,e){let n={},o=a(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);let r=a(t,["description"]);e!==void 0&&r!=null&&u(e,["description"],r);let i=a(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&u(e,["defaultCheckpointId"],i),n}function QS(t,e){let n={},o=a(t,["displayName"]);e!==void 0&&o!=null&&u(e,["displayName"],o);let r=a(t,["description"]);e!==void 0&&r!=null&&u(e,["description"],r);let i=a(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&u(e,["defaultCheckpointId"],i),n}function XS(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","name"],W(t,o));let r=a(e,["config"]);return r!=null&&ZS(r,n),n}function ew(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],W(t,o));let r=a(e,["config"]);return r!=null&&QS(r,n),n}function tw(t,e){let n={},o=a(t,["outputGcsUri"]);e!==void 0&&o!=null&&u(e,["parameters","storageUri"],o);let r=a(t,["safetyFilterLevel"]);e!==void 0&&r!=null&&u(e,["parameters","safetySetting"],r);let i=a(t,["personGeneration"]);e!==void 0&&i!=null&&u(e,["parameters","personGeneration"],i);let s=a(t,["includeRaiReason"]);e!==void 0&&s!=null&&u(e,["parameters","includeRaiReason"],s);let l=a(t,["outputMimeType"]);e!==void 0&&l!=null&&u(e,["parameters","outputOptions","mimeType"],l);let c=a(t,["outputCompressionQuality"]);e!==void 0&&c!=null&&u(e,["parameters","outputOptions","compressionQuality"],c);let d=a(t,["enhanceInputImage"]);e!==void 0&&d!=null&&u(e,["parameters","upscaleConfig","enhanceInputImage"],d);let f=a(t,["imagePreservationFactor"]);e!==void 0&&f!=null&&u(e,["parameters","upscaleConfig","imagePreservationFactor"],f);let p=a(t,["labels"]);e!==void 0&&p!=null&&u(e,["labels"],p);let h=a(t,["numberOfImages"]);e!==void 0&&h!=null&&u(e,["parameters","sampleCount"],h);let g=a(t,["mode"]);return e!==void 0&&g!=null&&u(e,["parameters","mode"],g),n}function nw(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["_url","model"],W(t,o));let r=a(e,["image"]);r!=null&&u(n,["instances[0]","image"],dt(r));let i=a(e,["upscaleFactor"]);i!=null&&u(n,["parameters","upscaleConfig","upscaleFactor"],i);let s=a(e,["config"]);return s!=null&&tw(s,n),n}function ow(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>qs(i))),u(e,["generatedImages"],r)}return e}function rw(t){let e={},n=a(t,["uri"]);n!=null&&u(e,["uri"],n);let o=a(t,["encodedVideo"]);o!=null&&u(e,["videoBytes"],Xt(o));let r=a(t,["encoding"]);return r!=null&&u(e,["mimeType"],r),e}function iw(t){let e={},n=a(t,["gcsUri"]);n!=null&&u(e,["uri"],n);let o=a(t,["bytesBase64Encoded"]);o!=null&&u(e,["videoBytes"],Xt(o));let r=a(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function sw(t){let e={},n=a(t,["image"]);n!=null&&u(e,["_self"],dt(n));let o=a(t,["maskMode"]);return o!=null&&u(e,["maskMode"],o),e}function aw(t){let e={},n=a(t,["image"]);n!=null&&u(e,["image"],zs(n));let o=a(t,["referenceType"]);return o!=null&&u(e,["referenceType"],o),e}function lw(t){let e={},n=a(t,["image"]);n!=null&&u(e,["image"],dt(n));let o=a(t,["referenceType"]);return o!=null&&u(e,["referenceType"],o),e}function Im(t){let e={},n=a(t,["uri"]);n!=null&&u(e,["uri"],n);let o=a(t,["videoBytes"]);o!=null&&u(e,["encodedVideo"],Xt(o));let r=a(t,["mimeType"]);return r!=null&&u(e,["encoding"],r),e}function Tm(t){let e={},n=a(t,["uri"]);n!=null&&u(e,["gcsUri"],n);let o=a(t,["videoBytes"]);o!=null&&u(e,["bytesBase64Encoded"],Xt(o));let r=a(t,["mimeType"]);return r!=null&&u(e,["mimeType"],r),e}function uw(t,e){let n={},o=a(t,["displayName"]);return e!==void 0&&o!=null&&u(e,["displayName"],o),n}function cw(t){let e={},n=a(t,["config"]);return n!=null&&uw(n,e),e}function dw(t,e){let n={},o=a(t,["force"]);return e!==void 0&&o!=null&&u(e,["_query","force"],o),n}function fw(t){let e={},n=a(t,["name"]);n!=null&&u(e,["_url","name"],n);let o=a(t,["config"]);return o!=null&&dw(o,e),e}function pw(t){let e={},n=a(t,["name"]);return n!=null&&u(e,["_url","name"],n),e}function hw(t,e){let n={},o=a(t,["customMetadata"]);if(e!==void 0&&o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["customMetadata"],i)}let r=a(t,["chunkingConfig"]);return e!==void 0&&r!=null&&u(e,["chunkingConfig"],r),n}function gw(t){let e={},n=a(t,["name"]);n!=null&&u(e,["name"],n);let o=a(t,["metadata"]);o!=null&&u(e,["metadata"],o);let r=a(t,["done"]);r!=null&&u(e,["done"],r);let i=a(t,["error"]);i!=null&&u(e,["error"],i);let s=a(t,["response"]);return s!=null&&u(e,["response"],yw(s)),e}function mw(t){let e={},n=a(t,["fileSearchStoreName"]);n!=null&&u(e,["_url","file_search_store_name"],n);let o=a(t,["fileName"]);o!=null&&u(e,["fileName"],o);let r=a(t,["config"]);return r!=null&&hw(r,e),e}function yw(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["parent"]);o!=null&&u(e,["parent"],o);let r=a(t,["documentName"]);return r!=null&&u(e,["documentName"],r),e}function vw(t,e){let n={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);let r=a(t,["pageToken"]);return e!==void 0&&r!=null&&u(e,["_query","pageToken"],r),n}function Ew(t){let e={},n=a(t,["config"]);return n!=null&&vw(n,e),e}function _w(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);let r=a(t,["fileSearchStores"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["fileSearchStores"],i)}return e}function Sm(t,e){let n={},o=a(t,["mimeType"]);e!==void 0&&o!=null&&u(e,["mimeType"],o);let r=a(t,["displayName"]);e!==void 0&&r!=null&&u(e,["displayName"],r);let i=a(t,["customMetadata"]);if(e!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>c)),u(e,["customMetadata"],l)}let s=a(t,["chunkingConfig"]);return e!==void 0&&s!=null&&u(e,["chunkingConfig"],s),n}function Cw(t){let e={},n=a(t,["fileSearchStoreName"]);n!=null&&u(e,["_url","file_search_store_name"],n);let o=a(t,["config"]);return o!=null&&Sm(o,e),e}function Dw(t){let e={},n=a(t,["sdkHttpResponse"]);return n!=null&&u(e,["sdkHttpResponse"],n),e}var Iw="Content-Type",Tw="X-Server-Timeout",Sw="User-Agent",Gc="x-goog-api-client",ww="1.34.0",Aw=`google-genai-sdk/${ww}`,Mw="v1beta1",bw="v1beta",$c=class{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});let r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:Mw,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:bw,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){let e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");let o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){let e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){let r=[this.getRequestUrlInternal(n)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,o);if(e.queryParams)for(let[s,l]of Object.entries(e.queryParams))r.searchParams.append(s,String(l));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,r.toString(),e.abortSignal),this.unaryApiCall(r,i,e.httpMethod)}patchHttpOptions(e,n){let o=JSON.parse(JSON.stringify(e));for(let[r,i]of Object.entries(n))typeof i=="object"?o[r]=Object.assign(Object.assign({},o[r]),i):i!==void 0&&(o[r]=i);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));let o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,r.toString(),e.abortSignal),this.streamApiCall(r,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o,r){if(n&&n.timeout||r){let i=new AbortController,s=i.signal;if(n.timeout&&n?.timeout>0){let l=setTimeout(()=>i.abort(),n.timeout);l&&typeof l.unref=="function"&&l.unref()}r&&r.addEventListener("abort",()=>{i.abort()}),e.signal=s}return n&&n.extraBody!==null&&Nw(e,n.extraBody),e.headers=await this.getHeadersInternal(n,o),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await $g(r),new hr(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await $g(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return lt(this,arguments,function*(){var o;let r=(o=e?.body)===null||o===void 0?void 0:o.getReader(),i=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let s="",l="data:",c=[`

`,"\r\r",`\r
\r
`];for(;;){let{done:d,value:f}=yield x(r.read());if(d){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}let p=i.decode(f,{stream:!0});try{let m=JSON.parse(p);if("error"in m){let y=JSON.parse(JSON.stringify(m.error)),E=y.status,v=y.code,w=`got status: ${E}. ${JSON.stringify(m)}`;if(v>=400&&v<600)throw new Ms({message:w,status:v})}}catch(m){if(m.name==="ApiError")throw m}s+=p;let h=-1,g=0;for(;;){h=-1,g=0;for(let E of c){let v=s.indexOf(E);v!==-1&&(h===-1||v<h)&&(h=v,g=E.length)}if(h===-1)break;let m=s.substring(0,h);s=s.substring(h+g);let y=m.trim();if(y.startsWith(l)){let E=y.substring(l.length).trim();try{let v=new Response(E,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield x(new hr(v))}catch(v){throw new Error(`exception parsing stream chunk ${E}. ${v}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){let e={},n=Aw+" "+this.clientOptions.userAgentExtra;return e[Sw]=n,e[Gc]=n,e[Iw]="application/json",e}async getHeadersInternal(e,n){let o=new Headers;if(e&&e.headers){for(let[r,i]of Object.entries(e.headers))o.append(r,i);e.timeout&&e.timeout>0&&o.append(Tw,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,n),o}getFileName(e){var n;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(n=o.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),o}async uploadFile(e,n){var o;let r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);let i=this.clientOptions.uploader,s=await i.stat(e);r.sizeBytes=String(s.size);let l=(o=n?.mimeType)!==null&&o!==void 0?o:s.type;if(l===void 0||l==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=l;let c={file:r},d=this.getFileName(e),f=I("upload/v1beta/files",c._url),p=await this.fetchUploadUrl(f,r.sizeBytes,r.mimeType,d,c,n?.httpOptions);return i.upload(e,p,this)}async uploadFileToFileSearchStore(e,n,o){var r;let i=this.clientOptions.uploader,s=await i.stat(n),l=String(s.size),c=(r=o?.mimeType)!==null&&r!==void 0?r:s.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");let d=`upload/v1beta/${e}:uploadToFileSearchStore`,f=this.getFileName(n),p={};o!=null&&Sm(o,p);let h=await this.fetchUploadUrl(d,l,c,f,p,o?.httpOptions);return i.uploadToFileSearchStore(n,h,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,o,r,i,s){var l;let c={};s?c=s:c={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};let d=await this.request({path:e,body:JSON.stringify(i),httpMethod:"POST",httpOptions:c});if(!d||!d?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");let f=(l=d?.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}};async function $g(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){let n=t.status,o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};let r=JSON.stringify(o);throw n>=400&&n<600?new Ms({message:r,status:n}):new Error(r)}}function Nw(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{let i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(i,s){let l=Object.assign({},i);for(let c in s)if(Object.prototype.hasOwnProperty.call(s,c)){let d=s[c],f=l[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?l[c]=o(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),l[c]=d)}return l}let r=o(n,e);t.body=JSON.stringify(r)}var xw="mcp_used/unknown",Rw=!1;function wm(t){for(let e of t)if(Pw(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Rw}function Am(t){var e;let n=(e=t[Gc])!==null&&e!==void 0?e:"";t[Gc]=(n+` ${xw}`).trimStart()}function Pw(t){return t!==null&&typeof t=="object"&&t instanceof qc}function Fw(t){return lt(this,arguments,function*(n,o=100){let r,i=0;for(;i<o;){let s=yield x(n.listTools({cursor:r}));for(let l of s.tools)yield yield x(l),i++;if(!s.nextCursor)break;r=s.nextCursor}})}var qc=class t{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new t(e,n)}async initialize(){var e,n,o,r;if(this.mcpTools.length>0)return;let i={},s=[];for(let f of this.mcpClients)try{for(var l=!0,c=(n=void 0,ut(Fw(f))),d;d=await c.next(),e=d.done,!e;l=!0){r=d.value,l=!1;let p=r;s.push(p);let h=p.name;if(i[h])throw new Error(`Duplicate function name ${h} found in MCP tools. Please ensure function names are unique.`);i[h]=f}}catch(p){n={error:p}}finally{try{!l&&!e&&(o=c.return)&&await o.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),vI(this.mcpTools,this.config)}async callTool(e){await this.initialize();let n=[];for(let o of e)if(o.name in this.functionNameToMcpClient){let r=this.functionNameToMcpClient[o.name],i;this.config.timeout&&(i={timeout:this.config.timeout});let s=await r.callTool({name:o.name,arguments:o.args},void 0,i);n.push({functionResponse:{name:o.name,response:s.isError?{error:s}:s}})}return n}};async function kw(t,e,n){let o=new xc,r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(o,r),e(o)}var zc=class{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");let r=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),s=Ow(this.apiClient.getDefaultHeaders()),l=this.apiClient.getApiKey(),c=`${r}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${l}`,d=()=>{},f=new Promise(T=>{d=T}),p=e.callbacks,h=function(){d({})},g=this.apiClient,m={onopen:h,onmessage:T=>{kw(g,p.onmessage,T)},onerror:(n=p?.onerror)!==null&&n!==void 0?n:function(T){},onclose:(o=p?.onclose)!==null&&o!==void 0?o:function(T){}},y=this.webSocketFactory.create(c,Lw(s),m);y.connect(),await f;let w={setup:{model:W(this.apiClient,e.model)}};return y.send(JSON.stringify(w)),new Wc(y,this.apiClient)}},Wc=class{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");let n=c0(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});let n=u0(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){let n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(fr.PLAY)}pause(){this.sendPlaybackControl(fr.PAUSE)}stop(){this.sendPlaybackControl(fr.STOP)}resetContext(){this.sendPlaybackControl(fr.RESET_CONTEXT)}close(){this.conn.close()}};function Lw(t){let e={};return t.forEach((n,o)=>{e[o]=n}),e}function Ow(t){let e=new Headers;for(let[n,o]of Object.entries(t))e.append(n,o);return e}var Vw="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function Uw(t,e,n){let o=new Nc,r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;let i=JSON.parse(r);if(t.isVertexAI()){let s=p0(i);Object.assign(o,s)}else Object.assign(o,i);e(o)}var jc=class{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new zc(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,r,i,s,l;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");let c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion(),f,p=this.apiClient.getHeaders();e.config&&e.config.tools&&wm(e.config.tools)&&Am(p);let h=Gw(p);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(h,f);else{let R=this.apiClient.getApiKey(),G="BidiGenerateContent",ye="key";R?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),G="BidiGenerateContentConstrained",ye="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${G}?${ye}=${R}`}let g=()=>{},m=new Promise(R=>{g=R}),y=e.callbacks,E=function(){var R;(R=y?.onopen)===null||R===void 0||R.call(y),g({})},v=this.apiClient,w={onopen:E,onmessage:R=>{Uw(v,y.onmessage,R)},onerror:(n=y?.onerror)!==null&&n!==void 0?n:function(R){},onclose:(o=y?.onclose)!==null&&o!==void 0?o:function(R){}},T=this.webSocketFactory.create(f,Bw(h),w);T.connect(),await m;let M=W(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&M.startsWith("publishers/")){let R=this.apiClient.getProject(),G=this.apiClient.getLocation();M=`projects/${R}/locations/${G}/`+M}let N={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[yc.AUDIO]}:e.config.responseModalities=[yc.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");let U=(l=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[],k=[];for(let R of U)if(this.isCallableTool(R)){let G=R;k.push(await G.tool())}else k.push(R);k.length>0&&(e.config.tools=k);let ae={model:M,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?N=l0(this.apiClient,ae):N=a0(this.apiClient,ae),delete N.config,T.send(JSON.stringify(N)),new Jc(T,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}},Hw={turnComplete:!0},Jc=class{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=Je(n.turns),e.isVertexAI()||(o=o.map(r=>$s(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(let i of o){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(Vw)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},Hw),e);let n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:f0(e)}:n={realtimeInput:d0(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");let n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}};function Bw(t){let e={};return t.forEach((n,o)=>{e[o]=n}),e}function Gw(t){let e=new Headers;for(let[n,o]of Object.entries(t))e.append(n,o);return e}var qg=10;function zg(t){var e,n,o;if(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(let s of(n=t?.tools)!==null&&n!==void 0?n:[])if(ro(s)){r=!0;break}if(!r)return!0;let i=(o=t?.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function ro(t){return"callTool"in t&&typeof t.callTool=="function"}function $w(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>ro(r)))!==null&&o!==void 0?o:!1}function Wg(t){var e;let n=[];return!((e=t?.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((o,r)=>{if(ro(o))return;let i=o;i.functionDeclarations&&i.functionDeclarations.length>0&&n.push(r)}),n}function jg(t){var e;return!(!((e=t?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}var Yc=class extends ct{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,r,i,s,l;let c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!$w(n)||zg(n.config))return await this.generateContentInternal(c);let d=Wg(n);if(d.length>0){let y=d.map(E=>`tools[${E}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${y}.`)}let f,p,h=Je(c.contents),g=(i=(r=(o=c.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:qg,m=0;for(;m<g&&(f=await this.generateContentInternal(c),!(!f.functionCalls||f.functionCalls.length===0));){let y=f.candidates[0].content,E=[];for(let v of(l=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&l!==void 0?l:[])if(ro(v)){let T=await v.callTool(f.functionCalls);E.push(...T)}m++,p={role:"user",parts:E},c.contents=Je(c.contents),c.contents.push(y),c.contents.push(p),jg(c.config)&&(h.push(y),h.push(p))}return jg(c.config)&&(f.automaticFunctionCallingHistory=h),f},this.generateContentStream=async n=>{var o,r,i,s,l;if(this.maybeMoveToResponseJsonSchem(n),zg(n.config)){let p=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(p)}let c=Wg(n);if(c.length>0){let p=c.map(h=>`tools[${h}]`).join(", ");throw new Error(`Incompatible tools found at ${p}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}let d=(i=(r=(o=n?.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||i===void 0?void 0:i.streamFunctionCallArguments,f=(l=(s=n?.config)===null||s===void 0?void 0:s.automaticFunctionCalling)===null||l===void 0?void 0:l.disable;if(d&&!f)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var r;let i,s=[];if(o?.generatedImages)for(let c of o.generatedImages)c&&c?.safetyAttributes&&((r=c?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?i=c?.safetyAttributes:s.push(c);let l;return i?l={generatedImages:s,positivePromptSafetyAttributes:i,sdkHttpResponse:o.sdkHttpResponse}:l={generatedImages:s,sdkHttpResponse:o.sdkHttpResponse},l}),this.list=async n=>{var o;let s={config:Object.assign(Object.assign({},{queryBase:!0}),n?.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((o=s.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Lt(en.PAGED_ITEM_MODELS,l=>this.listInternal(l),await this.listInternal(s),s)},this.editImage=async n=>{let o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));let r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var o,r,i,s,l,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(i=n.source)===null||i===void 0?void 0:i.video)===null||s===void 0)&&s.uri&&(!((c=(l=n.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,r;let i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;let s=await Promise.all(i.map(async c=>ro(c)?await c.tool():c)),l={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(l.config.tools=s,e.config&&e.config.tools&&wm(e.config.tools)){let c=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{},d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),Am(d),l.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return l}async initAfcToolsMap(e){var n,o,r;let i=new Map;for(let s of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(ro(s)){let l=s,c=await l.tool();for(let d of(r=c.functionDeclarations)!==null&&r!==void 0?r:[]){if(!d.name)throw new Error("Function declaration name is required.");if(i.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);i.set(d.name,l)}}return i}async processAfcStream(e){var n,o,r;let i=(r=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:qg,s=!1,l=0,c=await this.initAfcToolsMap(e);return(function(d,f,p){return lt(this,arguments,function*(){for(var h,g,m,y,E,v;l<i;){s&&(l++,s=!1);let N=yield x(d.processParamsMaybeAddMcpUsage(p)),U=yield x(d.generateContentStreamInternal(N)),k=[],ae=[];try{for(var w=!0,T=(g=void 0,ut(U)),M;M=yield x(T.next()),h=M.done,!h;w=!0){y=M.value,w=!1;let R=y;if(yield yield x(R),R.candidates&&(!((E=R.candidates[0])===null||E===void 0)&&E.content)){ae.push(R.candidates[0].content);for(let G of(v=R.candidates[0].content.parts)!==null&&v!==void 0?v:[])if(l<i&&G.functionCall){if(!G.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(G.functionCall.name)){let ye=yield x(f.get(G.functionCall.name).callTool([G.functionCall]));k.push(...ye)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${G.functionCall.name}`)}}}}catch(R){g={error:R}}finally{try{!w&&!h&&(m=T.return)&&(yield x(m.call(T)))}finally{if(g)throw g.error}}if(k.length>0){s=!0;let R=new Mn;R.candidates=[{content:{role:"user",parts:k}}],yield yield x(R);let G=[];G.push(...ae),G.push({role:"user",parts:k});let ye=Je(p.contents).concat(G);p.contents=ye}else break}})})(this,c,e)}async generateContentInternal(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=Hg(this.apiClient,e);return l=I("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=Gg(f),h=new Mn;return Object.assign(h,p),h})}else{let d=Ug(this.apiClient,e);return l=I("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=Bg(f),h=new Mn;return Object.assign(h,p),h})}}async generateContentStreamInternal(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=Hg(this.apiClient,e);return l=I("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(p){return lt(this,arguments,function*(){var h,g,m,y;try{for(var E=!0,v=ut(p),w;w=yield x(v.next()),h=w.done,!h;E=!0){y=w.value,E=!1;let T=y,M=Gg(yield x(T.json()));M.sdkHttpResponse={headers:T.headers};let N=new Mn;Object.assign(N,M),yield yield x(N)}}catch(T){g={error:T}}finally{try{!E&&!h&&(m=v.return)&&(yield x(m.call(v)))}finally{if(g)throw g.error}}})})}else{let d=Ug(this.apiClient,e);return l=I("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(p){return lt(this,arguments,function*(){var h,g,m,y;try{for(var E=!0,v=ut(p),w;w=yield x(v.next()),h=w.done,!h;E=!0){y=w.value,E=!1;let T=y,M=Bg(yield x(T.json()));M.sdkHttpResponse={headers:T.headers};let N=new Mn;Object.assign(N,M),yield yield x(N)}}catch(T){g={error:T}}finally{try{!E&&!h&&(m=v.return)&&(yield x(m.call(v)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=$0(this.apiClient,e);return l=I("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=z0(f),h=new gs;return Object.assign(h,p),h})}else{let d=G0(this.apiClient,e);return l=I("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=q0(f),h=new gs;return Object.assign(h,p),h})}}async generateImagesInternal(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=nS(this.apiClient,e);return l=I("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=rS(f),h=new ms;return Object.assign(h,p),h})}else{let d=tS(this.apiClient,e);return l=I("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=oS(f),h=new ms;return Object.assign(h,p),h})}}async editImageInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){let l=V0(this.apiClient,e);return i=I("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{let d=U0(c),f=new vc;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){let l=nw(this.apiClient,e);return i=I("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{let d=ow(c),f=new Ec;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){let l=OS(this.apiClient,e);return i=I("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{let d=VS(c),f=new _c;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){let l=qS(this.apiClient,e);return i=I("{model}:predict",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{let d=zS(c),f=new Cc;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=CS(this.apiClient,e);return l=I("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Bc(f))}else{let d=_S(this.apiClient,e);return l=I("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Hc(f))}}async listInternal(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=NS(this.apiClient,e);return l=I("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=RS(f),h=new ys;return Object.assign(h,p),h})}else{let d=bS(this.apiClient,e);return l=I("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=xS(f),h=new ys;return Object.assign(h,p),h})}}async update(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=ew(this.apiClient,e);return l=I("{model}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Bc(f))}else{let d=XS(this.apiClient,e);return l=I("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Hc(f))}}async delete(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=F0(this.apiClient,e);return l=I("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=L0(f),h=new vs;return Object.assign(h,p),h})}else{let d=P0(this.apiClient,e);return l=I("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=k0(f),h=new vs;return Object.assign(h,p),h})}}async countTokens(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=N0(this.apiClient,e);return l=I("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=R0(f),h=new Es;return Object.assign(h,p),h})}else{let d=b0(this.apiClient,e);return l=I("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=x0(f),h=new Es;return Object.assign(h,p),h})}}async computeTokens(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){let l=D0(this.apiClient,e);return i=I("{model}:computeTokens",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{let d=I0(c),f=new Dc;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=cS(this.apiClient,e);return l=I("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{let p=lS(f),h=new _s;return Object.assign(h,p),h})}else{let d=uS(this.apiClient,e);return l=I("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{let p=aS(f),h=new _s;return Object.assign(h,p),h})}}};var Kc=class extends ct{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){let n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let r=n.name.split("/operations/")[0],i;o&&"httpOptions"in o&&(i=o.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){let n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){let r=n.name.split("/operations/")[0],i;o&&"httpOptions"in o&&(i=o.httpOptions);let s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,_isVertexAI:!0})}else{let r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=iI(e);return l=I("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s}else{let d=rI(e);return l=I("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){let l=ZD(e);return i=I("{resourceName}:fetchPredictOperation",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}};function qw(t){let e={},n=a(t,["data"]);if(n!=null&&u(e,["data"],n),a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function zw(t){let e={},n=a(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>eA(i))),u(e,["parts"],r)}let o=a(t,["role"]);return o!=null&&u(e,["role"],o),e}function Ww(t,e,n){let o={},r=a(e,["expireTime"]);n!==void 0&&r!=null&&u(n,["expireTime"],r);let i=a(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&u(n,["newSessionExpireTime"],i);let s=a(e,["uses"]);n!==void 0&&s!=null&&u(n,["uses"],s);let l=a(e,["liveConnectConstraints"]);n!==void 0&&l!=null&&u(n,["bidiGenerateContentSetup"],Xw(t,l));let c=a(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&u(n,["fieldMask"],c),o}function jw(t,e){let n={},o=a(e,["config"]);return o!=null&&u(n,["config"],Ww(t,o,n)),n}function Jw(t){let e={};if(a(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");let n=a(t,["fileUri"]);n!=null&&u(e,["fileUri"],n);let o=a(t,["mimeType"]);return o!=null&&u(e,["mimeType"],o),e}function Yw(t){let e={},n=a(t,["id"]);n!=null&&u(e,["id"],n);let o=a(t,["args"]);o!=null&&u(e,["args"],o);let r=a(t,["name"]);if(r!=null&&u(e,["name"],r),a(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(a(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Kw(t){let e={};if(a(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");let n=a(t,["enableWidget"]);return n!=null&&u(e,["enableWidget"],n),e}function Zw(t){let e={};if(a(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(a(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");let n=a(t,["timeRangeFilter"]);return n!=null&&u(e,["timeRangeFilter"],n),e}function Qw(t,e){let n={},o=a(t,["generationConfig"]);e!==void 0&&o!=null&&u(e,["setup","generationConfig"],o);let r=a(t,["responseModalities"]);e!==void 0&&r!=null&&u(e,["setup","generationConfig","responseModalities"],r);let i=a(t,["temperature"]);e!==void 0&&i!=null&&u(e,["setup","generationConfig","temperature"],i);let s=a(t,["topP"]);e!==void 0&&s!=null&&u(e,["setup","generationConfig","topP"],s);let l=a(t,["topK"]);e!==void 0&&l!=null&&u(e,["setup","generationConfig","topK"],l);let c=a(t,["maxOutputTokens"]);e!==void 0&&c!=null&&u(e,["setup","generationConfig","maxOutputTokens"],c);let d=a(t,["mediaResolution"]);e!==void 0&&d!=null&&u(e,["setup","generationConfig","mediaResolution"],d);let f=a(t,["seed"]);e!==void 0&&f!=null&&u(e,["setup","generationConfig","seed"],f);let p=a(t,["speechConfig"]);e!==void 0&&p!=null&&u(e,["setup","generationConfig","speechConfig"],vd(p));let h=a(t,["thinkingConfig"]);e!==void 0&&h!=null&&u(e,["setup","generationConfig","thinkingConfig"],h);let g=a(t,["enableAffectiveDialog"]);e!==void 0&&g!=null&&u(e,["setup","generationConfig","enableAffectiveDialog"],g);let m=a(t,["systemInstruction"]);e!==void 0&&m!=null&&u(e,["setup","systemInstruction"],zw(Se(m)));let y=a(t,["tools"]);if(e!==void 0&&y!=null){let U=lo(y);Array.isArray(U)&&(U=U.map(k=>nA(ao(k)))),u(e,["setup","tools"],U)}let E=a(t,["sessionResumption"]);e!==void 0&&E!=null&&u(e,["setup","sessionResumption"],tA(E));let v=a(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&u(e,["setup","inputAudioTranscription"],v);let w=a(t,["outputAudioTranscription"]);e!==void 0&&w!=null&&u(e,["setup","outputAudioTranscription"],w);let T=a(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&u(e,["setup","realtimeInputConfig"],T);let M=a(t,["contextWindowCompression"]);e!==void 0&&M!=null&&u(e,["setup","contextWindowCompression"],M);let N=a(t,["proactivity"]);if(e!==void 0&&N!=null&&u(e,["setup","proactivity"],N),a(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function Xw(t,e){let n={},o=a(e,["model"]);o!=null&&u(n,["setup","model"],W(t,o));let r=a(e,["config"]);return r!=null&&u(n,["config"],Qw(r,n)),n}function eA(t){let e={},n=a(t,["mediaResolution"]);n!=null&&u(e,["mediaResolution"],n);let o=a(t,["codeExecutionResult"]);o!=null&&u(e,["codeExecutionResult"],o);let r=a(t,["executableCode"]);r!=null&&u(e,["executableCode"],r);let i=a(t,["fileData"]);i!=null&&u(e,["fileData"],Jw(i));let s=a(t,["functionCall"]);s!=null&&u(e,["functionCall"],Yw(s));let l=a(t,["functionResponse"]);l!=null&&u(e,["functionResponse"],l);let c=a(t,["inlineData"]);c!=null&&u(e,["inlineData"],qw(c));let d=a(t,["text"]);d!=null&&u(e,["text"],d);let f=a(t,["thought"]);f!=null&&u(e,["thought"],f);let p=a(t,["thoughtSignature"]);p!=null&&u(e,["thoughtSignature"],p);let h=a(t,["videoMetadata"]);return h!=null&&u(e,["videoMetadata"],h),e}function tA(t){let e={},n=a(t,["handle"]);if(n!=null&&u(e,["handle"],n),a(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function nA(t){let e={},n=a(t,["functionDeclarations"]);if(n!=null){let f=n;Array.isArray(f)&&(f=f.map(p=>p)),u(e,["functionDeclarations"],f)}if(a(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");let o=a(t,["googleSearchRetrieval"]);o!=null&&u(e,["googleSearchRetrieval"],o);let r=a(t,["computerUse"]);r!=null&&u(e,["computerUse"],r);let i=a(t,["fileSearch"]);i!=null&&u(e,["fileSearch"],i);let s=a(t,["codeExecution"]);if(s!=null&&u(e,["codeExecution"],s),a(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");let l=a(t,["googleMaps"]);l!=null&&u(e,["googleMaps"],Kw(l));let c=a(t,["googleSearch"]);c!=null&&u(e,["googleSearch"],Zw(c));let d=a(t,["urlContext"]);return d!=null&&u(e,["urlContext"],d),e}function oA(t){let e=[];for(let n in t)if(Object.prototype.hasOwnProperty.call(t,n)){let o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){let r=Object.keys(o).map(i=>`${n}.${i}`);e.push(...r)}else e.push(n)}return e.join(",")}function rA(t,e){let n=null,o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){let i=o.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;let r=t.fieldMask;if(n){let i=oA(n);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)i?t.fieldMask=i:delete t.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){let s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"],l=[];r.length>0&&(l=r.map(d=>s.includes(d)?`generationConfig.${d}`:d));let c=[];i&&c.push(i),l.length>0&&c.push(...l),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}var Zc=class extends ct{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{let l=jw(this.apiClient,e);i=I("auth_tokens",l._url),s=l._query,delete l.config,delete l._url,delete l._query;let c=rA(l,e.config);return r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>d)}}};function iA(t,e){let n={},o=a(t,["force"]);return e!==void 0&&o!=null&&u(e,["_query","force"],o),n}function sA(t){let e={},n=a(t,["name"]);n!=null&&u(e,["_url","name"],n);let o=a(t,["config"]);return o!=null&&iA(o,e),e}function aA(t){let e={},n=a(t,["name"]);return n!=null&&u(e,["_url","name"],n),e}function lA(t,e){let n={},o=a(t,["pageSize"]);e!==void 0&&o!=null&&u(e,["_query","pageSize"],o);let r=a(t,["pageToken"]);return e!==void 0&&r!=null&&u(e,["_query","pageToken"],r),n}function uA(t){let e={},n=a(t,["parent"]);n!=null&&u(e,["_url","parent"],n);let o=a(t,["config"]);return o!=null&&lA(o,e),e}function cA(t){let e={},n=a(t,["sdkHttpResponse"]);n!=null&&u(e,["sdkHttpResponse"],n);let o=a(t,["nextPageToken"]);o!=null&&u(e,["nextPageToken"],o);let r=a(t,["documents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),u(e,["documents"],i)}return e}var Qc=class extends ct{constructor(e){super(),this.apiClient=e,this.list=async n=>new Lt(en.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:n.parent,config:o.config}),await this.listInternal(n),n)}async get(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=aA(e);return i=I("{name}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,o;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=sA(e);r=I("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=uA(e);return i=I("{parent}/documents",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{let d=cA(c),f=new Ic;return Object.assign(f,d),f})}}};var Xc=class extends ct{constructor(e,n=new Qc(e)){super(),this.apiClient=e,this.documents=n,this.list=async(o={})=>new Lt(en.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=cw(e);return i=I("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async get(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=pw(e);return i=I("{name}",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,o;let r="",i={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let s=fw(e);r=I("{name}",s._url),i=s._query,delete s._url,delete s._query,await this.apiClient.request({path:r,queryParams:i,body:JSON.stringify(s),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=Ew(e);return i=I("fileSearchStores",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{let d=_w(c),f=new Tc;return Object.assign(f,d),f})}}async uploadToFileSearchStoreInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=Cw(e);return i=I("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{let d=Dw(c),f=new Sc;return Object.assign(f,d),f})}}async importFile(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=mw(e);return i=I("{file_search_store_name}:importFile",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{let d=gw(c),f=new wc;return Object.assign(f,d),f})}}};var Mm=function(){let{crypto:t}=globalThis;if(t?.randomUUID)return Mm=t.randomUUID.bind(t),t.randomUUID();let e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^n()&15>>+o/4).toString(16))},dA=()=>Mm();function ed(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}var td=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){let e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};var xe=class extends Error{},Re=class t extends xe{constructor(e,n,o,r){super(`${t.makeMessage(e,n,o)}`),this.status=e,this.headers=r,this.error=n}static makeMessage(e,n,o){let r=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,n,o,r){if(!e||!r)return new io({message:o,cause:td(n)});let i=n;return e===400?new Ns(e,i,o,r):e===401?new xs(e,i,o,r):e===403?new Rs(e,i,o,r):e===404?new Ps(e,i,o,r):e===409?new Fs(e,i,o,r):e===422?new ks(e,i,o,r):e===429?new Ls(e,i,o,r):e>=500?new Os(e,i,o,r):new t(e,i,o,r)}},gr=class extends Re{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}},io=class extends Re{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}},bs=class extends io{constructor({message:e}={}){super({message:e??"Request timed out."})}},Ns=class extends Re{},xs=class extends Re{},Rs=class extends Re{},Ps=class extends Re{},Fs=class extends Re{},ks=class extends Re{},Ls=class extends Re{},Os=class extends Re{};var fA=/^[a-z][a-z0-9+.-]*:/i,pA=t=>fA.test(t),nd=t=>(nd=Array.isArray,nd(t)),hA=nd,gA=hA,Jg=gA;function mA(t){if(!t)return!0;for(let e in t)return!1;return!0}function yA(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var vA=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new xe(`${t} must be an integer`);if(e<0)throw new xe(`${t} must be a positive integer`);return e},EA=t=>{try{return JSON.parse(t)}catch{return}};var _A=t=>new Promise(e=>setTimeout(e,t));var no="0.0.1";function CA(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}var DA=()=>{var t,e,n,o,r;let i=CA();if(i==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":no,"X-Stainless-OS":Kg(Deno.build.os),"X-Stainless-Arch":Yg(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":no,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(i==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":no,"X-Stainless-OS":Kg((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":Yg((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};let s=IA();return s?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":no,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${s.browser}`,"X-Stainless-Runtime-Version":s.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":no,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function IA(){if(typeof navigator>"u"||!navigator)return null;let t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(let{key:e,pattern:n}of t){let o=n.exec(navigator.userAgent);if(o){let r=o[1]||0,i=o[2]||0,s=o[3]||0;return{browser:e,version:`${r}.${i}.${s}`}}}return null}var Yg=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",Kg=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown"),ls,TA=()=>ls??(ls=DA());function SA(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function bm(...t){let e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function wA(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return bm({start(){},async pull(n){let{done:o,value:r}=await e.next();o?n.close():n.enqueue(r)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function Nm(t){if(t[Symbol.asyncIterator])return t;let e=t.getReader();return{async next(){try{let n=await e.read();return n?.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){let n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function AA(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}let o=t.getReader(),r=o.cancel();o.releaseLock(),await r}var MA=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});var xm=()=>{var t;if(typeof File>"u"){let{process:e}=globalThis,n=typeof((t=e?.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function hc(t,e,n){return xm(),new File(t,e??"unknown_file",n)}function bA(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}var NA=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";var Rm=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",xA=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&Rm(t),RA=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function PA(t,e,n){if(xm(),t=await t,xA(t))return t instanceof File?t:hc([await t.arrayBuffer()],t.name);if(RA(t)){let r=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),hc(await od(r),e,n)}let o=await od(t);if(e||(e=bA(t)),!n?.type){let r=o.find(i=>typeof i=="object"&&"type"in i&&i.type);typeof r=="string"&&(n=Object.assign(Object.assign({},n),{type:r}))}return hc(o,e,n)}async function od(t){var e,n,o,r,i;let s=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)s.push(t);else if(Rm(t))s.push(t instanceof Blob?t:await t.arrayBuffer());else if(NA(t))try{for(var l=!0,c=ut(t),d;d=await c.next(),e=d.done,!e;l=!0){r=d.value,l=!1;let f=r;s.push(...await od(f))}}catch(f){n={error:f}}finally{try{!l&&!e&&(o=c.return)&&await o.call(c)}finally{if(n)throw n.error}}else{let f=(i=t?.constructor)===null||i===void 0?void 0:i.name;throw new Error(`Unexpected data type: ${typeof t}${f?`; constructor: ${f}`:""}${FA(t)}`)}return s}function FA(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}var kA=(()=>{class t{constructor(n){this._client=n}}t._key=[];return t})();function Pm(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}var Zg=Object.freeze(Object.create(null)),LA=(t=Pm)=>function(n,...o){if(n.length===1)return n[0];let r=!1,i=[],s=n.reduce((f,p,h)=>{var g,m,y;/[?#]/.test(p)&&(r=!0);let E=o[h],v=(r?encodeURIComponent:t)(""+E);return h!==o.length&&(E==null||typeof E=="object"&&E.toString===((y=Object.getPrototypeOf((m=Object.getPrototypeOf((g=E.hasOwnProperty)!==null&&g!==void 0?g:Zg))!==null&&m!==void 0?m:Zg))===null||y===void 0?void 0:y.toString))&&(v=E+"",i.push({start:f.length+p.length,length:v.length,error:`Value of type ${Object.prototype.toString.call(E).slice(8,-1)} is not a valid path parameter`})),f+p+(h===o.length?"":v)},""),l=s.split(/[?#]/,1)[0],c=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi,d;for(;(d=c.exec(l))!==null;)i.push({start:d.index,length:d[0].length,error:`Value "${d[0]}" can't be safely passed as a path parameter`});if(i.sort((f,p)=>f.start-p.start),i.length>0){let f=0,p=i.reduce((h,g)=>{let m=" ".repeat(g.start-f),y="^".repeat(g.length);return f=g.start+g.length,h+m+y},"");throw new xe(`Path parameters result in path with invalid segments:
${i.map(h=>h.error).join(`
`)}
${s}
${p}`)}return s},us=LA(Pm);var Vs=class extends kA{create(e,n){var o;let{api_version:r=this._client.apiVersion}=e,i=As(e,["api_version"]);if("model"in i&&"agent_config"in i)throw new xe("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in i&&"generation_config"in i)throw new xe("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(us`/${r}/interactions`,Object.assign(Object.assign({body:i},n),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,n={},o){let{api_version:r=this._client.apiVersion}=n??{};return this._client.delete(us`/${r}/interactions/${e}`,o)}cancel(e,n={},o){let{api_version:r=this._client.apiVersion}=n??{};return this._client.post(us`/${r}/interactions/${e}/cancel`,o)}get(e,n={},o){var r;let i=n??{},{api_version:s=this._client.apiVersion}=i,l=As(i,["api_version"]);return this._client.get(us`/${s}/interactions/${e}`,Object.assign(Object.assign({query:l},o),{stream:(r=n?.stream)!==null&&r!==void 0?r:!1}))}};Vs._key=Object.freeze(["interactions"]);var Us=class extends Vs{};function OA(t){let e=0;for(let r of t)e+=r.length;let n=new Uint8Array(e),o=0;for(let r of t)n.set(r,o),o+=r.length;return n}var cs;function Ed(t){let e;return(cs??(e=new globalThis.TextEncoder,cs=e.encode.bind(e)))(t)}var ds;function Qg(t){let e;return(ds??(e=new globalThis.TextDecoder,ds=e.decode.bind(e)))(t)}var so=class{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];let n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?Ed(e):e;this.buffer=OA([this.buffer,n]);let o=[],r;for(;(r=VA(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(Qg(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}let i=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,s=Qg(this.buffer.subarray(0,i));o.push(s),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}};so.NEWLINE_CHARS=new Set([`
`,"\r"]);so.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function VA(t,e){for(let r=e??0;r<t.length;r++){if(t[r]===10)return{preceding:r,index:r+1,carriage:!1};if(t[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function UA(t){for(let o=0;o<t.length-1;o++){if(t[o]===10&&t[o+1]===10||t[o]===13&&t[o+1]===13)return o+2;if(t[o]===13&&t[o+1]===10&&o+3<t.length&&t[o+2]===13&&t[o+3]===10)return o+4}return-1}var Hs={off:0,error:200,warn:300,info:400,debug:500},Xg=(t,e,n)=>{if(t){if(yA(Hs,t))return t;be(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(Hs))}`)}};function pr(){}function fs(t,e,n){return!e||Hs[t]>Hs[n]?pr:e[t].bind(e)}var HA={error:pr,warn:pr,info:pr,debug:pr},em=new WeakMap;function be(t){var e;let n=t.logger,o=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return HA;let r=em.get(n);if(r&&r[0]===o)return r[1];let i={error:fs("error",n,o),warn:fs("warn",n,o),info:fs("info",n,o),debug:fs("debug",n,o)};return em.set(n,[o,i]),i}var An=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);var rd=class t{constructor(e,n,o){this.iterator=e,this.controller=n,this.client=o}static fromSSEResponse(e,n,o){let r=!1,i=o?be(o):console;function s(){return lt(this,arguments,function*(){var c,d,f,p;if(r)throw new xe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let h=!1;try{try{for(var g=!0,m=ut(BA(e,n)),y;y=yield x(m.next()),c=y.done,!c;g=!0){p=y.value,g=!1;let E=p;if(!h)if(E.data.startsWith("[DONE]")){h=!0;continue}else try{yield yield x(JSON.parse(E.data))}catch(v){throw i.error("Could not parse message into JSON:",E.data),i.error("From chunk:",E.raw),v}}}catch(E){d={error:E}}finally{try{!g&&!c&&(f=m.return)&&(yield x(f.call(m)))}finally{if(d)throw d.error}}h=!0}catch(E){if(ed(E))return yield x(void 0);throw E}finally{h||n.abort()}})}return new t(s,n,o)}static fromReadableStream(e,n,o){let r=!1;function i(){return lt(this,arguments,function*(){var c,d,f,p;let h=new so,g=Nm(e);try{for(var m=!0,y=ut(g),E;E=yield x(y.next()),c=E.done,!c;m=!0){p=E.value,m=!1;let v=p;for(let w of h.decode(v))yield yield x(w)}}catch(v){d={error:v}}finally{try{!m&&!c&&(f=y.return)&&(yield x(f.call(y)))}finally{if(d)throw d.error}}for(let v of h.flush())yield yield x(v)})}function s(){return lt(this,arguments,function*(){var c,d,f,p;if(r)throw new xe("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let h=!1;try{try{for(var g=!0,m=ut(i()),y;y=yield x(m.next()),c=y.done,!c;g=!0){p=y.value,g=!1;let E=p;h||E&&(yield yield x(JSON.parse(E)))}}catch(E){d={error:E}}finally{try{!g&&!c&&(f=m.return)&&(yield x(f.call(m)))}finally{if(d)throw d.error}}h=!0}catch(E){if(ed(E))return yield x(void 0);throw E}finally{h||n.abort()}})}return new t(s,n,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){let e=[],n=[],o=this.iterator(),r=i=>({next:()=>{if(i.length===0){let s=o.next();e.push(s),n.push(s)}return i.shift()}});return[new t(()=>r(e),this.controller,this.client),new t(()=>r(n),this.controller,this.client)]}toReadableStream(){let e=this,n;return bm({async start(){n=e[Symbol.asyncIterator]()},async pull(o){try{let{value:r,done:i}=await n.next();if(i)return o.close();let s=Ed(JSON.stringify(r)+`
`);o.enqueue(s)}catch(r){o.error(r)}},async cancel(){var o;await((o=n.return)===null||o===void 0?void 0:o.call(n))}})}};function BA(t,e){return lt(this,arguments,function*(){var o,r,i,s;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new xe("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new xe("Attempted to iterate over a response with no body");let l=new id,c=new so,d=Nm(t.body);try{for(var f=!0,p=ut(GA(d)),h;h=yield x(p.next()),o=h.done,!o;f=!0){s=h.value,f=!1;let g=s;for(let m of c.decode(g)){let y=l.decode(m);y&&(yield yield x(y))}}}catch(g){r={error:g}}finally{try{!f&&!o&&(i=p.return)&&(yield x(i.call(p)))}finally{if(r)throw r.error}}for(let g of c.flush()){let m=l.decode(g);m&&(yield yield x(m))}})}function GA(t){return lt(this,arguments,function*(){var n,o,r,i;let s=new Uint8Array;try{for(var l=!0,c=ut(t),d;d=yield x(c.next()),n=d.done,!n;l=!0){i=d.value,l=!1;let f=i;if(f==null)continue;let p=f instanceof ArrayBuffer?new Uint8Array(f):typeof f=="string"?Ed(f):f,h=new Uint8Array(s.length+p.length);h.set(s),h.set(p,s.length),s=h;let g;for(;(g=UA(s))!==-1;)yield yield x(s.slice(0,g)),s=s.slice(g)}}catch(f){o={error:f}}finally{try{!l&&!n&&(r=c.return)&&(yield x(r.call(c)))}finally{if(o)throw o.error}}s.length>0&&(yield yield x(s))})}var id=class{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;let i={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],i}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,o,r]=$A(e,":");return r.startsWith(" ")&&(r=r.substring(1)),n==="event"?this.event=r:n==="data"&&this.data.push(r),null}};function $A(t,e){let n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}async function qA(t,e){let{response:n,requestLogID:o,retryOfRequestLogID:r,startTime:i}=e,s=await(async()=>{var l;if(e.options.stream)return be(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):rd.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;let c=n.headers.get("content-type"),d=(l=c?.split(";")[0])===null||l===void 0?void 0:l.trim();return d?.includes("application/json")||d?.endsWith("+json")?await n.json():await n.text()})();return be(t).debug(`[${o}] response parsed`,An({retryOfRequestLogID:r,url:n.url,status:n.status,body:s,durationMs:Date.now()-i})),s}var sd=class t extends Promise{constructor(e,n,o=qA){super(r=>{r(null)}),this.responsePromise=n,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new t(this.client,this.responsePromise,async(n,o)=>e(await this.parseResponse(n,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){let[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}};var Fm=Symbol("brand.privateNullableHeaders");function*zA(t){if(!t)return;if(Fm in t){let{values:o,nulls:r}=t;yield*o.entries();for(let i of r)yield[i,null];return}let e=!1,n;t instanceof Headers?n=t.entries():Jg(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let o of n){let r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");let i=Jg(o[1])?o[1]:[o[1]],s=!1;for(let l of i)l!==void 0&&(e&&!s&&(s=!0,yield[r,null]),yield[r,l])}}var dr=t=>{let e=new Headers,n=new Set;for(let o of t){let r=new Set;for(let[i,s]of zA(o)){let l=i.toLowerCase();r.has(l)||(e.delete(i),r.add(l)),s===null?(e.delete(i),n.add(l)):(e.append(i,s),n.delete(l))}}return{[Fm]:!0,values:e,nulls:n}};var gc=t=>{var e,n,o,r,i,s;if(typeof globalThis.process<"u")return(o=(n=(e=globalThis.process.env)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(s=(i=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||i===void 0?void 0:i.call(r,t))===null||s===void 0?void 0:s.trim()};var km,WA=(()=>{class t{constructor(n){var o,r,i,s,l,c,d,{baseURL:f=gc("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:p=(o=gc("GEMINI_API_KEY"))!==null&&o!==void 0?o:null,apiVersion:h="v1beta"}=n,g=As(n,["baseURL","apiKey","apiVersion"]);let m=Object.assign(Object.assign({apiKey:p,apiVersion:h},g),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=m.baseURL,this.timeout=(r=m.timeout)!==null&&r!==void 0?r:t.DEFAULT_TIMEOUT,this.logger=(i=m.logger)!==null&&i!==void 0?i:console;let y="warn";this.logLevel=y,this.logLevel=(l=(s=Xg(m.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:Xg(gc("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:y,this.fetchOptions=m.fetchOptions,this.maxRetries=(c=m.maxRetries)!==null&&c!==void 0?c:2,this.fetch=(d=m.fetch)!==null&&d!==void 0?d:SA(),this.encoder=MA,this._options=m,this.apiKey=p,this.apiVersion=h,this.clientAdapter=m.clientAdapter}withOptions(n){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),n))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:n,nulls:o}){if(!(n.has("authorization")||n.has("x-goog-api-key"))&&!(this.apiKey&&n.get("x-goog-api-key"))&&!o.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(n){let o=dr([n.headers]);if(!(o.values.has("authorization")||o.values.has("x-goog-api-key"))){if(this.apiKey)return dr([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return dr([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(n){return Object.entries(n).filter(([o,r])=>typeof r<"u").map(([o,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(o)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(o)}=`;throw new xe(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${no}`}defaultIdempotencyKey(){return`stainless-node-retry-${dA()}`}makeStatusError(n,o,r,i){return Re.generate(n,o,r,i)}buildURL(n,o,r){let i=!this.baseURLOverridden()&&r||this.baseURL,s=pA(n)?new URL(n):new URL(i+(i.endsWith("/")&&n.startsWith("/")?n.slice(1):n)),l=this.defaultQuery();return mA(l)||(o=Object.assign(Object.assign({},l),o)),typeof o=="object"&&o&&!Array.isArray(o)&&(s.search=this.stringifyQuery(o)),s.toString()}async prepareOptions(n){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!n.path.startsWith(`/${this.apiVersion}/projects/`)){let o=n.path.slice(this.apiVersion.length+1);n.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${o}`}}async prepareRequest(n,{url:o,options:r}){}get(n,o){return this.methodRequest("get",n,o)}post(n,o){return this.methodRequest("post",n,o)}patch(n,o){return this.methodRequest("patch",n,o)}put(n,o){return this.methodRequest("put",n,o)}delete(n,o){return this.methodRequest("delete",n,o)}methodRequest(n,o,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:n,path:o},i)))}request(n,o=null){return new sd(this,this.makeRequest(n,o,void 0))}async makeRequest(n,o,r){var i,s,l;let c=await n,d=(i=c.maxRetries)!==null&&i!==void 0?i:this.maxRetries;o==null&&(o=d),await this.prepareOptions(c);let{req:f,url:p,timeout:h}=await this.buildRequest(c,{retryCount:d-o});await this.prepareRequest(f,{url:p,options:c});let g="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),m=r===void 0?"":`, retryOf: ${r}`,y=Date.now();if(be(this).debug(`[${g}] sending request`,An({retryOfRequestLogID:r,method:c.method,url:p,options:c,headers:f.headers})),!((s=c.signal)===null||s===void 0)&&s.aborted)throw new gr;let E=new AbortController,v=await this.fetchWithTimeout(p,f,h,E).catch(td),w=Date.now();if(v instanceof globalThis.Error){let M=`retrying, ${o} attempts remaining`;if(!((l=c.signal)===null||l===void 0)&&l.aborted)throw new gr;let N=ed(v)||/timed? ?out/i.test(String(v)+("cause"in v?String(v.cause):""));if(o)return be(this).info(`[${g}] connection ${N?"timed out":"failed"} - ${M}`),be(this).debug(`[${g}] connection ${N?"timed out":"failed"} (${M})`,An({retryOfRequestLogID:r,url:p,durationMs:w-y,message:v.message})),this.retryRequest(c,o,r??g);throw be(this).info(`[${g}] connection ${N?"timed out":"failed"} - error; no more retries left`),be(this).debug(`[${g}] connection ${N?"timed out":"failed"} (error; no more retries left)`,An({retryOfRequestLogID:r,url:p,durationMs:w-y,message:v.message})),N?new bs:new io({cause:v})}let T=`[${g}${m}] ${f.method} ${p} ${v.ok?"succeeded":"failed"} with status ${v.status} in ${w-y}ms`;if(!v.ok){let M=await this.shouldRetry(v);if(o&&M){let G=`retrying, ${o} attempts remaining`;return await AA(v.body),be(this).info(`${T} - ${G}`),be(this).debug(`[${g}] response error (${G})`,An({retryOfRequestLogID:r,url:v.url,status:v.status,headers:v.headers,durationMs:w-y})),this.retryRequest(c,o,r??g,v.headers)}let N=M?"error; no more retries left":"error; not retryable";be(this).info(`${T} - ${N}`);let U=await v.text().catch(G=>td(G).message),k=EA(U),ae=k?void 0:U;throw be(this).debug(`[${g}] response error (${N})`,An({retryOfRequestLogID:r,url:v.url,status:v.status,headers:v.headers,message:ae,durationMs:Date.now()-y})),this.makeStatusError(v.status,k,ae,v.headers)}return be(this).info(T),be(this).debug(`[${g}] response start`,An({retryOfRequestLogID:r,url:v.url,status:v.status,headers:v.headers,durationMs:w-y})),{response:v,options:c,controller:E,requestLogID:g,retryOfRequestLogID:r,startTime:y}}async fetchWithTimeout(n,o,r,i){let s=o||{},{signal:l,method:c}=s,d=As(s,["signal","method"]);l&&l.addEventListener("abort",()=>i.abort());let f=setTimeout(()=>i.abort(),r),p=globalThis.ReadableStream&&d.body instanceof globalThis.ReadableStream||typeof d.body=="object"&&d.body!==null&&Symbol.asyncIterator in d.body,h=Object.assign(Object.assign(Object.assign({signal:i.signal},p?{duplex:"half"}:{}),{method:"GET"}),d);c&&(h.method=c.toUpperCase());try{return await this.fetch.call(void 0,n,h)}finally{clearTimeout(f)}}async shouldRetry(n){let o=n.headers.get("x-should-retry");return o==="true"?!0:o==="false"?!1:n.status===408||n.status===409||n.status===429||n.status>=500}async retryRequest(n,o,r,i){var s;let l,c=i?.get("retry-after-ms");if(c){let f=parseFloat(c);Number.isNaN(f)||(l=f)}let d=i?.get("retry-after");if(d&&!l){let f=parseFloat(d);Number.isNaN(f)?l=Date.parse(d)-Date.now():l=f*1e3}if(!(l&&0<=l&&l<60*1e3)){let f=(s=n.maxRetries)!==null&&s!==void 0?s:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(o,f)}return await _A(l),this.makeRequest(n,o-1,r)}calculateDefaultRetryTimeoutMillis(n,o){let s=o-n,l=Math.min(.5*Math.pow(2,s),8),c=1-Math.random()*.25;return l*c*1e3}async buildRequest(n,{retryCount:o=0}={}){var r,i,s;let l=Object.assign({},n),{method:c,path:d,query:f,defaultBaseURL:p}=l,h=this.buildURL(d,f,p);"timeout"in l&&vA("timeout",l.timeout),l.timeout=(r=l.timeout)!==null&&r!==void 0?r:this.timeout;let{bodyHeaders:g,body:m}=this.buildBody({options:l}),y=await this.buildHeaders({options:n,method:c,bodyHeaders:g,retryCount:o});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:c,headers:y},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&m instanceof globalThis.ReadableStream&&{duplex:"half"}),m&&{body:m}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(s=l.fetchOptions)!==null&&s!==void 0?s:{}),url:h,timeout:l.timeout}}async buildHeaders({options:n,method:o,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&o!=="get"&&(n.idempotencyKey||(n.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=n.idempotencyKey);let l=await this.authHeaders(n),c=dr([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},n.timeout?{"X-Stainless-Timeout":String(Math.trunc(n.timeout/1e3))}:{}),TA()),this._options.defaultHeaders,r,n.headers,l]);return this.validateHeaders(c),c.values}buildBody({options:{body:n,headers:o}}){if(!n)return{bodyHeaders:void 0,body:void 0};let r=dr([o]);return ArrayBuffer.isView(n)||n instanceof ArrayBuffer||n instanceof DataView||typeof n=="string"&&r.values.has("content-type")||globalThis.Blob&&n instanceof globalThis.Blob||n instanceof FormData||n instanceof URLSearchParams||globalThis.ReadableStream&&n instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:n}:typeof n=="object"&&(Symbol.asyncIterator in n||Symbol.iterator in n&&"next"in n&&typeof n.next=="function")?{bodyHeaders:void 0,body:wA(n)}:this.encoder({body:n,headers:r})}}return t.DEFAULT_TIMEOUT=6e4,t})(),pe=class extends WA{constructor(){super(...arguments),this.interactions=new Us(this)}};km=pe;pe.GeminiNextGenAPIClient=km;pe.GeminiNextGenAPIClientError=xe;pe.APIError=Re;pe.APIConnectionError=io;pe.APIConnectionTimeoutError=bs;pe.APIUserAbortError=gr;pe.NotFoundError=Ps;pe.ConflictError=Fs;pe.RateLimitError=Ls;pe.BadRequestError=Ns;pe.AuthenticationError=xs;pe.InternalServerError=Os;pe.PermissionDeniedError=Rs;pe.UnprocessableEntityError=ks;pe.toFile=PA;pe.Interactions=Us;function jA(t,e){let n={},o=a(t,["name"]);return o!=null&&u(n,["_url","name"],o),n}function JA(t,e){let n={},o=a(t,["name"]);return o!=null&&u(n,["_url","name"],o),n}function YA(t,e){let n={},o=a(t,["sdkHttpResponse"]);return o!=null&&u(n,["sdkHttpResponse"],o),n}function KA(t,e){let n={},o=a(t,["sdkHttpResponse"]);return o!=null&&u(n,["sdkHttpResponse"],o),n}function ZA(t,e,n){let o={};if(a(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");let r=a(t,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&u(e,["displayName"],r),a(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");let i=a(t,["epochCount"]);e!==void 0&&i!=null&&u(e,["tuningTask","hyperparameters","epochCount"],i);let s=a(t,["learningRateMultiplier"]);if(s!=null&&u(o,["tuningTask","hyperparameters","learningRateMultiplier"],s),a(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");let l=a(t,["batchSize"]);e!==void 0&&l!=null&&u(e,["tuningTask","hyperparameters","batchSize"],l);let c=a(t,["learningRate"]);if(e!==void 0&&c!=null&&u(e,["tuningTask","hyperparameters","learningRate"],c),a(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(a(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function QA(t,e,n){let o={},r=a(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){let g=a(t,["validationDataset"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec"],tm(g))}else if(r==="PREFERENCE_TUNING"){let g=a(t,["validationDataset"]);e!==void 0&&g!=null&&u(e,["preferenceOptimizationSpec"],tm(g))}let i=a(t,["tunedModelDisplayName"]);e!==void 0&&i!=null&&u(e,["tunedModelDisplayName"],i);let s=a(t,["description"]);e!==void 0&&s!=null&&u(e,["description"],s);let l=a(n,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){let g=a(t,["epochCount"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec","hyperParameters","epochCount"],g)}else if(l==="PREFERENCE_TUNING"){let g=a(t,["epochCount"]);e!==void 0&&g!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],g)}let c=a(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){let g=a(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g)}else if(c==="PREFERENCE_TUNING"){let g=a(t,["learningRateMultiplier"]);e!==void 0&&g!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],g)}let d=a(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){let g=a(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec","exportLastCheckpointOnly"],g)}else if(d==="PREFERENCE_TUNING"){let g=a(t,["exportLastCheckpointOnly"]);e!==void 0&&g!=null&&u(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],g)}let f=a(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){let g=a(t,["adapterSize"]);e!==void 0&&g!=null&&u(e,["supervisedTuningSpec","hyperParameters","adapterSize"],g)}else if(f==="PREFERENCE_TUNING"){let g=a(t,["adapterSize"]);e!==void 0&&g!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],g)}if(a(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");let p=a(t,["labels"]);e!==void 0&&p!=null&&u(e,["labels"],p);let h=a(t,["beta"]);return e!==void 0&&h!=null&&u(e,["preferenceOptimizationSpec","hyperParameters","beta"],h),o}function XA(t,e){let n={},o=a(t,["baseModel"]);o!=null&&u(n,["baseModel"],o);let r=a(t,["preTunedModel"]);r!=null&&u(n,["preTunedModel"],r);let i=a(t,["trainingDataset"]);i!=null&&cM(i);let s=a(t,["config"]);return s!=null&&ZA(s,n),n}function eM(t,e){let n={},o=a(t,["baseModel"]);o!=null&&u(n,["baseModel"],o);let r=a(t,["preTunedModel"]);r!=null&&u(n,["preTunedModel"],r);let i=a(t,["trainingDataset"]);i!=null&&dM(i,n,e);let s=a(t,["config"]);return s!=null&&QA(s,n,e),n}function tM(t,e){let n={},o=a(t,["name"]);return o!=null&&u(n,["_url","name"],o),n}function nM(t,e){let n={},o=a(t,["name"]);return o!=null&&u(n,["_url","name"],o),n}function oM(t,e,n){let o={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);let i=a(t,["pageToken"]);e!==void 0&&i!=null&&u(e,["_query","pageToken"],i);let s=a(t,["filter"]);return e!==void 0&&s!=null&&u(e,["_query","filter"],s),o}function rM(t,e,n){let o={},r=a(t,["pageSize"]);e!==void 0&&r!=null&&u(e,["_query","pageSize"],r);let i=a(t,["pageToken"]);e!==void 0&&i!=null&&u(e,["_query","pageToken"],i);let s=a(t,["filter"]);return e!==void 0&&s!=null&&u(e,["_query","filter"],s),o}function iM(t,e){let n={},o=a(t,["config"]);return o!=null&&oM(o,n),n}function sM(t,e){let n={},o=a(t,["config"]);return o!=null&&rM(o,n),n}function aM(t,e){let n={},o=a(t,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);let r=a(t,["nextPageToken"]);r!=null&&u(n,["nextPageToken"],r);let i=a(t,["tunedModels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>Lm(l))),u(n,["tuningJobs"],s)}return n}function lM(t,e){let n={},o=a(t,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);let r=a(t,["nextPageToken"]);r!=null&&u(n,["nextPageToken"],r);let i=a(t,["tuningJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(l=>ad(l))),u(n,["tuningJobs"],s)}return n}function uM(t,e){let n={},o=a(t,["name"]);o!=null&&u(n,["model"],o);let r=a(t,["name"]);return r!=null&&u(n,["endpoint"],r),n}function cM(t,e){let n={};if(a(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");let o=a(t,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),u(n,["examples","examples"],r)}return n}function dM(t,e,n){let o={},r=a(n,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){let s=a(t,["gcsUri"]);e!==void 0&&s!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(r==="PREFERENCE_TUNING"){let s=a(t,["gcsUri"]);e!==void 0&&s!=null&&u(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}let i=a(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){let s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&u(e,["supervisedTuningSpec","trainingDatasetUri"],s)}else if(i==="PREFERENCE_TUNING"){let s=a(t,["vertexDatasetResource"]);e!==void 0&&s!=null&&u(e,["preferenceOptimizationSpec","trainingDatasetUri"],s)}if(a(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function Lm(t,e){let n={},o=a(t,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);let r=a(t,["name"]);r!=null&&u(n,["name"],r);let i=a(t,["state"]);i!=null&&u(n,["state"],cm(i));let s=a(t,["createTime"]);s!=null&&u(n,["createTime"],s);let l=a(t,["tuningTask","startTime"]);l!=null&&u(n,["startTime"],l);let c=a(t,["tuningTask","completeTime"]);c!=null&&u(n,["endTime"],c);let d=a(t,["updateTime"]);d!=null&&u(n,["updateTime"],d);let f=a(t,["description"]);f!=null&&u(n,["description"],f);let p=a(t,["baseModel"]);p!=null&&u(n,["baseModel"],p);let h=a(t,["_self"]);return h!=null&&u(n,["tunedModel"],uM(h)),n}function ad(t,e){let n={},o=a(t,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);let r=a(t,["name"]);r!=null&&u(n,["name"],r);let i=a(t,["state"]);i!=null&&u(n,["state"],cm(i));let s=a(t,["createTime"]);s!=null&&u(n,["createTime"],s);let l=a(t,["startTime"]);l!=null&&u(n,["startTime"],l);let c=a(t,["endTime"]);c!=null&&u(n,["endTime"],c);let d=a(t,["updateTime"]);d!=null&&u(n,["updateTime"],d);let f=a(t,["error"]);f!=null&&u(n,["error"],f);let p=a(t,["description"]);p!=null&&u(n,["description"],p);let h=a(t,["baseModel"]);h!=null&&u(n,["baseModel"],h);let g=a(t,["tunedModel"]);g!=null&&u(n,["tunedModel"],g);let m=a(t,["preTunedModel"]);m!=null&&u(n,["preTunedModel"],m);let y=a(t,["supervisedTuningSpec"]);y!=null&&u(n,["supervisedTuningSpec"],y);let E=a(t,["preferenceOptimizationSpec"]);E!=null&&u(n,["preferenceOptimizationSpec"],E);let v=a(t,["tuningDataStats"]);v!=null&&u(n,["tuningDataStats"],v);let w=a(t,["encryptionSpec"]);w!=null&&u(n,["encryptionSpec"],w);let T=a(t,["partnerModelTuningSpec"]);T!=null&&u(n,["partnerModelTuningSpec"],T);let M=a(t,["customBaseModel"]);M!=null&&u(n,["customBaseModel"],M);let N=a(t,["experiment"]);N!=null&&u(n,["experiment"],N);let U=a(t,["labels"]);U!=null&&u(n,["labels"],U);let k=a(t,["outputUri"]);k!=null&&u(n,["outputUri"],k);let ae=a(t,["pipelineJob"]);ae!=null&&u(n,["pipelineJob"],ae);let R=a(t,["serviceAccount"]);R!=null&&u(n,["serviceAccount"],R);let G=a(t,["tunedModelDisplayName"]);G!=null&&u(n,["tunedModelDisplayName"],G);let ye=a(t,["veoTuningSpec"]);return ye!=null&&u(n,["veoTuningSpec"],ye),n}function fM(t,e){let n={},o=a(t,["sdkHttpResponse"]);o!=null&&u(n,["sdkHttpResponse"],o);let r=a(t,["name"]);r!=null&&u(n,["name"],r);let i=a(t,["metadata"]);i!=null&&u(n,["metadata"],i);let s=a(t,["done"]);s!=null&&u(n,["done"],s);let l=a(t,["error"]);return l!=null&&u(n,["error"],l),n}function tm(t,e){let n={},o=a(t,["gcsUri"]);o!=null&&u(n,["validationDatasetUri"],o);let r=a(t,["vertexDatasetResource"]);return r!=null&&u(n,["validationDatasetUri"],r),n}var ld=class extends ct{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Lt(en.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){let r={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);let i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{let r=Object.assign({},n);return await this.tuneInternal(r)}else{let r=Object.assign({},n),i=await this.tuneMldevInternal(r),s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:rm.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=nM(e);return l=I("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>ad(f))}else{let d=tM(e);return l=I("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>Lm(f))}}async listInternal(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=sM(e);return l=I("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=lM(f),h=new Cs;return Object.assign(h,p),h})}else{let d=iM(e);return l=I("tunedModels",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=aM(f),h=new Cs;return Object.assign(h,p),h})}}async cancel(e){var n,o,r,i;let s,l="",c={};if(this.apiClient.isVertexAI()){let d=JA(e);return l=I("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=KA(f),h=new Ds;return Object.assign(h,p),h})}else{let d=jA(e);return l=I("{name}:cancel",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{let h=p;return h.sdkHttpResponse={headers:f.headers},h})),s.then(f=>{let p=YA(f),h=new Ds;return Object.assign(h,p),h})}}async tuneInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){let l=eM(e,e);return i=I("tuningJobs",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>ad(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{let l=XA(e);return i=I("tunedModels",l._url),s=l._query,delete l._url,delete l._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(l),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{let f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>fM(c))}}};var ud=class{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}},pM=1024*1024*8,hM=3,gM=1e3,mM=2,Bs="x-goog-upload-status";async function yM(t,e,n){var o;let r=await Om(t,e,n),i=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[Bs])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return i.file}async function vM(t,e,n){var o;let r=await Om(t,e,n),i=await r?.json();if(((o=r?.headers)===null||o===void 0?void 0:o[Bs])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");let s=om(i),l=new Rc;return Object.assign(l,s),l}async function Om(t,e,n){var o,r;let i=0,s=0,l=new hr(new Response),c="upload";for(i=t.size;s<i;){let d=Math.min(pM,i-s),f=t.slice(s,s+d);s+d>=i&&(c+=", finalize");let p=0,h=gM;for(;p<hM&&(l=await n.request({path:"",body:f,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":c,"X-Goog-Upload-Offset":String(s),"Content-Length":String(d)}}}),!(!((o=l?.headers)===null||o===void 0)&&o[Bs]));)p++,await _M(h),h=h*mM;if(s+=d,((r=l?.headers)===null||r===void 0?void 0:r[Bs])!=="active")break;if(i<=s)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return l}async function EM(t){return{size:t.size,type:t.type}}function _M(t){return new Promise(e=>setTimeout(e,t))}var cd=class{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await yM(e,n,o)}async uploadToFileSearchStore(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await vM(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await EM(e)}};var dd=class{create(e,n,o){return new fd(e,n,o)}},fd=class{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}};var nm="x-goog-api-key",pd=class{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(nm)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(nm,this.apiKey)}}};var CM="gl-node/",Gs=class{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");let e=this.httpOptions;e?.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");let n=new pe({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e?.timeout});return this._interactions=n.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;let o=YD(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;let r=new pd(this.apiKey);this.apiClient=new $c({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:CM+"web",uploader:new cd,downloader:new ud}),this.models=new Yc(this.apiClient),this.live=new jc(this.apiClient,r,new dd),this.batches=new kc(this.apiClient),this.chats=new Oc(this.models,this.apiClient),this.caches=new Lc(this.apiClient),this.files=new Uc(this.apiClient),this.operations=new Kc(this.apiClient),this.authTokens=new Zc(this.apiClient),this.tunings=new ld(this.apiClient),this.fileSearchStores=new Xc(this.apiClient)}};var wt=class t{constructor(){this.ai=new Gs({apiKey:process.env.API_KEY||""})}async analyzeImage(e,n){try{return(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:e}},{text:n}]}})).text||"I couldn't analyze the image. Please try again."}catch(o){return console.error("Gemini Analysis Error:",o),"Error connecting to AI service. Please check your connection."}}async identifyPlant(e){try{let n=await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:e}},{text:"Identify this plant. Return JSON with 3 fields: 'name' (common name), 'care' (1 sentence on water/sun), 'pests' (common pests/diseases). No markdown."}]},config:{responseMimeType:"application/json",responseSchema:{type:Ce.OBJECT,properties:{name:{type:Ce.STRING},care:{type:Ce.STRING},pests:{type:Ce.STRING}}}}});return JSON.parse(n.text)}catch(n){return console.error("Plant ID Error",n),null}}async generatePersonalizedSchedule(e,n){let o=`Create a checklist of 3-5 lawn care tasks for ${n} in South Louisiana (Zone 9a). 
    Consider these specific plants in the user's garden: ${e.join(", ")}. 
    Return JSON array of objects with 'title' (string), 'type' (enum: mow, fertilize, pest, water), 'description' (string).`;try{let r=await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:o,config:{responseMimeType:"application/json",responseSchema:{type:Ce.ARRAY,items:{type:Ce.OBJECT,properties:{title:{type:Ce.STRING},type:{type:Ce.STRING,enum:["mow","fertilize","pest","water"]},description:{type:Ce.STRING}}}}}});return JSON.parse(r.text)}catch(r){return console.error("Schedule Generation Error",r),[]}}async chat(e,n){try{return(await this.ai.chats.create({model:"gemini-2.5-flash",config:{systemInstruction:"You are an expert lawn care assistant for South Louisiana (USDA Zone 8b/9a). You are knowledgeable about St. Augustine, Bermuda, Zoysia grasses, and local plants like Live Oaks and Azaleas. You help with pests like Chinch bugs and sod webworms. Be helpful, concise, and friendly."},history:e}).sendMessage({message:n})).text}catch(o){return console.error("Gemini Chat Error:",o),"I'm having trouble connecting right now."}}async getDesignSuggestions(e){let n="Analyze this yard. Suggest 3 specific South Louisiana native plants (flowers, shrubs, or trees) that would look good here given the visible light and space. Return ONLY a JSON array of strings, e.g., ['Azaleas', 'Live Oak', 'Lantana']. Do not use markdown formatting.";try{return(await this.ai.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{inlineData:{mimeType:"image/jpeg",data:e}},{text:n}]}})).text}catch{return"[]"}}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"})}};var co=class t{constructor(){this.myPlants=$([])}addPlant(e){this.myPlants.update(n=>n.includes(e)?n:[...n,e])}removePlant(e){this.myPlants.update(n=>n.filter(o=>o!==e))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=re({token:t,factory:t.\u0275fac,providedIn:"root"})}};function DM(t,e){t&1&&_(0," Upload a photo of your grass or problem area. Diagnose issues like Chinch bugs or Brown patch. ")}function IM(t,e){t&1&&_(0," Take a photo of a plant to identify it and get care instructions for South Louisiana. ")}function TM(t,e){if(t&1){let n=_e();qe(0,"img",11),C(1,"button",12),se("click",function(){Q(n);let r=J();return X(r.clearImage())}),Rt(),C(2,"svg",13),qe(3,"path",14),D()()}if(t&2){let n=J();ze("src",n.imagePreview(),Wo)}}function SM(t,e){if(t&1){let n=_e();C(0,"input",15),se("change",function(r){Q(n);let i=J();return X(i.handleFileInput(r))}),D(),C(1,"div",16),Rt(),C(2,"svg",17),qe(3,"path",18)(4,"path",19),D(),zn(),C(5,"p",20),_(6,"Tap to take photo or upload"),D()()}}function wM(t,e){t&1&&(qe(0,"div",21),_(1," Processing... "))}function AM(t,e){if(t&1&&_(0),t&2){let n=J();me(" ",n.mode()==="diagnose"?"Diagnose Lawn":"Identify Plant"," ")}}function MM(t,e){if(t&1&&(C(0,"div",9)(1,"h3",22),_(2," Diagnosis Result "),D(),C(3,"div",23),_(4),D(),C(5,"div",24)(6,"p",25),_(7,"Suggested Products"),D(),C(8,"div",26)(9,"div",27)(10,"div",28),_(11,"\u{1F9F4}"),D(),C(12,"p",29),_(13,"Fungicide"),D()(),C(14,"div",27)(15,"div",28),_(16,"\u{1F41C}"),D(),C(17,"p",29),_(18,"Pest Control"),D()()()()()),t&2){let n=J();S(4),me(" ",n.diagnosisResult()," ")}}function bM(t,e){t&1&&(C(0,"div",38),_(1," \u2705 Added to your Garden Schedule! "),D())}function NM(t,e){if(t&1){let n=_e();C(0,"div",10)(1,"div",30)(2,"h3",31),_(3),D(),C(4,"button",32),se("click",function(){Q(n);let r=J();return X(r.addToGarden())}),_(5," + Add to Garden "),D()(),C(6,"div",33)(7,"div",34)(8,"p",35),_(9,"Care Instructions"),D(),C(10,"p",36),_(11),D()(),C(12,"div",34)(13,"p",37),_(14,"Watch For Pests"),D(),C(15,"p",36),_(16),D()()(),ee(17,bM,2,0,"div",38),D()}if(t&2){let n,o,r,i=J();S(3),St((n=i.plantIdResult())==null?null:n.name),S(8),St((o=i.plantIdResult())==null?null:o.care),S(5),St((r=i.plantIdResult())==null?null:r.pests),S(),te(i.addedToGarden()?17:-1)}}var Ws=class t{constructor(){this.geminiService=H(wt);this.gardenService=H(co);this.mode=$("diagnose");this.imagePreview=$(null);this.imageBase64=$(null);this.isLoading=$(!1);this.diagnosisResult=$(null);this.plantIdResult=$(null);this.addedToGarden=$(!1)}handleFileInput(e){let n=e.target;if(n.files&&n.files[0]){let o=n.files[0],r=new FileReader;r.onload=i=>{this.imagePreview.set(i.target.result);let s=i.target.result.split(",")[1];this.imageBase64.set(s),this.diagnosisResult.set(null),this.plantIdResult.set(null),this.addedToGarden.set(!1)},r.readAsDataURL(o)}}clearImage(){this.imagePreview.set(null),this.imageBase64.set(null),this.diagnosisResult.set(null),this.plantIdResult.set(null)}async processImage(){let e=this.imageBase64();if(e){if(this.isLoading.set(!0),this.diagnosisResult.set(null),this.plantIdResult.set(null),this.addedToGarden.set(!1),this.mode()==="diagnose"){let o=await this.geminiService.analyzeImage(e,"Act as an expert agronomist for South Louisiana. Analyze this lawn image. Identify any visible weeds, pests, fungus (like brown patch), or drought stress. Provide a brief 3-step treatment plan specific to Zone 9a climate.");this.diagnosisResult.set(o)}else{let n=await this.geminiService.identifyPlant(e);this.plantIdResult.set(n)}this.isLoading.set(!1)}}addToGarden(){let e=this.plantIdResult();e&&(this.gardenService.addPlant(e.name),this.addedToGarden.set(!0))}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ot({type:t,selectors:[["app-analyzer"]],decls:21,vars:10,consts:[[1,"h-full","flex","flex-col","p-4","bg-white","rounded-lg","shadow-sm","overflow-y-auto"],[1,"flex","justify-between","items-center","mb-4"],[1,"text-2xl","font-bold","text-[#1A4D2E]"],[1,"flex","bg-gray-100","rounded-lg","p-1"],[1,"px-3","py-1","rounded-md","text-sm","font-medium","transition-all",3,"click"],[1,"text-gray-600","mb-6"],[1,"flex","flex-col","items-center","gap-4"],[1,"w-full","max-w-md","aspect-video","bg-gray-100","rounded-lg","border-2","border-dashed","border-gray-300","flex","flex-col","items-center","justify-center","relative","overflow-hidden","group","hover:border-[#1A4D2E]","transition-colors","cursor-pointer"],[1,"w-full","max-w-md","bg-[#1A4D2E]","text-white","py-3","px-6","rounded-lg","font-semibold","hover:bg-[#143d24]","disabled:opacity-50","disabled:cursor-not-allowed","transition-all","flex","justify-center","items-center","gap-2",3,"click","disabled"],[1,"w-full","max-w-md","bg-green-50","border","border-green-200","rounded-lg","p-5","mt-4"],[1,"w-full","max-w-md","bg-green-50","border","border-green-200","rounded-lg","p-5","mt-4","animate-fade-in"],["alt","Uploaded lawn",1,"w-full","h-full","object-cover",3,"src"],[1,"absolute","top-2","right-2","bg-red-500","text-white","p-1","rounded-full","shadow","hover:bg-red-600",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["fill-rule","evenodd","d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule","evenodd"],["type","file","accept","image/*",1,"absolute","inset-0","opacity-0","cursor-pointer",3,"change"],[1,"text-center","p-4","pointer-events-none"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-12","w-12","mx-auto","text-gray-400","mb-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 13a3 3 0 11-6 0 3 3 0 016 0z"],[1,"text-sm","font-medium","text-gray-600"],[1,"animate-spin","h-5","w-5","border-2","border-white","border-t-transparent","rounded-full"],[1,"font-bold","text-[#1A4D2E]","text-lg","mb-2","flex","items-center","gap-2"],[1,"prose","prose-sm","text-gray-700","whitespace-pre-line","leading-relaxed"],[1,"mt-4","pt-4","border-t","border-green-200"],[1,"text-xs","text-green-800","font-semibold","uppercase","tracking-wider"],[1,"flex","gap-2","mt-2","overflow-x-auto","pb-2"],[1,"flex-shrink-0","w-24","bg-white","p-2","rounded","border","border-green-100","shadow-sm","text-center"],[1,"h-12","w-full","bg-gray-200","rounded","mb-1","flex","items-center","justify-center","text-xl"],[1,"text-xs","truncate"],[1,"flex","justify-between","items-start"],[1,"font-bold","text-[#1A4D2E]","text-xl"],[1,"text-xs","bg-green-600","text-white","px-2","py-1","rounded","hover:bg-green-700",3,"click"],[1,"mt-3","space-y-3"],[1,"bg-white","p-3","rounded","shadow-sm"],[1,"text-xs","font-bold","text-gray-500","uppercase"],[1,"text-sm","text-gray-800"],[1,"text-xs","font-bold","text-red-500","uppercase"],[1,"mt-3","text-center","text-sm","text-green-700","font-medium"]],template:function(n,o){n&1&&(C(0,"div",0)(1,"div",1)(2,"h2",2),_(3,"AI Scanner"),D(),C(4,"div",3)(5,"button",4),se("click",function(){return o.mode.set("diagnose")}),_(6," Diagnose Health "),D(),C(7,"button",4),se("click",function(){return o.mode.set("identify")}),_(8," Identify Plant "),D()()(),C(9,"p",5),ee(10,DM,1,0)(11,IM,1,0),D(),C(12,"div",6)(13,"div",7),ee(14,TM,4,1)(15,SM,7,0),D(),C(16,"button",8),se("click",function(){return o.processImage()}),ee(17,wM,2,0)(18,AM,1,1),D(),ee(19,MM,19,1,"div",9),ee(20,NM,18,4,"div",10),D()()),n&2&&(S(5),We(o.mode()==="diagnose"?"bg-white shadow text-[#1A4D2E]":"text-gray-500 hover:text-gray-700"),S(2),We(o.mode()==="identify"?"bg-white shadow text-[#1A4D2E]":"text-gray-500 hover:text-gray-700"),S(3),te(o.mode()==="diagnose"?10:11),S(4),te(o.imagePreview()?14:15),S(2),ze("disabled",!o.imagePreview()||o.isLoading()),S(),te(o.isLoading()?17:18),S(2),te(o.mode()==="diagnose"&&o.diagnosisResult()?19:-1),S(),te(o.mode()==="identify"&&o.plantIdResult()?20:-1))},dependencies:[je],encapsulation:2})}};var xM=["videoElement"],Vm=(t,e)=>e.name,RM=(t,e)=>e.id;function PM(t,e){if(t&1){let n=_e();C(0,"button",29),se("click",function(){let r=Q(n).$implicit,i=J();return X(i.addItem(r.emoji,r.name))}),_(1),D()}if(t&2){let n=e.$implicit;ze("title",n.name),S(),me(" ",n.emoji," ")}}function FM(t,e){if(t&1){let n=_e();C(0,"button",30),se("click",function(){let r=Q(n).$implicit,i=J();return X(i.addItem(r.emoji,r.name))}),_(1),D()}if(t&2){let n=e.$implicit;ze("title",n.name),S(),me(" ",n.emoji," ")}}function kM(t,e){t&1&&qe(0,"div",20)}function LM(t,e){t&1&&_(0," \u2728 ")}function OM(t,e){if(t&1&&(C(0,"div",21)(1,"span",31),_(2,"Suggestion:"),D(),_(3),D()),t&2){let n=J();S(3),me(" ",n.suggestionResult()," ")}}function VM(t,e){t&1&&(C(0,"div",23),Rt(),C(1,"svg",32),qe(2,"path",33),D(),zn(),C(3,"p"),_(4,"Select Live Camera or Upload Photo"),D()())}function UM(t,e){if(t&1&&qe(0,"img",26),t&2){let n=J();ze("src",n.backgroundImage(),Wo)}}function HM(t,e){if(t&1){let n=_e();C(0,"div",36)(1,"button",37),se("click",function(){Q(n);let r=J().$implicit,i=J();return X(i.deleteItem(r.id))}),_(2,"\u2715"),D(),C(3,"button",38),se("click",function(){Q(n);let r=J().$implicit,i=J();return X(i.scaleItem(r.id,.1))}),_(4,"+"),D(),C(5,"button",38),se("click",function(){Q(n);let r=J().$implicit,i=J();return X(i.scaleItem(r.id,-.1))}),_(6,"-"),D()()}}function BM(t,e){if(t&1){let n=_e();C(0,"div",34),se("mousedown",function(r){let i=Q(n).$implicit,s=J();return X(s.onDragStart(r,i.id))})("touchstart",function(r){let i=Q(n).$implicit,s=J();return X(s.onTouchStart(r,i.id))}),C(1,"span",35),_(2),D(),ee(3,HM,7,0,"div",36),D()}if(t&2){let n=e.$implicit,o=J();Xi("left",n.x,"px")("top",n.y,"px")("transform","scale("+n.scale+")"),S(2),St(n.emoji),S(),te(o.selectedId()===n.id?3:-1)}}var js=class t{constructor(){this.geminiService=H(wt);this.backgroundImage=$(null);this.imageBase64=$(null);this.items=$([]);this.selectedId=$(null);this.isSuggesting=$(!1);this.suggestionResult=$(null);this.isAR=$(!1);this.mediaStream=null;this.isDragging=!1;this.dragOffset={x:0,y:0};this.draggedItemId=null;this.plants=[{emoji:"\u{1F333}",name:"Live Oak"},{emoji:"\u{1F332}",name:"Pine"},{emoji:"\u{1F334}",name:"Palmetto"},{emoji:"\u{1F33A}",name:"Azalea"},{emoji:"\u{1F33B}",name:"Sunflower"},{emoji:"\u{1FAB7}",name:"Lotus"},{emoji:"\u{1F33E}",name:"Pampas"},{emoji:"\u{1F339}",name:"Rose"}];this.products=[{emoji:"\u{1FAA8}",name:"Stone"},{emoji:"\u26F2",name:"Fountain"},{emoji:"\u{1FAB4}",name:"Potted Plant"},{emoji:"\u{1F3EE}",name:"Light"},{emoji:"\u{1F961}",name:"Fertilizer Bag"},{emoji:"\u{1F9F1}",name:"Pavers"}]}ngOnDestroy(){this.stopCamera()}async enableAR(){if(this.isAR()){this.stopCamera(),this.isAR.set(!1);return}try{this.mediaStream=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}),this.isAR.set(!0),setTimeout(()=>{this.videoElement&&(this.videoElement.nativeElement.srcObject=this.mediaStream)}),this.backgroundImage.set(null)}catch(e){alert("Camera access denied or not available. Please try on a mobile device with HTTPS."),console.error(e)}}stopCamera(){this.mediaStream&&(this.mediaStream.getTracks().forEach(e=>e.stop()),this.mediaStream=null)}handleBackgroundUpload(e){this.stopCamera(),this.isAR.set(!1);let n=e.target;if(n.files&&n.files[0]){let o=new FileReader;o.onload=r=>{this.backgroundImage.set(r.target.result),this.imageBase64.set(r.target.result.split(",")[1]),this.items.set([])},o.readAsDataURL(n.files[0])}}addItem(e,n){if(!this.backgroundImage()&&!this.isAR())return;let o={id:Date.now(),emoji:e,name:n,x:window.innerWidth/2-50,y:window.innerHeight/2-50,scale:1};this.items.update(r=>[...r,o]),this.selectedId.set(o.id)}deleteItem(e){this.items.update(n=>n.filter(o=>o.id!==e)),this.selectedId.set(null)}scaleItem(e,n){this.items.update(o=>o.map(r=>r.id===e?K(q({},r),{scale:Math.max(.5,r.scale+n)}):r))}onDragStart(e,n){e.preventDefault(),e.stopPropagation(),this.selectedId.set(n),this.isDragging=!0,this.draggedItemId=n,this.dragOffset={x:e.clientX,y:e.clientY}}onDragMove(e){if(!this.isDragging||this.draggedItemId===null)return;e.preventDefault();let n=e.clientX-this.dragOffset.x,o=e.clientY-this.dragOffset.y;this.items.update(r=>r.map(i=>i.id===this.draggedItemId?K(q({},i),{x:i.x+n,y:i.y+o}):i)),this.dragOffset={x:e.clientX,y:e.clientY}}onTouchStart(e,n){e.stopPropagation(),this.selectedId.set(n),this.isDragging=!0,this.draggedItemId=n;let o=e.touches[0];this.dragOffset={x:o.clientX,y:o.clientY}}onTouchMove(e){if(!this.isDragging||this.draggedItemId===null)return;let n=e.touches[0],o=n.clientX-this.dragOffset.x,r=n.clientY-this.dragOffset.y;this.items.update(i=>i.map(s=>s.id===this.draggedItemId?K(q({},s),{x:s.x+o,y:s.y+r}):s)),this.dragOffset={x:n.clientX,y:n.clientY}}onDragEnd(){this.isDragging=!1,this.draggedItemId=null}async getSuggestions(){if(this.isAR()){this.suggestionResult.set("Take a photo upload for specific suggestions, or just drag items in AR!");return}let e=this.imageBase64();if(!e)return;this.isSuggesting.set(!0),this.suggestionResult.set(null);let n=await this.geminiService.getDesignSuggestions(e);try{let o=n.replace(/```json/g,"").replace(/```/g,"").trim(),r=JSON.parse(o);Array.isArray(r)?this.suggestionResult.set(r.join(", ")):this.suggestionResult.set("Couldn't parse suggestions.")}catch{this.suggestionResult.set(n)}this.isSuggesting.set(!1)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ot({type:t,selectors:[["app-designer"]],viewQuery:function(n,o){if(n&1&&to(xM,5),n&2){let r;er(r=tr())&&(o.videoElement=r.first)}},decls:46,vars:10,consts:[["canvasContainer",""],["videoElement",""],[1,"h-full","flex","flex-col","md:flex-row","bg-gray-50"],[1,"w-full","md:w-64","bg-white","p-4","shadow-md","flex-shrink-0","z-10","overflow-y-auto"],[1,"font-bold","text-[#1A4D2E]","mb-4"],[1,"mb-6","bg-gray-100","p-2","rounded-lg"],[1,"text-xs","text-gray-500","mb-2","font-semibold","uppercase"],[1,"flex","flex-col","gap-2"],[1,"w-full","py-2","px-3","rounded","shadow-sm","text-sm","font-medium","transition-colors","flex","items-center","justify-center","gap-2",3,"click"],[1,"block","w-full","text-center","py-2","px-3","border","border-dashed","border-gray-300","bg-white","rounded","cursor-pointer","hover:bg-gray-50","text-sm"],[1,"text-gray-600"],["type","file","accept","image/*",1,"hidden",3,"change"],[1,"mb-6"],[1,"space-y-4"],[1,"text-[10px]","text-gray-400","mb-1"],[1,"grid","grid-cols-4","gap-2"],[1,"aspect-square","flex","items-center","justify-center","text-2xl","bg-gray-50","rounded","hover:bg-green-100","border","border-transparent","hover:border-green-300","transition-colors",3,"title"],[1,"aspect-square","flex","items-center","justify-center","text-2xl","bg-gray-50","rounded","hover:bg-yellow-100","border","border-transparent","hover:border-yellow-300","transition-colors",3,"title"],[1,"mt-auto","pt-4","border-t","border-gray-200"],[1,"w-full","bg-gradient-to-r","from-purple-600","to-blue-500","text-white","text-sm","py-2","px-4","rounded","shadow","hover:opacity-90","disabled:opacity-50","flex","items-center","justify-center","gap-2",3,"click","disabled"],[1,"w-3","h-3","rounded-full","border-2","border-white","border-t-transparent","animate-spin"],[1,"mt-2","text-xs","bg-blue-50","text-blue-800","p-2","rounded"],[1,"flex-1","relative","bg-gray-900","overflow-hidden","flex","items-center","justify-center",3,"mousemove","mouseup","mouseleave","touchmove","touchend"],[1,"text-center","text-gray-500","p-8"],[1,"relative","w-full","h-full","flex","items-center","justify-center"],["autoplay","","playsinline","",1,"absolute","inset-0","w-full","h-full","object-cover","z-0"],["draggable","false",1,"max-w-full","max-h-[80vh]","object-contain","select-none","pointer-events-none","z-0",3,"src"],[1,"absolute","inset-0","z-10","overflow-hidden"],[1,"absolute","cursor-move","flex","flex-col","items-center","select-none",3,"left","top","transform"],[1,"aspect-square","flex","items-center","justify-center","text-2xl","bg-gray-50","rounded","hover:bg-green-100","border","border-transparent","hover:border-green-300","transition-colors",3,"click","title"],[1,"aspect-square","flex","items-center","justify-center","text-2xl","bg-gray-50","rounded","hover:bg-yellow-100","border","border-transparent","hover:border-yellow-300","transition-colors",3,"click","title"],[1,"font-bold"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-16","h-16","mx-auto","mb-4","text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"absolute","cursor-move","flex","flex-col","items-center","select-none",3,"mousedown","touchstart"],[1,"text-6xl","drop-shadow-xl","filter"],[1,"absolute","-top-10","flex","gap-1","bg-white/90","rounded","shadow","px-2","py-1","z-50"],[1,"text-red-500","hover:bg-red-50","px-2","rounded",3,"click"],[1,"text-gray-700","hover:bg-gray-100","px-2","rounded",3,"click"]],template:function(n,o){if(n&1){let r=_e();C(0,"div",2)(1,"div",3)(2,"h3",4),_(3,"Design Tools"),D(),C(4,"div",5)(5,"p",6),_(6,"1. Choose View"),D(),C(7,"div",7)(8,"button",8),se("click",function(){return Q(r),X(o.enableAR())}),_(9),D(),C(10,"label",9)(11,"span",10),_(12,"\u{1F4C1} Upload Photo"),D(),C(13,"input",11),se("change",function(s){return Q(r),X(o.handleBackgroundUpload(s))}),D()()()(),C(14,"div",12)(15,"p",6),_(16,"2. Add Elements"),D(),C(17,"div",13)(18,"div")(19,"p",14),_(20,"PLANTS & TREES"),D(),C(21,"div",15),it(22,PM,2,2,"button",16,Vm),D()(),C(24,"div")(25,"p",14),_(26,"PRODUCTS & HARDSCAPE"),D(),C(27,"div",15),it(28,FM,2,2,"button",17,Vm),D()()()(),C(30,"div",18)(31,"button",19),se("click",function(){return Q(r),X(o.getSuggestions())}),ee(32,kM,1,0,"div",20)(33,LM,1,0),_(34," AI Suggest Ideas "),D(),ee(35,OM,4,1,"div",21),D()(),C(36,"div",22),se("mousemove",function(s){return Q(r),X(o.onDragMove(s))})("mouseup",function(){return Q(r),X(o.onDragEnd())})("mouseleave",function(){return Q(r),X(o.onDragEnd())})("touchmove",function(s){return Q(r),X(o.onTouchMove(s))})("touchend",function(){return Q(r),X(o.onDragEnd())}),ee(37,VM,5,0,"div",23),C(38,"div",24,0),qe(40,"video",25,1),ee(42,UM,1,1,"img",26),C(43,"div",27),it(44,BM,4,8,"div",28,RM),D()()()()}n&2&&(S(8),We(o.isAR()?"bg-red-500 text-white":"bg-white text-gray-700"),S(),me(" \u{1F4F7} ",o.isAR()?"Stop Camera (AR)":"Live Camera (AR)"," "),S(13),st(o.plants),S(6),st(o.products),S(3),ze("disabled",!o.backgroundImage()&&!o.isAR()||o.isSuggesting()),S(),te(o.isSuggesting()?32:33),S(3),te(o.suggestionResult()?35:-1),S(2),te(!o.backgroundImage()&&!o.isAR()?37:-1),S(3),Te("hidden",!o.isAR()),S(2),te(!o.isAR()&&o.backgroundImage()?42:-1),S(2),st(o.items()))},dependencies:[je],encapsulation:2})}};var GM=(t,e,n,o)=>({"bg-green-100 text-green-600":t,"bg-blue-100 text-blue-600":e,"bg-yellow-100 text-yellow-600":n,"bg-red-100 text-red-600":o}),$M=(t,e)=>e.title;function qM(t,e){if(t&1){let n=_e();C(0,"button",15),se("click",function(){let r=Q(n).$index,i=J();return X(i.selectMonth(r))}),_(1),D()}if(t&2){let n=e.$implicit,o=e.$index,r=J();We(r.selectedMonth()===o?"bg-[#1A4D2E] text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),S(),me(" ",n," ")}}function zM(t,e){t&1&&(C(0,"p",9),_(1,'No plants added yet. Use the "Analyze" tab to identify plants.'),D())}function WM(t,e){if(t&1){let n=_e();C(0,"span",17),_(1),C(2,"button",20),se("click",function(){let r=Q(n).$implicit,i=J(2);return X(i.gardenService.removePlant(r))}),_(3,"\xD7"),D()()}if(t&2){let n=e.$implicit;S(),me(" \u{1F33F} ",n," ")}}function jM(t,e){t&1&&(C(0,"span",19),_(1,"\u231B"),D())}function JM(t,e){if(t&1){let n=_e();C(0,"div",16),it(1,WM,4,1,"span",17,Qi),D(),C(3,"button",18),se("click",function(){Q(n);let r=J();return X(r.generatePersonalizedSchedule())}),ee(4,jM,2,0,"span",19),_(5," Regenerate Schedule with AI "),D()}if(t&2){let n=J();S(),st(n.gardenService.myPlants()),S(2),ze("disabled",n.isGenerating()),S(),te(n.isGenerating()?4:-1)}}function YM(t,e){t&1&&(C(0,"p",13),_(1,"No critical tasks found."),D())}function KM(t,e){t&1&&_(0," \u2702\uFE0F ")}function ZM(t,e){t&1&&_(0," \u{1F4A7} ")}function QM(t,e){t&1&&_(0," \u{1F331} ")}function XM(t,e){t&1&&_(0," \u{1F41B} ")}function eb(t,e){if(t&1&&(C(0,"div",21)(1,"div",22),ee(2,KM,1,0),ee(3,ZM,1,0),ee(4,QM,1,0),ee(5,XM,1,0),D(),C(6,"div")(7,"h4",23),_(8),D(),C(9,"p",24),_(10),D()()()),t&2){let n=e.$implicit,o=J(2);S(),We(Qu(8,GM,n.type==="mow",n.type==="water",n.type==="fertilize",n.type==="pest")),S(),te(n.type==="mow"?2:-1),S(),te(n.type==="water"?3:-1),S(),te(n.type==="fertilize"?4:-1),S(),te(n.type==="pest"?5:-1),S(3),St(n.title),S(2),me(" ",n.description||o.getStaticDescription(n.type)," ")}}function tb(t,e){if(t&1&&(C(0,"div",14),it(1,eb,11,13,"div",21,$M),D()),t&2){let n=J();S(),st(n.currentTasks())}}var Js=class t{constructor(){this.gardenService=H(co);this.geminiService=H(wt);this.months=["January","February","March","April","May","June","July","August","September","October","November","December"];this.selectedMonth=$(new Date().getMonth());this.isGenerating=$(!1);this.tasksData=$({0:[{title:"Apply Pre-emergent Herbicide",type:"fertilize",done:!1}],1:[{title:"Spot Treat Winter Weeds",type:"pest",done:!1}],2:[{title:"First Mow of Season",type:"mow",done:!1},{title:"Apply Pre-emergent (Round 2)",type:"fertilize",done:!1}],3:[{title:"Apply Fertilizer after Green-up",type:"fertilize",done:!1},{title:"Check for Chinch Bugs",type:"pest",done:!1}],4:[{title:"Weekly Mowing",type:"mow",done:!1},{title:'Water 1" per week',type:"water",done:!1}],5:[{title:"Monitor for Sod Webworms",type:"pest",done:!1},{title:"Apply Iron for Deep Green",type:"fertilize",done:!1}],6:[{title:"High Mowing Height (Heat Stress)",type:"mow",done:!1},{title:"Check Irrigation Coverage",type:"water",done:!1}],7:[{title:"Monitor for Chinch Bugs (Peak)",type:"pest",done:!1},{title:"Aeration (if needed)",type:"fertilize",done:!1}],8:[{title:"Apply Fall Pre-emergent",type:"fertilize",done:!1},{title:"Watch for Brown Patch Fungus",type:"pest",done:!1}],9:[{title:"Reduce Watering Frequency",type:"water",done:!1},{title:"Apply Fungicide Preventative",type:"pest",done:!1}],10:[{title:"Raise Mower Height for Winter",type:"mow",done:!1},{title:"Winterizer Fertilizer (Potassium)",type:"fertilize",done:!1}],11:[{title:"Clean up Leaves (Prevent Mold)",type:"pest",done:!1},{title:"Service Mower Equipment",type:"mow",done:!1}]});this.currentTasks=Zt(()=>this.tasksData()[this.selectedMonth()]||[])}selectMonth(e){this.selectedMonth.set(e)}getStaticDescription(e){switch(e){case"mow":return"Maintain appropriate height. Never scalp St. Augustine.";case"water":return"Water deeply, 1 inch per week early morning.";case"fertilize":return"Use slow-release nitrogen based on package instructions.";case"pest":return"Inspect for activity early morning or dusk.";default:return""}}async generatePersonalizedSchedule(){if(this.gardenService.myPlants().length===0)return;this.isGenerating.set(!0);let e=this.months[this.selectedMonth()],n=this.gardenService.myPlants(),o=await this.geminiService.generatePersonalizedSchedule(n,e);o&&Array.isArray(o)&&this.tasksData.update(r=>K(q({},r),{[this.selectedMonth()]:o.map(i=>K(q({},i),{done:!1}))})),this.isGenerating.set(!1)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ot({type:t,selectors:[["app-calendar"]],decls:23,vars:4,consts:[[1,"h-full","bg-white","p-6","rounded-lg","shadow-sm","overflow-y-auto"],[1,"text-2xl","font-bold","text-[#1A4D2E]","mb-2"],[1,"text-gray-500","mb-6"],[1,"flex","gap-2","overflow-x-auto","pb-4","mb-4","no-scrollbar"],[1,"px-4","py-2","rounded-full","whitespace-nowrap","text-sm","font-medium","transition-colors",3,"class"],[1,"mb-4","bg-green-50","p-4","rounded-lg","border","border-green-200"],[1,"flex","justify-between","items-center","mb-2"],[1,"font-bold","text-[#1A4D2E]","text-sm","uppercase"],[1,"text-xs","text-gray-500"],[1,"text-sm","text-gray-600","italic"],[1,"bg-white","rounded-xl","border","border-gray-100","shadow-sm","p-4"],[1,"text-xl","font-semibold","text-green-900","mb-4","flex","justify-between","items-center"],[1,"text-xs","font-normal","text-gray-500","bg-gray-100","px-2","py-1","rounded"],[1,"text-gray-500","italic","p-4","text-center"],[1,"space-y-3"],[1,"px-4","py-2","rounded-full","whitespace-nowrap","text-sm","font-medium","transition-colors",3,"click"],[1,"flex","flex-wrap","gap-2"],[1,"px-2","py-1","bg-white","text-green-800","text-xs","rounded","border","border-green-200","shadow-sm","flex","items-center","gap-1"],[1,"mt-3","w-full","bg-[#1A4D2E]","text-white","py-2","rounded","text-sm","hover:bg-[#143d24]","disabled:opacity-50","flex","items-center","justify-center","gap-2",3,"click","disabled"],[1,"animate-spin"],[1,"text-red-400","hover:text-red-600","ml-1",3,"click"],[1,"flex","items-start","gap-3","bg-white","p-3","rounded-lg","shadow-sm","border","border-gray-100","hover:border-green-300","transition-colors"],[1,"p-2","rounded-full","mt-0.5","shrink-0"],[1,"font-semibold","text-gray-800","text-sm"],[1,"text-xs","text-gray-600","mt-1","leading-relaxed"]],template:function(n,o){n&1&&(C(0,"div",0)(1,"h2",1),_(2,"Seasonal Care Schedule"),D(),C(3,"p",2),_(4,"Optimized for South Louisiana (Zone 9a)."),D(),C(5,"div",3),it(6,qM,2,3,"button",4,Qi),D(),C(8,"div",5)(9,"div",6)(10,"h3",7),_(11,"My Garden Plants"),D(),C(12,"span",8),_(13),D()(),ee(14,zM,2,0,"p",9)(15,JM,6,2),D(),C(16,"div",10)(17,"h3",11),_(18),C(19,"span",12),_(20,"Zone 9a"),D()(),ee(21,YM,2,0,"p",13)(22,tb,3,0,"div",14),D()()),n&2&&(S(6),st(o.months),S(7),me("",o.gardenService.myPlants().length," plants tracked"),S(),te(o.gardenService.myPlants().length===0?14:15),S(4),me(" ",o.months[o.selectedMonth()]," Checklist "),S(3),te(o.currentTasks().length===0?21:22))},dependencies:[je],encapsulation:2})}};var Wm=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,o){this._renderer=n,this._elementRef=o}setProperty(n,o){this._renderer.setProperty(this._elementRef.nativeElement,n,o)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(o){return new(o||t)(ce(Jo),ce(Ft))};static \u0275dir=rt({type:t})}return t})(),nb=(()=>{class t extends Wm{static \u0275fac=(()=>{let n;return function(r){return(n||(n=wu(t)))(r||t)}})();static \u0275dir=rt({type:t,features:[kt]})}return t})(),jm=new B("");var ob={provide:jm,useExisting:$t(()=>oa),multi:!0};function rb(){let t=Qt()?Qt().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var ib=new B(""),oa=(()=>{class t extends Wm{_compositionMode;_composing=!1;constructor(n,o,r){super(n,o),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!rb())}writeValue(n){let o=n??"";this.setProperty("value",o)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(o){return new(o||t)(ce(Jo),ce(Ft),ce(ib,8))};static \u0275dir=rt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(o,r){o&1&&Ie("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},standalone:!1,features:[nr([ob]),kt]})}return t})();var Jm=new B(""),Ym=new B("");function Km(t){return t!=null}function Zm(t){return Ko(t)?Ra(t):t}function Qm(t){let e={};return t.forEach(n=>{e=n!=null?q(q({},e),n):e}),Object.keys(e).length===0?null:e}function Xm(t,e){return e.map(n=>n(t))}function sb(t){return!t.validate}function ey(t){return t.map(e=>sb(e)?e:n=>e.validate(n))}function ab(t){if(!t)return null;let e=t.filter(Km);return e.length==0?null:function(n){return Qm(Xm(n,e))}}function Dd(t){return t!=null?ab(ey(t)):null}function lb(t){if(!t)return null;let e=t.filter(Km);return e.length==0?null:function(n){let o=Xm(n,e).map(Zm);return Pa(o).pipe(sn(Qm))}}function Id(t){return t!=null?lb(ey(t)):null}function Um(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function ub(t){return t._rawValidators}function cb(t){return t._rawAsyncValidators}function _d(t){return t?Array.isArray(t)?t:[t]:[]}function Ks(t,e){return Array.isArray(t)?t.includes(e):t===e}function Hm(t,e){let n=_d(e);return _d(t).forEach(r=>{Ks(n,r)||n.push(r)}),n}function Bm(t,e){return _d(e).filter(n=>!Ks(t,n))}var Zs=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Dd(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Id(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},ho=class extends Zs{name;get formDirective(){return null}get path(){return null}},Cr=class extends Zs{_parent=null;name=null;valueAccessor=null},Qs=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var ty=(()=>{class t extends Qs{constructor(n){super(n)}static \u0275fac=function(o){return new(o||t)(ce(Cr,2))};static \u0275dir=rt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(o,r){o&2&&Te("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[kt]})}return t})(),ny=(()=>{class t extends Qs{constructor(n){super(n)}static \u0275fac=function(o){return new(o||t)(ce(ho,10))};static \u0275dir=rt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(o,r){o&2&&Te("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},standalone:!1,features:[kt]})}return t})();var mr="VALID",Ys="INVALID",fo="PENDING",yr="DISABLED",tn=class{},Xs=class extends tn{value;source;constructor(e,n){super(),this.value=e,this.source=n}},Er=class extends tn{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}},_r=class extends tn{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}},po=class extends tn{status;source;constructor(e,n){super(),this.status=e,this.source=n}},Cd=class extends tn{source;constructor(e){super(),this.source=e}},ea=class extends tn{source;constructor(e){super(),this.source=e}};function oy(t){return(ra(t)?t.validators:t)||null}function db(t){return Array.isArray(t)?Dd(t):t||null}function ry(t,e){return(ra(e)?e.asyncValidators:t)||null}function fb(t){return Array.isArray(t)?Id(t):t||null}function ra(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function pb(t,e,n){let o=t.controls;if(!(e?Object.keys(o):o).length)throw new O(1e3,"");if(!o[n])throw new O(1001,"")}function hb(t,e,n){t._forEachChild((o,r)=>{if(n[r]===void 0)throw new O(1002,"")})}var ta=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ct(this.statusReactive)}set status(e){Ct(()=>this.statusReactive.set(e))}_status=Zt(()=>this.statusReactive());statusReactive=$(void 0);get valid(){return this.status===mr}get invalid(){return this.status===Ys}get pending(){return this.status==fo}get disabled(){return this.status===yr}get enabled(){return this.status!==yr}errors;get pristine(){return Ct(this.pristineReactive)}set pristine(e){Ct(()=>this.pristineReactive.set(e))}_pristine=Zt(()=>this.pristineReactive());pristineReactive=$(!0);get dirty(){return!this.pristine}get touched(){return Ct(this.touchedReactive)}set touched(e){Ct(()=>this.touchedReactive.set(e))}_touched=Zt(()=>this.touchedReactive());touchedReactive=$(!1);get untouched(){return!this.touched}_events=new Ke;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Hm(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Hm(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Bm(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Bm(e,this._rawAsyncValidators))}hasValidator(e){return Ks(this._rawValidators,e)}hasAsyncValidator(e){return Ks(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let o=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(K(q({},e),{sourceControl:o})),n&&e.emitEvent!==!1&&this._events.next(new _r(!0,o))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let o=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:o})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,o),n&&e.emitEvent!==!1&&this._events.next(new _r(!1,o))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let o=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(K(q({},e),{sourceControl:o})),n&&e.emitEvent!==!1&&this._events.next(new Er(!1,o))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let o=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,o),n&&e.emitEvent!==!1&&this._events.next(new Er(!0,o))}markAsPending(e={}){this.status=fo;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new po(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(K(q({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=yr,this.errors=null,this._forEachChild(r=>{r.disable(K(q({},e),{onlySelf:!0}))}),this._updateValue();let o=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Xs(this.value,o)),this._events.next(new po(this.status,o)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(K(q({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=mr,this._forEachChild(o=>{o.enable(K(q({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(K(q({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(o=>o(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let o=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===mr||this.status===fo)&&this._runAsyncValidator(o,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Xs(this.value,n)),this._events.next(new po(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(K(q({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?yr:mr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=fo,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:e!==!1};let o=Zm(this.asyncValidator(this));this._asyncValidationSubscription=o.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((o,r)=>o&&o._find(r),this)}getError(e,n){let o=n?this.get(n):this;return o&&o.errors?o.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,o){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||o)&&this._events.next(new po(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,o)}_initObservables(){this.valueChanges=new Ne,this.statusChanges=new Ne}_calculateStatus(){return this._allControlsDisabled()?yr:this.errors?Ys:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(fo)?fo:this._anyControlsHaveStatus(Ys)?Ys:mr}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let o=!this._anyControlsDirty(),r=this.pristine!==o;this.pristine=o,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),r&&this._events.next(new Er(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new _r(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ra(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=db(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=fb(this._rawAsyncValidators)}},na=class extends ta{constructor(e,n,o){super(oy(n),ry(o,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,o={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,o={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:o.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){hb(this,!0,e),Object.keys(e).forEach(o=>{pb(this,!0,o),this.controls[o].setValue(e[o],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(o=>{let r=this.controls[o];r&&r.patchValue(e[o],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((o,r)=>{o.reset(e?e[r]:null,K(q({},n),{onlySelf:!0}))}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new ea(this))}getRawValue(){return this._reduceChildren({},(e,n,o)=>(e[o]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,o)=>o._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let o=this.controls[n];o&&e(o,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,o]of Object.entries(this.controls))if(this.contains(n)&&e(o))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,o,r)=>((o.enabled||this.disabled)&&(n[r]=o.value),n))}_reduceChildren(e,n){let o=e;return this._forEachChild((r,i)=>{o=n(o,r,i)}),o}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Td=new B("",{factory:()=>Sd}),Sd="always";function gb(t,e){return[...e.path,t]}function iy(t,e,n=Sd){sy(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),yb(t,e),Eb(t,e),vb(t,e),mb(t,e)}function Gm(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function mb(t,e){if(e.valueAccessor.setDisabledState){let n=o=>{e.valueAccessor.setDisabledState(o)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function sy(t,e){let n=ub(t);e.validator!==null?t.setValidators(Um(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let o=cb(t);e.asyncValidator!==null?t.setAsyncValidators(Um(o,e.asyncValidator)):typeof o=="function"&&t.setAsyncValidators([o]);let r=()=>t.updateValueAndValidity();Gm(e._rawValidators,r),Gm(e._rawAsyncValidators,r)}function yb(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&ay(t,e)})}function vb(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&ay(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function ay(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function Eb(t,e){let n=(o,r)=>{e.valueAccessor.writeValue(o),r&&e.viewToModelUpdate(o)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function _b(t,e){t==null,sy(t,e)}function Cb(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function Db(t){return Object.getPrototypeOf(t.constructor)===nb}function Ib(t,e){t._syncPendingControls(),e.forEach(n=>{let o=n.control;o.updateOn==="submit"&&o._pendingChange&&(n.viewToModelUpdate(o._pendingValue),o._pendingChange=!1)})}function Tb(t,e){if(!e)return null;Array.isArray(e);let n,o,r;return e.forEach(i=>{i.constructor===oa?n=i:Db(i)?o=i:r=i}),r||o||n||null}var Sb={provide:ho,useExisting:$t(()=>wd)},vr=Promise.resolve(),wd=(()=>{class t extends ho{callSetDisabledState;get submitted(){return Ct(this.submittedReactive)}_submitted=Zt(()=>this.submittedReactive());submittedReactive=$(!1);_directives=new Set;form;ngSubmit=new Ne;options;constructor(n,o,r){super(),this.callSetDisabledState=r,this.form=new na({},Dd(n),Id(o))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){vr.then(()=>{let o=this._findContainer(n.path);n.control=o.registerControl(n.name,n.control),iy(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){vr.then(()=>{let o=this._findContainer(n.path);o&&o.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){vr.then(()=>{let o=this._findContainer(n.path),r=new na({});_b(r,n),o.registerControl(n.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){vr.then(()=>{let o=this._findContainer(n.path);o&&o.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,o){vr.then(()=>{this.form.get(n.path).setValue(o)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),Ib(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new Cd(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(o){return new(o||t)(ce(Jm,10),ce(Ym,10),ce(Td,8))};static \u0275dir=rt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup","",3,"formArray",""],["ng-form"],["","ngForm",""]],hostBindings:function(o,r){o&1&&Ie("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[nr([Sb]),kt]})}return t})();function $m(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function qm(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var wb=class extends ta{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,o){super(oy(n),ry(o,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ra(n)&&(n.nonNullable||n.initialValueIsDefault)&&(qm(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(o=>o(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),n.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new ea(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){$m(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){$m(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){qm(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Ab={provide:Cr,useExisting:$t(()=>Ad)},zm=Promise.resolve(),Ad=(()=>{class t extends Cr{_changeDetectorRef;callSetDisabledState;control=new wb;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new Ne;constructor(n,o,r,i,s,l){super(),this._changeDetectorRef=s,this.callSetDisabledState=l,this._parent=n,this._setValidators(o),this._setAsyncValidators(r),this.valueAccessor=Tb(this,i)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let o=n.name.previousValue;this.formDirective.removeControl({name:o,path:this._getPath(o)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),Cb(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){iy(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){zm.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let o=n.isDisabled.currentValue,r=o!==0&&Dg(o);zm.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?gb(n,this._parent):[n]}static \u0275fac=function(o){return new(o||t)(ce(ho,9),ce(Jm,10),ce(Ym,10),ce(jm,10),ce(oc,8),ce(Td,8))};static \u0275dir=rt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[nr([Ab]),kt,Ui]})}return t})();var ly=(()=>{class t{static \u0275fac=function(o){return new(o||t)};static \u0275dir=rt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})();var Mb=(()=>{class t{static \u0275fac=function(o){return new(o||t)};static \u0275mod=wn({type:t});static \u0275inj=qt({})}return t})();var uy=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Td,useValue:n.callSetDisabledState??Sd}]}}static \u0275fac=function(o){return new(o||t)};static \u0275mod=wn({type:t});static \u0275inj=qt({imports:[Mb]})}return t})();var Nb=["scrollContainer"];function xb(t,e){if(t&1&&(L(0,"div")(1,"div",15),_(2),z()()),t&2){let n=e.$implicit;We(n.role==="user"?"flex justify-end":"flex justify-start"),S(),We(n.role==="user"?"bg-[#1A4D2E] text-white rounded-br-none":"bg-gray-100 text-gray-800 rounded-bl-none"),S(),me(" ",n.text," ")}}function Rb(t,e){t&1&&(L(0,"div",8)(1,"div",16),Tt(2,"span",17)(3,"span",18)(4,"span",19),z()())}var ia=class t{constructor(){this.geminiService=H(wt);this.messages=$([{role:"model",text:"Hello! I can help you with your South Louisiana lawn. Ask me about grass types, pests, or design ideas."}]);this.currentMessage="";this.isLoading=$(!1)}ngAfterViewChecked(){this.scrollToBottom()}scrollToBottom(){try{this.scrollContainer.nativeElement.scrollTop=this.scrollContainer.nativeElement.scrollHeight}catch{}}async sendMessage(e){if(e.preventDefault(),!this.currentMessage.trim()||this.isLoading())return;let n=this.currentMessage;this.currentMessage="",this.messages.update(i=>[...i,{role:"user",text:n}]),this.isLoading.set(!0);let o=this.messages().map(i=>({role:i.role,parts:[{text:i.text}]})),r=await this.geminiService.chat(o,n);this.messages.update(i=>[...i,{role:"model",text:r}]),this.isLoading.set(!1)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ot({type:t,selectors:[["app-chat"]],viewQuery:function(n,o){if(n&1&&to(Nb,5),n&2){let r;er(r=tr())&&(o.scrollContainer=r.first)}},decls:20,vars:4,consts:[["scrollContainer",""],[1,"flex","flex-col","h-full","bg-white","rounded-lg","shadow-sm"],[1,"p-4","border-b","border-gray-100","flex","justify-between","items-center","bg-[#1A4D2E]","text-white","rounded-t-lg"],[1,"font-bold","text-lg"],[1,"text-xs","text-green-100"],[1,"h-8","w-8","bg-white/20","rounded-full","flex","items-center","justify-center"],[1,"flex-1","overflow-y-auto","p-4","space-y-4"],[3,"class"],[1,"flex","justify-start"],[1,"p-4","border-t","border-gray-100"],[1,"flex","gap-2",3,"submit"],["name","message","placeholder","Ask about chinch bugs, fertilizer...","autocomplete","off",1,"flex-1","border","border-gray-300","rounded-full","px-4","py-2","focus:outline-none","focus:border-[#1A4D2E]","focus:ring-1","focus:ring-[#1A4D2E]",3,"ngModelChange","ngModel","disabled"],["type","submit",1,"bg-[#1A4D2E]","text-white","rounded-full","w-10","h-10","flex","items-center","justify-center","hover:bg-[#143d24]","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors",3,"disabled"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["d","M10.894 2.553a1 1 0 00-1.788 0l-7 14a1 1 0 001.169 1.409l5-1.429A1 1 0 009 15.571V11a1 1 0 112 0v4.571a1 1 0 00.725.962l5 1.428a1 1 0 001.17-1.408l-7-14z"],[1,"max-w-[80%]","p-3","rounded-2xl","shadow-sm","text-sm","whitespace-pre-wrap","leading-relaxed"],[1,"bg-gray-100","p-3","rounded-2xl","rounded-bl-none","flex","gap-1","items-center","h-10"],[1,"w-2","h-2","bg-gray-400","rounded-full","animate-bounce"],[1,"w-2","h-2","bg-gray-400","rounded-full","animate-bounce","delay-100"],[1,"w-2","h-2","bg-gray-400","rounded-full","animate-bounce","delay-200"]],template:function(n,o){if(n&1){let r=_e();L(0,"div",1)(1,"div",2)(2,"div")(3,"h2",3),_(4,"Lawn Care Assistant"),z(),L(5,"p",4),_(6,"Expert on South LA Gardens"),z()(),L(7,"div",5),_(8," \u{1F916} "),z()(),L(9,"div",6,0),it(11,xb,3,5,"div",7,Ku),ee(13,Rb,5,0,"div",8),z(),L(14,"div",9)(15,"form",10),Ie("submit",function(s){return Q(r),X(o.sendMessage(s))}),L(16,"input",11),ts("ngModelChange",function(s){return Q(r),Zu(o.currentMessage,s)||(o.currentMessage=s),X(s)}),z(),L(17,"button",12),Rt(),L(18,"svg",13),Tt(19,"path",14),z()()()()()}n&2&&(S(11),st(o.messages()),S(2),te(o.isLoading()?13:-1),S(3),es("ngModel",o.currentMessage),Qo("disabled",o.isLoading()),S(),Qo("disabled",!o.currentMessage.trim()||o.isLoading()))},dependencies:[je,uy,ly,oa,ty,ny,Ad,wd],encapsulation:2})}};function Pb(t,e){t&1&&(L(0,"div",9),Tt(1,"app-analyzer",14),z())}function Fb(t,e){t&1&&(L(0,"div",10),Tt(1,"app-designer",14),z())}function kb(t,e){t&1&&(L(0,"div",9),Tt(1,"app-calendar",14),z())}function Lb(t,e){t&1&&(L(0,"div",9),Tt(1,"app-chat",14),z())}var sa=class t{constructor(){this.activeTab=$("analyze")}setTab(e){this.activeTab.set(e)}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=ot({type:t,selectors:[["app-root"]],decls:45,vars:28,consts:[[1,"min-h-screen","flex","flex-col","max-w-6xl","mx-auto","bg-gray-50","shadow-2xl","md:my-4","md:rounded-2xl","overflow-hidden","font-sans"],[1,"bg-[#1A4D2E]","text-white","p-4","flex","items-center","justify-between","shadow-lg","z-20"],[1,"flex","items-center","gap-3"],[1,"w-10","h-10","bg-white","rounded-full","flex","items-center","justify-center","text-[#1A4D2E]","font-bold","text-xl"],[1,"font-bold","text-lg","leading-tight"],[1,"text-xs","text-green-200"],[1,"hidden","md:flex","gap-1","bg-[#143d24]","p-1","rounded-lg"],[1,"px-4","py-2","rounded-md","text-sm","font-medium","hover:bg-white/10","transition-colors",3,"click"],[1,"flex-1","relative","overflow-hidden","bg-gray-100"],[1,"h-full","animate-fade-in","p-4"],[1,"h-full","animate-fade-in"],[1,"md:hidden","bg-white","border-t","border-gray-200","flex","justify-around","p-2","text-xs","font-medium","text-gray-500"],[1,"flex","flex-col","items-center","p-2","w-full",3,"click"],[1,"text-xl","mb-1"],[1,"h-full","block"]],template:function(n,o){n&1&&(L(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3),_(4,"X"),z(),L(5,"div")(6,"h1",4),_(7,"Xcellent1 Lawn Care"),z(),L(8,"p",5),_(9,"Interactive Assistant"),z()()(),L(10,"nav",6)(11,"button",7),Ie("click",function(){return o.setTab("analyze")}),_(12,"Analyzer"),z(),L(13,"button",7),Ie("click",function(){return o.setTab("design")}),_(14,"Visualizer"),z(),L(15,"button",7),Ie("click",function(){return o.setTab("schedule")}),_(16,"Schedule"),z(),L(17,"button",7),Ie("click",function(){return o.setTab("chat")}),_(18,"AI Chat"),z()()(),L(19,"main",8),ee(20,Pb,2,0,"div",9),ee(21,Fb,2,0,"div",10),ee(22,kb,2,0,"div",9),ee(23,Lb,2,0,"div",9),z(),L(24,"nav",11)(25,"button",12),Ie("click",function(){return o.setTab("analyze")}),L(26,"span",13),_(27,"\u{1F50D}"),z(),L(28,"span"),_(29,"Analyze"),z()(),L(30,"button",12),Ie("click",function(){return o.setTab("design")}),L(31,"span",13),_(32,"\u{1F3A8}"),z(),L(33,"span"),_(34,"Design"),z()(),L(35,"button",12),Ie("click",function(){return o.setTab("schedule")}),L(36,"span",13),_(37,"\u{1F4C5}"),z(),L(38,"span"),_(39,"Plan"),z()(),L(40,"button",12),Ie("click",function(){return o.setTab("chat")}),L(41,"span",13),_(42,"\u{1F4AC}"),z(),L(43,"span"),_(44,"Chat"),z()()()()),n&2&&(S(11),Te("bg-white",o.activeTab()==="analyze")("text-[#1A4D2E]",o.activeTab()==="analyze"),S(2),Te("bg-white",o.activeTab()==="design")("text-[#1A4D2E]",o.activeTab()==="design"),S(2),Te("bg-white",o.activeTab()==="schedule")("text-[#1A4D2E]",o.activeTab()==="schedule"),S(2),Te("bg-white",o.activeTab()==="chat")("text-[#1A4D2E]",o.activeTab()==="chat"),S(3),te(o.activeTab()==="analyze"?20:-1),S(),te(o.activeTab()==="design"?21:-1),S(),te(o.activeTab()==="schedule"?22:-1),S(),te(o.activeTab()==="chat"?23:-1),S(2),Te("text-[#1A4D2E]",o.activeTab()==="analyze"),S(5),Te("text-[#1A4D2E]",o.activeTab()==="design"),S(5),Te("text-[#1A4D2E]",o.activeTab()==="schedule"),S(5),Te("text-[#1A4D2E]",o.activeTab()==="chat"))},dependencies:[je,Ws,js,Js,ia],encapsulation:2})}};pc(sa,{providers:[Xu()]}).catch(t=>console.error(t));
